{"code":"(this[\"webpackJsonpFront-end-indicateur\"]=this[\"webpackJsonpFront-end-indicateur\"]||[]).push([[0],{186:function(e,t,n){},187:function(e,t,n){},211:function(e,t){},247:function(e,t){},249:function(e,t){},257:function(e,t){},304:function(e,t){},305:function(e,t){},332:function(e,t){},334:function(e,t){},442:function(e,t){},443:function(e,t){},446:function(e,t,n){\"use strict\";n.r(t);var r=n(12),a=n.n(r),i=n(189),o=n.n(i),s=n(190),c=n.n(s),l=n(24),u=n(449),d=n(112),p=(n(11),n(186),n(187),n(8));const y=\"0x55d398326f99059fF775485246999027B3197955\",m=[{constant:!0,inputs:[{name:\"_owner\",type:\"address\"}],name:\"balanceOf\",outputs:[{name:\"balance\",type:\"uint256\"}],payable:!1,stateMutability:\"view\",type:\"function\"},{constant:!1,inputs:[{name:\"_to\",type:\"address\"},{name:\"_value\",type:\"uint256\"}],name:\"transferFrom\",outputs:[{name:\"\",type:\"bool\"}],payable:!1,stateMutability:\"nonpayable\",type:\"function\"}],f=\"0xCd25eee89Bb01603f0E0cf8D8C243966a926761d\";new l.ethers.providers.JsonRpcProvider(\"https://bsc-dataseed.binance.org/\");var v=function(){var e;const[t,a]=Object(r.useState)(null),[i,o]=Object(r.useState)(null),[s,v]=Object(r.useState)(!1),[b,h]=Object(r.useState)(\"\"),[w,g]=Object(r.useState)(null),[j,x]=Object(r.useState)(\"\"),[T,O]=Object(r.useState)(null),[S,B]=Object(r.useState)(null),[M,k]=Object(r.useState)(\"USD\"),[D,E]=Object(r.useState)(null),[P,U]=Object(r.useState)(null);Object(r.useEffect)((()=>{const e=new c.a({cacheProvider:!0,providerOptions:{walletconnect:{package:d.a,options:{infuraId:\"e759bc5af90042a1b66c5a01aae905af\"}},metamask:{package:null},trustwallet:{package:d.a,options:{infuraId:\"pDtEhrK4AAiPfirK7qsQI25NJlgrtMu1bBcFDqV4J95GTCAR2d/8Lg\"}}}});a(e);const t=setInterval((()=>{const e=document.querySelector(\".web3-modal-container\");e&&(e.style.zIndex=\"999999\",clearInterval(t))}),100);return()=>clearInterval(t)}),[]),(()=>{const e=document.querySelector(\"iframe\");e&&(e.style.display=\"none\")})(),Object(r.useEffect)((()=>{(async()=>{if(i){const t=\"0xD62B5CFdDfd26F6219E4BF366d9DB6B1450D5905\",n=[{inputs:[{internalType:\"address\",name:\"token\",type:\"address\"}],name:\"addAllowedToken\",outputs:[],stateMutability:\"nonpayable\",type:\"function\"},{inputs:[{internalType:\"address\",name:\"token\",type:\"address\"},{internalType:\"uint256\",name:\"amount\",type:\"uint256\"},{internalType:\"string\",name:\"productId\",type:\"string\"}],name:\"pay\",outputs:[],stateMutability:\"payable\",type:\"function\"},{inputs:[{internalType:\"address\",name:\"token\",type:\"address\"}],name:\"removeAllowedToken\",outputs:[],stateMutability:\"nonpayable\",type:\"function\"},{inputs:[{internalType:\"address[]\",name:\"tokens\",type:\"address[]\"}],stateMutability:\"nonpayable\",type:\"constructor\"},{anonymous:!1,inputs:[{indexed:!0,internalType:\"address\",name:\"user\",type:\"address\"},{indexed:!1,internalType:\"uint256\",name:\"amount\",type:\"uint256\"},{indexed:!1,internalType:\"address\",name:\"token\",type:\"address\"},{indexed:!1,internalType:\"string\",name:\"productId\",type:\"string\"}],name:\"PaymentReceived\",type:\"event\"},{inputs:[{internalType:\"string\",name:\"productId\",type:\"string\"}],name:\"removeProduct\",outputs:[],stateMutability:\"nonpayable\",type:\"function\"},{inputs:[{internalType:\"string\",name:\"productId\",type:\"string\"},{internalType:\"uint256\",name:\"price\",type:\"uint256\"}],name:\"setProductPrice\",outputs:[],stateMutability:\"nonpayable\",type:\"function\"},{inputs:[{internalType:\"uint256\",name:\"amount\",type:\"uint256\"}],name:\"withdraw\",outputs:[],stateMutability:\"nonpayable\",type:\"function\"},{inputs:[{internalType:\"address\",name:\"token\",type:\"address\"},{internalType:\"uint256\",name:\"amount\",type:\"uint256\"}],name:\"withdrawToken\",outputs:[],stateMutability:\"nonpayable\",type:\"function\"},{inputs:[{internalType:\"address\",name:\"\",type:\"address\"}],name:\"allowedTokens\",outputs:[{internalType:\"bool\",name:\"\",type:\"bool\"}],stateMutability:\"view\",type:\"function\"},{inputs:[{internalType:\"address\",name:\"token\",type:\"address\"}],name:\"isTokenAllowed\",outputs:[{internalType:\"bool\",name:\"\",type:\"bool\"}],stateMutability:\"view\",type:\"function\"},{inputs:[],name:\"owner\",outputs:[{internalType:\"address\",name:\"\",type:\"address\"}],stateMutability:\"view\",type:\"function\"},{inputs:[{internalType:\"string\",name:\"\",type:\"string\"}],name:\"products\",outputs:[{internalType:\"uint256\",name:\"price\",type:\"uint256\"},{internalType:\"bool\",name:\"exists\",type:\"bool\"}],stateMutability:\"view\",type:\"function\"}],r=new l.ethers.Contract(t,n,i.getSigner());U(r);try{if(r){const e=await r.products(\"product1\");g(e),O(e.price)}}catch(e){console.error(\"Erreur lors de la r\\xe9cup\\xe9ration des informations du produit:\",e)}}})(),(async()=>{try{const e=await u.a.get(\"https://api.coingecko.com/api/v3/simple/price?ids=binancecoin&vs_currencies=usd\");B(e.data.binancecoin.usd)}catch(e){console.error(\"Erreur lors de la r\\xe9cup\\xe9ration du taux BNB -> USD\",e)}})()}),[i]);const[C,N]=Object(r.useState)(!1),[I,A]=Object(r.useState)(!1);Object(r.useEffect)((()=>{(async()=>{if(j&&w){N(!0);try{const e=w[j];e&&e.price>0?(O(e.price),E(e.price)):alert(\"Produit invalide ou prix incorrect.\")}catch(e){console.error(\"Erreur lors de la r\\xe9cup\\xe9ration des informations produit :\",e),alert(\"Une erreur s'est produite lors de la r\\xe9cup\\xe9ration des informations produit.\")}finally{N(!1)}}})()}),[j,w]);const F=async()=>{try{const e=await u.a.get(\"https://api.coingecko.com/api/v3/simple/price?ids=binancecoin&vs_currencies=usd\");return e.data.binancecoin.usd}catch(e){return console.error(\"Erreur lors de la r\\xe9cup\\xe9ration du taux de conversion BNB/USD :\",e),0}},L=async()=>{try{if(\"undefined\"!==typeof window.ethereum){const e=new l.ethers.providers.Web3Provider(window.ethereum);return o(e),e.getSigner()}throw new Error(\"Aucun fournisseur Ethereum n'est disponible.\")}catch(e){return console.error(\"Erreur dans resetProvider:\",e),alert(\"Erreur lors de la r\\xe9initialisation du provider.\"),null}};return Object(r.useEffect)((()=>{const e=async()=>{try{await L(),console.log(\"Le provider a \\xe9t\\xe9 r\\xe9initialis\\xe9 apr\\xe8s le changement de r\\xe9seau.\")}catch(e){console.error(\"Erreur lors du changement de r\\xe9seau et r\\xe9initialisation du provider:\",e)}};return\"undefined\"!==typeof window.ethereum&&window.ethereum.on(\"chainChanged\",e),()=>{\"undefined\"!==typeof window.ethereum&&window.ethereum.removeListener(\"chainChanged\",e)}}),[]),Object(p.jsxs)(\"div\",{className:\"App\",children:[C&&Object(p.jsx)(\"div\",{children:\"Chargement des produits...\"}),Object(p.jsxs)(\"div\",{className:\"parallax-container\",children:[Object(p.jsxs)(\"video\",{id:\"video-background\",autoPlay:!0,loop:!0,muted:!0,children:[Object(p.jsx)(\"source\",{src:\"https://gateway.pinata.cloud/ipfs/QmPZ8v3KzeyH2Dqz29TZFWe4kswkUETJyesZFCFULtagwv\",type:\"video/mp4\"}),\"Votre navigateur ne supporte pas les vid\\xe9os HTML5.\"]}),Object(p.jsxs)(\"div\",{className:\"content\",children:[Object(p.jsx)(\"div\",{className:\"wallet-connect-button\",children:Object(p.jsx)(\"button\",{onClick:async()=>{if(t)try{console.log(\"Tentative de connexion au wallet...\");const e=await t.connect(),n=new l.ethers.providers.Web3Provider(e);if(!n)return void console.error(\"Le fournisseur Web3 n'a pas \\xe9t\\xe9 correctement cr\\xe9\\xe9\");o(n);const r=n.getSigner(),a=await r.getAddress();h(a),v(!0),console.log(`Wallet connect\\xe9: ${a}`)}catch(e){console.error(\"Erreur lors de la connexion au portefeuille:\",e),alert(\"Erreur de connexion au portefeuille. Veuillez connecter votre wallet.\"),t.clearCachedProvider();try{\"undefined\"!==typeof window.ethereum?await(async()=>{if(\"undefined\"!==typeof window.ethereum)try{await window.ethereum.request({method:\"wallet_requestPermissions\",params:[{eth_accounts:{}}]}),setTimeout((async()=>{await window.ethereum.request({method:\"eth_requestAccounts\"});const e=new l.ethers.providers.Web3Provider(window.ethereum).getSigner(),t=await e.getAddress();h(t),v(!0),alert(`Compte connect\\xe9 : ${t}`)}),1e3)}catch(e){console.error(\"Erreur de connexion \\xe0 MetaMask :\",e),alert(\"\\xc9chec de la connexion \\xe0 MetaMask.\")}else alert(\"MetaMask n'est pas install\\xe9 !\")})():alert(\"MetaMask n'est pas install\\xe9.\")}catch(n){console.error(\"\\xc9chec de la reconnexion \\xe0 MetaMask\",n),alert(\"La reconnexion \\xe0 MetaMask a \\xe9chou\\xe9.\")}}else console.error(\"Web3Modal non initialis\\xe9\")},disabled:s,children:s?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(\"span\",{children:[\"Wallet connect\\xe9 : \",b]}),Object(p.jsx)(\"span\",{className:\"arrow-icon\",children:\"\\u2192\"}),\" \"]}):\"Connecter le wallet\"})}),Object(p.jsxs)(\"div\",{className:\"payment-wrapper\",children:[Object(p.jsx)(\"h1\",{children:\" Les Indicateurs \\xe0 Levier \"}),j&&w&&Object(p.jsxs)(\"div\",{children:[Object(p.jsxs)(\"p\",{children:[\"Produit choisi : \",null===(e=w[j])||void 0===e?void 0:e.title]}),Object(p.jsxs)(\"p\",{children:[\"Prix du produit : \",D||\"Chargement...\",\" \",M]}),Object(p.jsxs)(\"p\",{children:[\"Le produit est \",w.exists?\"disponible\":\"indisponible\"]})]}),Object(p.jsxs)(\"select\",{onChange:e=>(e=>{x(e);const t=w[e];t&&t.exists&&t.price>0?(O(t.price),\"USDT\"===M?E(t.price.toString()):\"BNB\"===M&&F().then((e=>{if(e>0){const n=t.price/e;E(n.toString())}}))):alert(\"Produit invalide ou prix incorrect.\")})(e.target.value),value:j,children:[Object(p.jsx)(\"option\",{value:\"\",children:\"Choisi Ton Indicateur\"}),Object(p.jsx)(\"option\",{value:\"product1\",children:\"Indicateur Daily\"}),Object(p.jsx)(\"option\",{value:\"product2\",children:\"Indicateur 4h/1h\"}),Object(p.jsx)(\"option\",{value:\"product3\",children:\"Indicateur 15mn\"})]}),Object(p.jsxs)(\"select\",{onChange:e=>{const t=e.target.value;k(t),\"USDT\"===t?E(T?T.toString():null):\"BNB\"===t&&E(T?(T/S).toString():null)},value:M,children:[Object(p.jsx)(\"option\",{value:\"USDT\",children:\"USD\"}),Object(p.jsx)(\"option\",{value:\"BNB\",children:\"BNB\"})]}),Object(p.jsx)(\"button\",{onClick:async()=>{if(C||I)return void console.log(\"Transaction d\\xe9j\\xe0 en cours, veuillez patienter.\");if(N(!0),!s)return alert(\"Veuillez connecter votre wallet avant de proc\\xe9der.\"),N(!1),void A(!1);if(!P)return console.error(\"Le contrat n'est pas initialis\\xe9.\"),N(!1),void A(!1);if(!j||!w[j])return alert(\"Veuillez s\\xe9lectionner un produit valide et essayer de nouveau.\"),N(!1),void A(!1);if(!await(async()=>{if(\"undefined\"!==typeof window.ethereum)return\"0x38\"===await window.ethereum.request({method:\"eth_chainId\"})||(alert(\"Veuillez vous connecter au r\\xe9seau Binance Smart Chain Mainnet.\"),!1);return console.error(\"Ethereum n'est pas disponible.\"),alert(\"MetaMask ou un autre portefeuille Ethereum n'est pas install\\xe9.\"),!1})())return N(!1),void A(!1);if(!i)return alert(\"Reconnexion au provider effectu\\xe9e. Veuillez renouveler l'op\\xe9ration.\"),await L(),N(!1),void A(!1);const e=w[j];if(!e||!e.exists||e.price<=0)return alert(\"Produit invalide ou prix incorrect.\"),N(!1),void A(!1);let t=0;try{if(t=e.price,\"USDT\"===M)t=e.price;else{if(\"BNB\"!==M)return alert(\"Devise non support\\xe9e pour ce paiement.\"),N(!1),void A(!1);{const n=await F();if(n<=0)return alert(\"Erreur de r\\xe9cup\\xe9ration du taux de conversion BNB/USD.\"),N(!1),void A(!1);t=e.price/n}}if(console.log(\"Prix du produit en USDT:\",e.price),console.log(\"Taux de conversion BNB/USD:\",S),console.log(\"Montant en BNB \\xe0 envoyer:\",t),parseFloat(t)<=0)return alert(\"Le montant \\xe0 payer est invalide (0 ou n\\xe9gatif).\"),N(!1),void A(!1);t=parseFloat(t).toFixed(18),console.log(\"Montant final pour la transaction:\",t),await(async(e,t)=>{if(i)try{const r=i.getSigner(),a=l.ethers.utils.parseUnits(e.toString(),18),o=5e4,{BigNumber:s}=n(24),c=(await i.getGasPrice()).mul(s.from(\"110\")).div(s.from(\"100\"));console.log(\"GasPrice ajust\\xe9 : \",c.toString());const u=await i.getBalance(r.getAddress());if(\"BNB\"===M&&u.lt(a.add(c)))return void alert(\"Solde insuffisant pour couvrir la transaction et les frais de gaz en BNB.\");if(\"USDT\"===M){const e=new l.ethers.Contract(y,m,r);if((await e.balanceOf(r.getAddress())).lt(a))return void alert(\"Solde insuffisant en USDT pour couvrir la transaction.\");if((await e.allowance(r.getAddress(),f)).lt(a))return void alert(\"Veuillez approuver le contrat USDT avant d'envoyer la transaction.\")}const d={to:f,value:\"BNB\"===M?a:0,gasLimit:o,gasPrice:c,data:l.ethers.utils.defaultAbiCoder.encode([\"uint256\"],[t])};let p;if(\"USDT\"===M){const t=new l.ethers.Contract(y,m,r),n=l.ethers.utils.parseUnits(e.toString(),6);p=await t.transferFrom(r.getAddress(),f,n),console.log(\"USDT envoy\\xe9s au contrat.\")}else p=await r.sendTransaction(d),console.log(\"Transaction envoy\\xe9e:\",p.hash);1===(await p.wait()).status?(console.log(\"Transaction r\\xe9ussie !\"),alert(\"Paiement effectu\\xe9 avec succ\\xe8s.\"),window.location.href=\"/Delivrance_IndicateurD.html\"):alert(\"\\xc9chec de la transaction.\")}catch(r){console.error(\"Erreur lors de l'envoi de la transaction:\",r.message),alert(\"Une erreur s'est produite lors de l'envoi de la transaction.\")}finally{console.log(\"Transaction termin\\xe9e.\")}else alert(\"Le provider n'est pas d\\xe9fini, veuillez connecter votre wallet.\")})(t,e.price),console.log(\"Transaction envoy\\xe9e.\")}catch(r){console.error(\"Erreur lors de l'envoi de la transaction:\",r.message),alert(\"Une erreur s'est produite lors de l'envoi de la transaction. V\\xe9rifiez votre solde et les param\\xe8tres.\")}finally{N(!1),A(!1)}},disabled:C||I,children:C||I?\"Paiement en cours...\":\"Acheter\"})]})]})]})]})};o.a.createRoot(document.getElementById(\"root\")).render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(v,{})}))}},[[446,1,2]]]);","name":"static/js/main.1a78a3ed.chunk.js","map":{"version":3,"names":["this","push","module","exports","__webpack_require__","__webpack_exports__","r","react","react_default","n","client","client_default","dist","dist_default","lib_esm","axios","esm","jsx_runtime","usdtAddress","usdtABI","constant","inputs","name","type","outputs","payable","stateMutability","App_contractAddress","providers","JsonRpcProvider","src_App","_productInfo$productI","web3Modal","setWeb3Modal","Object","provider","setProvider","walletConnected","setWalletConnected","walletAddress","setWalletAddress","productInfo","setProductInfo","productId","setProductId","productPrice","setProductPrice","bnbToUsdRate","setBnbToUsdRate","selectedCurrency","setSelectedCurrency","convertedPrice","setConvertedPrice","contractInstance","setContractInstance","modal","a","cacheProvider","providerOptions","walletconnect","package","options","infuraId","metamask","trustwallet","interval","setInterval","web3ModalElement","document","querySelector","style","zIndex","clearInterval","iframe","display","hideIframe","async","contractAddress","contractABI","internalType","anonymous","indexed","contract","Contract","getSigner","productDetails","products","price","error","console","loadBlockchainData","response","get","data","binancecoin","usd","fetchBnbToUsdRate","loading","setLoading","transactionInProgress","setTransactionInProgress","alert","fetchProductDetails","getBnbToUsdRate","resetProvider","window","ethereum","newProvider","Web3Provider","Error","changeNetworkHandler","log","on","removeListener","className","children","id","autoPlay","loop","muted","src","onClick","instance","connect","signer","address","getAddress","clearCachedProvider","request","method","params","eth_accounts","setTimeout","reconnectToMetaMask","retryError","disabled","title","exists","onChange","e","selectedProductId","toString","then","rate","convertedAmount","updateProductInfo","target","value","event","newCurrency","checkNetwork","amountIn","parseFloat","toFixed","fetchedPriceInUsd","amountInEther","utils","parseUnits","gasLimit","BigNumber","adjustedGasPrice","getGasPrice","mul","from","div","walletBalance","getBalance","lt","add","usdtContract","balanceOf","allowance","tx","to","gasPrice","defaultAbiCoder","encode","transactionResponse","tokenAmount","transferFrom","sendTransaction","hash","wait","status","location","href","message","createRoot","getElementById","render","StrictMode"],"sources":["static/js/main.1a78a3ed.chunk.js"],"mappings":"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","ignoreList":[]},"input":"(this[\"webpackJsonpFront-end-indicateur\"] = this[\"webpackJsonpFront-end-indicateur\"] || []).push([[0],{\n\n/***/ 186:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 187:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 211:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 247:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 249:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 257:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 304:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 305:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 332:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 334:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 442:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 443:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 446:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(12);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/client.js\nvar client = __webpack_require__(189);\nvar client_default = /*#__PURE__*/__webpack_require__.n(client);\n\n// EXTERNAL MODULE: ./node_modules/web3modal/dist/index.js\nvar dist = __webpack_require__(190);\nvar dist_default = /*#__PURE__*/__webpack_require__.n(dist);\n\n// EXTERNAL MODULE: ./node_modules/ethers/lib.esm/index.js + 106 modules\nvar lib_esm = __webpack_require__(24);\n\n// EXTERNAL MODULE: ../node_modules/axios/lib/axios.js + 43 modules\nvar axios = __webpack_require__(449);\n\n// EXTERNAL MODULE: ./node_modules/@walletconnect/web3-provider/dist/esm/index.js + 8 modules\nvar esm = __webpack_require__(112);\n\n// EXTERNAL MODULE: ./node_modules/process/browser.js\nvar browser = __webpack_require__(11);\n\n// EXTERNAL MODULE: ./src/App.css\nvar App = __webpack_require__(186);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(187);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(8);\n\n// CONCATENATED MODULE: ./src/App.js\n// Importation du fichier CSS\n// Ajoute cette ligne dans ton fichier JavaScript\n// Adresse du contrat USDT sur BSC (assure-toi que c'est l'adresse correcte pour le réseau que tu utilises)\nconst usdtAddress='0x55d398326f99059fF775485246999027B3197955';// Adresse du contrat USDT sur Binance Smart Chain\n// ABI pour le contrat USDT\nconst usdtABI=[// Seules les parties nécessaires pour ton utilisation, par exemple :\n{\"constant\":true,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"name\":\"balance\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"transferFrom\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"}];const App_contractAddress='0xCd25eee89Bb01603f0E0cf8D8C243966a926761d';const bscTestnetRpcUrl=\"https://bsc-dataseed.binance.org/\";// BSC Mainnet\nconst bscTestnetProvider=new lib_esm[\"ethers\"].providers.JsonRpcProvider(bscTestnetRpcUrl);function App_App(){var _productInfo$productI;const[web3Modal,setWeb3Modal]=Object(react[\"useState\"])(null);const[provider,setProvider]=Object(react[\"useState\"])(null);const[walletConnected,setWalletConnected]=Object(react[\"useState\"])(false);const[walletAddress,setWalletAddress]=Object(react[\"useState\"])('');const[productInfo,setProductInfo]=Object(react[\"useState\"])(null);const[productId,setProductId]=Object(react[\"useState\"])('');const[productPrice,setProductPrice]=Object(react[\"useState\"])(null);const[bnbToUsdRate,setBnbToUsdRate]=Object(react[\"useState\"])(null);const[selectedCurrency,setSelectedCurrency]=Object(react[\"useState\"])('USD');const[convertedPrice,setConvertedPrice]=Object(react[\"useState\"])(null);const[contractInstance,setContractInstance]=Object(react[\"useState\"])(null);// Déclarez `contractInstance` ici\n// Initialisation de Web3Modal pour la connexion aux portefeuilles\nObject(react[\"useEffect\"])(()=>{const modal=new dist_default.a({cacheProvider:true,// Gardera en cache la dernière connexion\nproviderOptions:{walletconnect:{package:esm[\"a\" /* default */],// Utilisation de WalletConnectProvider\noptions:{infuraId:\"e759bc5af90042a1b66c5a01aae905af\"// Remplace avec ton propre infura ID\n}},metamask:{package:null// MetaMask ne nécessite pas de package\n},trustwallet:{package:esm[\"a\" /* default */],// Utilisation de WalletConnectProvider pour Trust Wallet\noptions:{infuraId:\"pDtEhrK4AAiPfirK7qsQI25NJlgrtMu1bBcFDqV4J95GTCAR2d/8Lg\"// Remplace avec ton propre infura ID\n}}// Ajoute d'autres options de portefeuille ici si nécessaire (par exemple : Fortmatic, etc.)\n}});setWeb3Modal(modal);// Vérifie si la modale est présente dans le DOM\nconst interval=setInterval(()=>{const web3ModalElement=document.querySelector('.web3-modal-container');if(web3ModalElement){web3ModalElement.style.zIndex='999999';// Modale au-dessus de tout\nclearInterval(interval);}},100);return()=>clearInterval(interval);},[]);// Masquer l'iframe si elle est présente\nconst hideIframe=()=>{const iframe=document.querySelector('iframe');if(iframe){iframe.style.display='none';// ou iframe.remove() si tu préfères\n}};// Appel de la fonction pour masquer l'iframe au moment où Web3Modal est chargé\nhideIframe();// Fonction pour reconnecter MetaMask\nconst reconnectToMetaMask=async()=>{if(typeof window.ethereum===\"undefined\"){alert(\"MetaMask n'est pas installé !\");return;}try{await window.ethereum.request({method:'wallet_requestPermissions',params:[{eth_accounts:{}}]});setTimeout(async()=>{const accounts=await window.ethereum.request({method:'eth_requestAccounts'});const provider=new lib_esm[\"ethers\"].providers.Web3Provider(window.ethereum);const signer=provider.getSigner();const address=await signer.getAddress();setWalletAddress(address);setWalletConnected(true);alert(`Compte connecté : ${address}`);},1000);}catch(error){console.error('Erreur de connexion à MetaMask :',error);alert('Échec de la connexion à MetaMask.');}};// Connexion au wallet via Web3Modal\nconst connectWallet=async()=>{if(!web3Modal){console.error(\"Web3Modal non initialisé\");return;}try{console.log(\"Tentative de connexion au wallet...\");// Connexion via Web3Modal\nconst instance=await web3Modal.connect();const newProvider=new lib_esm[\"ethers\"].providers.Web3Provider(instance);// S'assurer que le provider est correctement défini\nif(!newProvider){console.error(\"Le fournisseur Web3 n'a pas été correctement créé\");return;}setProvider(newProvider);// Récupérer l'adresse du wallet\nconst signer=newProvider.getSigner();const address=await signer.getAddress();setWalletAddress(address);setWalletConnected(true);console.log(`Wallet connecté: ${address}`);}catch(error){console.error(\"Erreur lors de la connexion au portefeuille:\",error);alert(\"Erreur de connexion au portefeuille. Veuillez connecter votre wallet.\");// Ferme Web3Modal\nweb3Modal.clearCachedProvider();// Relance le processus de reconnexion via MetaMask\ntry{if(typeof window.ethereum!==\"undefined\"){await reconnectToMetaMask();}else{alert(\"MetaMask n'est pas installé.\");}}catch(retryError){console.error(\"Échec de la reconnexion à MetaMask\",retryError);alert(\"La reconnexion à MetaMask a échoué.\");}}};// Récupération du taux de conversion BNB vers USD\nconst fetchBnbToUsdRate=async()=>{try{const response=await axios[\"a\" /* default */].get('https://api.coingecko.com/api/v3/simple/price?ids=binancecoin&vs_currencies=usd');setBnbToUsdRate(response.data.binancecoin.usd);}catch(error){console.error('Erreur lors de la récupération du taux BNB -> USD',error);}};// Charger les données du contrat et les informations du produit\nObject(react[\"useEffect\"])(()=>{const loadBlockchainData=async()=>{if(provider){const contractAddress='0xD62B5CFdDfd26F6219E4BF366d9DB6B1450D5905';const contractABI=[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"}],\"name\":\"addAllowedToken\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"string\",\"name\":\"productId\",\"type\":\"string\"}],\"name\":\"pay\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"}],\"name\":\"removeAllowedToken\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address[]\",\"name\":\"tokens\",\"type\":\"address[]\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"string\",\"name\":\"productId\",\"type\":\"string\"}],\"name\":\"PaymentReceived\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"productId\",\"type\":\"string\"}],\"name\":\"removeProduct\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"productId\",\"type\":\"string\"},{\"internalType\":\"uint256\",\"name\":\"price\",\"type\":\"uint256\"}],\"name\":\"setProductPrice\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"withdraw\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"withdrawToken\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"allowedTokens\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"}],\"name\":\"isTokenAllowed\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"name\":\"products\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"price\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"exists\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"}];// Crée une nouvelle instance du contrat\nconst contract=new lib_esm[\"ethers\"].Contract(contractAddress,contractABI,provider.getSigner());// Stocke cette instance dans l'état\nsetContractInstance(contract);try{// Vérifie que contractInstance est bien défini avant de l'utiliser\nif(contract){const productDetails=await contract.products(\"product1\");setProductInfo(productDetails);setProductPrice(productDetails.price);}}catch(error){console.error(\"Erreur lors de la récupération des informations du produit:\",error);}}};loadBlockchainData();fetchBnbToUsdRate();},[provider]);// Ajoute `provider` comme dépendance, car `contractInstance` est déjà mis à jour à l'intérieur\nconst[loading,setLoading]=Object(react[\"useState\"])(false);// Ajout de l'état loading\nconst[transactionInProgress,setTransactionInProgress]=Object(react[\"useState\"])(false);Object(react[\"useEffect\"])(()=>{const fetchProductDetails=async()=>{if(productId&&productInfo){setLoading(true);// Afficher \"Chargement...\"\ntry{// Récupérer les détails du produit depuis `productInfo`\nconst productDetails=productInfo[productId];if(productDetails&&productDetails.price>0){setProductPrice(productDetails.price);// Mettre à jour le prix\nsetConvertedPrice(productDetails.price);// Mettre à jour la version convertie du prix (même valeur si en USD)\n}else{alert(\"Produit invalide ou prix incorrect.\");}}catch(error){console.error(\"Erreur lors de la récupération des informations produit :\",error);alert(\"Une erreur s'est produite lors de la récupération des informations produit.\");}finally{setLoading(false);// Mettre fin à l'affichage de \"Chargement...\"\n}}};fetchProductDetails();},[productId,productInfo]);// Ajout de `productInfo` comme dépendance\n// Fonction conversion BNB/USDT\nconst getBnbToUsdRate=async()=>{try{const response=await axios[\"a\" /* default */].get('https://api.coingecko.com/api/v3/simple/price?ids=binancecoin&vs_currencies=usd');const bnbToUsdRate=response.data.binancecoin.usd;return bnbToUsdRate;}catch(error){console.error(\"Erreur lors de la récupération du taux de conversion BNB/USD :\",error);return 0;}};const sendTransaction=async(amountIn,fetchedPriceInUsd)=>{if(!provider){alert(\"Le provider n'est pas défini, veuillez connecter votre wallet.\");return;}try{// Utilise le provider et signer déjà définis via Web3Modal\nconst signer=provider.getSigner();const amountInEther=lib_esm[\"ethers\"].utils.parseUnits(amountIn.toString(),18);// Obtenez le prix du gaz actuel\nconst gasLimit=50000;// Limite de gaz pour la transaction\nconst{BigNumber}=__webpack_require__(24);// Assure-toi que BigNumber est importé correctement si nécessaire\nconst gasPrice=await provider.getGasPrice();// Utilise le prix actuel du gaz\nconst adjustedGasPrice=gasPrice.mul(BigNumber.from(\"110\")).div(BigNumber.from(\"100\"));// à ajuster si bug\nconsole.log(\"GasPrice ajusté : \",adjustedGasPrice.toString());// Affiche le prix ajusté\n// Vérifiez que vous avez assez de fonds\nconst walletBalance=await provider.getBalance(signer.getAddress());if(selectedCurrency==='BNB'&&walletBalance.lt(amountInEther.add(adjustedGasPrice))){alert(\"Solde insuffisant pour couvrir la transaction et les frais de gaz en BNB.\");return;}if(selectedCurrency==='USDT'){// Vérification du solde en USDT\nconst usdtContract=new lib_esm[\"ethers\"].Contract(usdtAddress,usdtABI,signer);const usdtBalance=await usdtContract.balanceOf(signer.getAddress());if(usdtBalance.lt(amountInEther)){alert(\"Solde insuffisant en USDT pour couvrir la transaction.\");return;}// Vérifier l'allowance avant d'effectuer le transfert\nconst allowance=await usdtContract.allowance(signer.getAddress(),App_contractAddress);if(allowance.lt(amountInEther)){alert(\"Veuillez approuver le contrat USDT avant d'envoyer la transaction.\");return;}}// Préparez la transaction\nconst tx={to:App_contractAddress,value:selectedCurrency==='BNB'?amountInEther:0,// Montant en BNB\ngasLimit:gasLimit,gasPrice:adjustedGasPrice,data:lib_esm[\"ethers\"].utils.defaultAbiCoder.encode([\"uint256\"],[fetchedPriceInUsd])// Envoie l'USD comme paramètre\n};// Si la devise est USDT, envoyer les tokens via le contrat\nlet transactionResponse;if(selectedCurrency==='USDT'){const usdtContract=new lib_esm[\"ethers\"].Contract(usdtAddress,usdtABI,signer);const tokenAmount=lib_esm[\"ethers\"].utils.parseUnits(amountIn.toString(),6);// USDT a 6 décimales\ntransactionResponse=await usdtContract.transferFrom(signer.getAddress(),App_contractAddress,tokenAmount);console.log(\"USDT envoyés au contrat.\");}else{// Si la devise est BNB, envoyer la transaction en BNB\ntransactionResponse=await signer.sendTransaction(tx);console.log(\"Transaction envoyée:\",transactionResponse.hash);}// Attendez la confirmation de la transaction\nconst receipt=await transactionResponse.wait();if(receipt.status===1){console.log(\"Transaction réussie !\");alert(\"Paiement effectué avec succès.\");// Rediriger vers une nouvelle page après la transaction réussie\nwindow.location.href='/Delivrance_IndicateurD.html';// Remplace '/confirmation.html' par le chemin de la page HTML\n}else{alert(\"Échec de la transaction.\");}}catch(error){console.error(\"Erreur lors de l'envoi de la transaction:\",error.message);alert(\"Une erreur s'est produite lors de l'envoi de la transaction.\");}finally{// Si tu as des actions à effectuer après la transaction, comme réinitialiser un état ou déverrouiller des boutons, tu peux les ajouter ici\nconsole.log(\"Transaction terminée.\");}};const checkNetwork=async()=>{if(typeof window.ethereum!==\"undefined\"){const network=await window.ethereum.request({method:'eth_chainId'});// Vérifie si l'utilisateur est bien sur BSC Testnet (chainId 97)\nif(network!=='0x38'){// 0x38 est le chainId pour BSC Mainnet\nalert(\"Veuillez vous connecter au réseau Binance Smart Chain Mainnet.\");return false;}return true;}else{console.error(\"Ethereum n'est pas disponible.\");alert(\"MetaMask ou un autre portefeuille Ethereum n'est pas installé.\");return false;}};// Fonction pour réinitialiser le provider\nconst resetProvider=async()=>{try{if(typeof window.ethereum!==\"undefined\"){const newProvider=new lib_esm[\"ethers\"].providers.Web3Provider(window.ethereum);setProvider(newProvider);// Mettre à jour le provider\n// Attendre que React ait bien mis à jour le provider\nreturn newProvider.getSigner();// Retourner le signer après que le provider ait été mis à jour\n}else{throw new Error(\"Aucun fournisseur Ethereum n'est disponible.\");}}catch(error){console.error(\"Erreur dans resetProvider:\",error);alert(\"Erreur lors de la réinitialisation du provider.\");return null;}};// Vérification du réseau à chaque fois qu'il change\nObject(react[\"useEffect\"])(()=>{const changeNetworkHandler=async()=>{try{await resetProvider();// Remet à jour le provider lorsque le réseau change\nconsole.log(\"Le provider a été réinitialisé après le changement de réseau.\");}catch(error){console.error(\"Erreur lors du changement de réseau et réinitialisation du provider:\",error);}};if(typeof window.ethereum!==\"undefined\"){window.ethereum.on('chainChanged',changeNetworkHandler);}// Nettoyage quand le composant est démonté\nreturn()=>{if(typeof window.ethereum!==\"undefined\"){window.ethereum.removeListener('chainChanged',changeNetworkHandler);}};},[]);const handlePayment=async()=>{if(loading||transactionInProgress){console.log(\"Transaction déjà en cours, veuillez patienter.\");return;// Empêche l'exécution si une autre transaction est en cours\n}setLoading(true);// Empêche d'envoyer une nouvelle transaction si une est déjà en cours\nif(!walletConnected){alert(\"Veuillez connecter votre wallet avant de procéder.\");setLoading(false);// Permet de déverrouiller le bouton si une erreur survient\nsetTransactionInProgress(false);// Réinitialise l'état de la transaction\nreturn;}// Vérifie que le contrat est bien initialisé\nif(!contractInstance){console.error(\"Le contrat n'est pas initialisé.\");setLoading(false);setTransactionInProgress(false);return;}// Vérifie que le produit est bien sélectionné\nif(!productId||!productInfo[productId]){alert(\"Veuillez sélectionner un produit valide et essayer de nouveau.\");setLoading(false);setTransactionInProgress(false);return;}// Vérifie que l'utilisateur est sur le bon réseau\nconst isCorrectNetwork=await checkNetwork();if(!isCorrectNetwork){setLoading(false);setTransactionInProgress(false);return;}// Vérifier que le provider est disponible\nif(!provider){alert(\"Reconnexion au provider effectuée. Veuillez renouveler l'opération.\");await resetProvider();setLoading(false);setTransactionInProgress(false);return;}// Récupérer les détails du produit\nconst productDetails=productInfo[productId];if(!productDetails||!productDetails.exists||productDetails.price<=0){alert(\"Produit invalide ou prix incorrect.\");setLoading(false);setTransactionInProgress(false);return;}// --- Ajout de la fonction pour récupérer le prix du produit ---\nlet amountIn=0;try{// Utilisation directement de fetchedPriceInUsd\namountIn=productDetails.price;// Vérification de la devise et calcul du montant à envoyer\nif(selectedCurrency==='USDT'){amountIn=productDetails.price;// Utilise directement le prix en USD\n}else if(selectedCurrency==='BNB'){const bnbToUsdRate=await getBnbToUsdRate();if(bnbToUsdRate<=0){alert(\"Erreur de récupération du taux de conversion BNB/USD.\");setLoading(false);setTransactionInProgress(false);return;}amountIn=productDetails.price/bnbToUsdRate;// Conversion de USD en BNB\n}else{alert(\"Devise non supportée pour ce paiement.\");setLoading(false);setTransactionInProgress(false);return;}// Logs de vérification\nconsole.log(\"Prix du produit en USDT:\",productDetails.price);console.log(\"Taux de conversion BNB/USD:\",bnbToUsdRate);console.log(\"Montant en BNB à envoyer:\",amountIn);// Vérifier que amountIn est valide et non nul avant d'envoyer la transaction\nif(parseFloat(amountIn)<=0){alert(\"Le montant à payer est invalide (0 ou négatif).\");setLoading(false);setTransactionInProgress(false);return;}// Convertir le montant à un format acceptable (fixé à 18 décimales)\namountIn=parseFloat(amountIn).toFixed(18);console.log('Montant final pour la transaction:',amountIn);// Envoyer la transaction\nawait sendTransaction(amountIn,productDetails.price);console.log(\"Transaction envoyée.\");}catch(error){console.error(\"Erreur lors de l'envoi de la transaction:\",error.message);alert(\"Une erreur s'est produite lors de l'envoi de la transaction. Vérifiez votre solde et les paramètres.\");}finally{setLoading(false);// Permet de déverrouiller le bouton après l'exécution\nsetTransactionInProgress(false);// Réinitialise l'état de la transaction\n}};// Mise à jour des informations du produit sélectionné\nconst updateProductInfo=selectedProductId=>{setProductId(selectedProductId);const productDetails=productInfo[selectedProductId];if(productDetails&&productDetails.exists&&productDetails.price>0){setProductPrice(productDetails.price);// Mise à jour du prix converti\nif(selectedCurrency==='USDT'){setConvertedPrice(productDetails.price.toString());}else if(selectedCurrency==='BNB'){getBnbToUsdRate().then(rate=>{if(rate>0){const convertedAmount=productDetails.price/rate;setConvertedPrice(convertedAmount.toString());}});}}else{alert(\"Produit invalide ou prix incorrect.\");}};// Gestion du changement de devise (USD ou BNB)\nconst handleCurrencyChange=event=>{const newCurrency=event.target.value;setSelectedCurrency(newCurrency);if(newCurrency==='USDT'){setConvertedPrice(productPrice?productPrice.toString():null);}else if(newCurrency==='BNB'){setConvertedPrice(productPrice?(productPrice/bnbToUsdRate).toString():null);}};// Liste des produits\nconst products={product1:{price:5,exists:true,title:\"Indicateur Daily\"},product2:{price:295,exists:true,title:\"Indicateur 4h/1h\"},product3:{price:495,exists:true,title:\"Indicateur 15mn\"}};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"App\",children:[loading&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{children:\"Chargement des produits...\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"parallax-container\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"video\",{id:\"video-background\",autoPlay:true,loop:true,muted:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"source\",{src:\"https://gateway.pinata.cloud/ipfs/QmPZ8v3KzeyH2Dqz29TZFWe4kswkUETJyesZFCFULtagwv\",type:\"video/mp4\"}),\"Votre navigateur ne supporte pas les vid\\xE9os HTML5.\"]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"content\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"wallet-connect-button\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{onClick:connectWallet,disabled:walletConnected// Désactive le bouton une fois connecté\n,children:walletConnected?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"span\",{children:[\"Wallet connect\\xE9 : \",walletAddress]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"arrow-icon\",children:\"\\u2192\"}),\" \"]}):'Connecter le wallet'})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"payment-wrapper\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{children:\" Les Indicateurs \\xE0 Levier \"}),productId&&productInfo&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\"Produit choisi : \",(_productInfo$productI=productInfo[productId])===null||_productInfo$productI===void 0?void 0:_productInfo$productI.title]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\"Prix du produit : \",convertedPrice?convertedPrice:'Chargement...',\" \",selectedCurrency]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\"Le produit est \",productInfo.exists?'disponible':'indisponible']})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"select\",{onChange:e=>updateProductInfo(e.target.value),value:productId,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"\",children:\"Choisi Ton Indicateur\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"product1\",children:\"Indicateur Daily\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"product2\",children:\"Indicateur 4h/1h\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"product3\",children:\"Indicateur 15mn\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"select\",{onChange:handleCurrencyChange,value:selectedCurrency,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"USDT\",children:\"USD\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"BNB\",children:\"BNB\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{onClick:handlePayment,disabled:loading||transactionInProgress,children:loading||transactionInProgress?\"Paiement en cours...\":\"Acheter\"})]})]})]})]});};/* harmony default export */ var src_App = (App_App);\n// CONCATENATED MODULE: ./src/index.js\n// Cette ligne doit être valide avec React 18\n// Ajoute cette ligne dans ton fichier JavaScript\nconst root=client_default.a.createRoot(document.getElementById('root'));root.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{})}));\n\n/***/ })\n\n},[[446,1,2]]]);","inputSourceMap":{"version":3,"sources":["/home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/postcss-loader/src/index.js??postcss!/home/nypsus/mon-projet-deploiement/Front-end-indicateur/src/App.css","/home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/postcss-loader/src/index.js??postcss!/home/nypsus/mon-projet-deploiement/Front-end-indicateur/src/index.css","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/bn.js/lib buffer","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/node-libs-browser/node_modules/readable-stream/lib util","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/node-libs-browser/node_modules/readable-stream/lib/internal/streams util","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/object-inspect ./util.inspect","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/elliptic/node_modules/bn.js/lib buffer","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/brorand crypto","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/readable-stream/lib util","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/readable-stream/lib/internal/streams util","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/@ethersproject/signing-key/node_modules/bn.js/lib buffer","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/@ethersproject/bignumber/node_modules/bn.js/lib buffer","/home/nypsus/mon-projet-deploiement/Front-end-indicateur/src/App.js","/home/nypsus/mon-projet-deploiement/Front-end-indicateur/src/index.js"],"names":["usdtAddress","usdtABI","contractAddress","bscTestnetRpcUrl","bscTestnetProvider","ethers","providers","JsonRpcProvider","App","_productInfo$productI","web3Modal","setWeb3Modal","useState","provider","setProvider","walletConnected","setWalletConnected","walletAddress","setWalletAddress","productInfo","setProductInfo","productId","setProductId","productPrice","setProductPrice","bnbToUsdRate","setBnbToUsdRate","selectedCurrency","setSelectedCurrency","convertedPrice","setConvertedPrice","contractInstance","setContractInstance","useEffect","modal","Web3Modal","cacheProvider","providerOptions","walletconnect","package","WalletConnectProvider","options","infuraId","metamask","trustwallet","interval","setInterval","web3ModalElement","document","querySelector","style","zIndex","clearInterval","hideIframe","iframe","display","reconnectToMetaMask","window","ethereum","alert","request","method","params","eth_accounts","setTimeout","accounts","Web3Provider","signer","getSigner","address","getAddress","error","console","connectWallet","log","instance","connect","newProvider","clearCachedProvider","retryError","fetchBnbToUsdRate","response","axios","get","data","binancecoin","usd","loadBlockchainData","contractABI","contract","Contract","productDetails","products","price","loading","setLoading","transactionInProgress","setTransactionInProgress","fetchProductDetails","getBnbToUsdRate","sendTransaction","amountIn","fetchedPriceInUsd","amountInEther","utils","parseUnits","toString","gasLimit","BigNumber","require","gasPrice","getGasPrice","adjustedGasPrice","mul","from","div","walletBalance","getBalance","lt","add","usdtContract","usdtBalance","balanceOf","allowance","tx","to","value","defaultAbiCoder","encode","transactionResponse","tokenAmount","transferFrom","hash","receipt","wait","status","location","href","message","checkNetwork","network","resetProvider","Error","changeNetworkHandler","on","removeListener","handlePayment","isCorrectNetwork","exists","parseFloat","toFixed","updateProductInfo","selectedProductId","then","rate","convertedAmount","handleCurrencyChange","event","newCurrency","target","product1","title","product2","product3","_jsxs","className","children","_jsx","id","autoPlay","loop","muted","src","type","onClick","disabled","_Fragment","onChange","e","root","ReactDOM","createRoot","getElementById","render","React","StrictMode"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","import React, { useEffect, useState, useRef } from 'react';\nimport Web3Modal from 'web3modal';\nimport { ethers } from 'ethers';\nimport axios from 'axios';\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\nimport process from 'process';\nimport './App.css'; // Importation du fichier CSS\nimport './index.css'; // Ajoute cette ligne dans ton fichier JavaScript\n\n\n// Adresse du contrat USDT sur BSC (assure-toi que c'est l'adresse correcte pour le réseau que tu utilises)\nconst usdtAddress = '0x55d398326f99059fF775485246999027B3197955'; // Adresse du contrat USDT sur Binance Smart Chain\n\n// ABI pour le contrat USDT\nconst usdtABI = [\n  // Seules les parties nécessaires pour ton utilisation, par exemple :\n  {\n    \"constant\": true,\n    \"inputs\": [\n      {\n        \"name\": \"_owner\",\n        \"type\": \"address\"\n      }\n    ],\n    \"name\": \"balanceOf\",\n    \"outputs\": [\n      {\n        \"name\": \"balance\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"payable\": false,\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"constant\": false,\n    \"inputs\": [\n      {\n        \"name\": \"_to\",\n        \"type\": \"address\"\n      },\n      {\n        \"name\": \"_value\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"transferFrom\",\n    \"outputs\": [\n      {\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"payable\": false,\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  }\n];\n\n\n\nconst contractAddress = '0xCd25eee89Bb01603f0E0cf8D8C243966a926761d';\nconst bscTestnetRpcUrl = \"https://bsc-dataseed.binance.org/\"; // BSC Mainnet\nconst bscTestnetProvider = new ethers.providers.JsonRpcProvider(bscTestnetRpcUrl);\n\n\n\n\nfunction App() {\n  const [web3Modal, setWeb3Modal] = useState(null);\n  const [provider, setProvider] = useState(null);\n  const [walletConnected, setWalletConnected] = useState(false);\n  const [walletAddress, setWalletAddress] = useState('');\n\n  const [productInfo, setProductInfo] = useState(null);\n  const [productId, setProductId] = useState('');\n  const [productPrice, setProductPrice] = useState(null);\n  const [bnbToUsdRate, setBnbToUsdRate] = useState(null);\n  const [selectedCurrency, setSelectedCurrency] = useState('USD');\n  const [convertedPrice, setConvertedPrice] = useState(null);\n  const [contractInstance, setContractInstance] = useState(null); // Déclarez `contractInstance` ici\n\n\n\n\n\n\n\n  \n  // Initialisation de Web3Modal pour la connexion aux portefeuilles\n  useEffect(() => {\n  const modal = new Web3Modal({\n    cacheProvider: true, // Gardera en cache la dernière connexion\n    providerOptions: {\n      walletconnect: {\n        package: WalletConnectProvider, // Utilisation de WalletConnectProvider\n        options: {\n          infuraId: \"e759bc5af90042a1b66c5a01aae905af\" // Remplace avec ton propre infura ID\n        }\n      },\n      metamask: {\n        package: null, // MetaMask ne nécessite pas de package\n        \n      },\n      trustwallet: {\n        package: WalletConnectProvider, // Utilisation de WalletConnectProvider pour Trust Wallet\n        options: {\n          infuraId: \"pDtEhrK4AAiPfirK7qsQI25NJlgrtMu1bBcFDqV4J95GTCAR2d/8Lg\" // Remplace avec ton propre infura ID\n        }\n      },\n      \n      // Ajoute d'autres options de portefeuille ici si nécessaire (par exemple : Fortmatic, etc.)\n    }\n  });\n\n  setWeb3Modal(modal);\n\n  // Vérifie si la modale est présente dans le DOM\n  const interval = setInterval(() => {\n    const web3ModalElement = document.querySelector('.web3-modal-container');\n    if (web3ModalElement) {\n      web3ModalElement.style.zIndex = '999999'; // Modale au-dessus de tout\n      clearInterval(interval);\n    }\n  }, 100);\n\n  return () => clearInterval(interval);\n\n}, []);\n\n  \n\n\n  // Masquer l'iframe si elle est présente\n  const hideIframe = () => {\n    const iframe = document.querySelector('iframe');\n    if (iframe) {\n      iframe.style.display = 'none'; // ou iframe.remove() si tu préfères\n    }\n  };\n\n  // Appel de la fonction pour masquer l'iframe au moment où Web3Modal est chargé\n  hideIframe();\n  \n\n  // Fonction pour reconnecter MetaMask\n  const reconnectToMetaMask = async () => {\n    if (typeof window.ethereum === \"undefined\") {\n      alert(\"MetaMask n'est pas installé !\");\n      return;\n    }\n\n    try {\n      \n      await window.ethereum.request({\n        method: 'wallet_requestPermissions',\n        params: [{\n          eth_accounts: {}\n        }]\n      });\n\n      setTimeout(async () => {\n        const accounts = await window.ethereum.request({\n          method: 'eth_requestAccounts',\n        });\n\n        const provider = new ethers.providers.Web3Provider(window.ethereum);\n        const signer = provider.getSigner();\n        const address = await signer.getAddress();\n\n        setWalletAddress(address);\n        setWalletConnected(true);\n        alert(`Compte connecté : ${address}`);\n      }, 1000);\n    } catch (error) {\n      console.error('Erreur de connexion à MetaMask :', error);\n      alert('Échec de la connexion à MetaMask.');\n    }\n  };\n\n\n  // Connexion au wallet via Web3Modal\n  const connectWallet = async () => {\n    if (!web3Modal) {\n      console.error(\"Web3Modal non initialisé\");\n      return;\n    }\n    \n    try {\n      console.log(\"Tentative de connexion au wallet...\");\n      \n      \n      // Connexion via Web3Modal\n      const instance = await web3Modal.connect();\n      const newProvider = new ethers.providers.Web3Provider(instance);\n      \n      // S'assurer que le provider est correctement défini\n      if (!newProvider) {\n        console.error(\"Le fournisseur Web3 n'a pas été correctement créé\");\n        return;\n      }\n      \n      setProvider(newProvider);\n  \n      // Récupérer l'adresse du wallet\n      const signer = newProvider.getSigner();\n      const address = await signer.getAddress();\n      \n      setWalletAddress(address);\n      setWalletConnected(true);\n      \n      console.log(`Wallet connecté: ${address}`);\n    } catch (error) {\n      console.error(\"Erreur lors de la connexion au portefeuille:\", error);\n      alert(\"Erreur de connexion au portefeuille. Veuillez connecter votre wallet.\");\n      // Ferme Web3Modal\n      web3Modal.clearCachedProvider();\n\n      // Relance le processus de reconnexion via MetaMask\n      try {\n        if (typeof window.ethereum !== \"undefined\") {\n          await reconnectToMetaMask();\n        } else {\n          alert(\"MetaMask n'est pas installé.\");\n        }\n      } catch (retryError) {\n        console.error(\"Échec de la reconnexion à MetaMask\", retryError);\n        alert(\"La reconnexion à MetaMask a échoué.\");\n      }\n    }\n  };\n  \n\n  // Récupération du taux de conversion BNB vers USD\n  const fetchBnbToUsdRate = async () => {\n    try {\n      const response = await axios.get('https://api.coingecko.com/api/v3/simple/price?ids=binancecoin&vs_currencies=usd');\n      setBnbToUsdRate(response.data.binancecoin.usd);\n    } catch (error) {\n      console.error('Erreur lors de la récupération du taux BNB -> USD', error);\n    }\n  };\n\n   // Charger les données du contrat et les informations du produit\n   useEffect(() => {\n    const loadBlockchainData = async () => {\n      if (provider) {\n        const contractAddress = '0xD62B5CFdDfd26F6219E4BF366d9DB6B1450D5905';\n        const contractABI = \n[\n\t{\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"address\",\n\t\t\t\t\"name\": \"token\",\n\t\t\t\t\"type\": \"address\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"addAllowedToken\",\n\t\t\"outputs\": [],\n\t\t\"stateMutability\": \"nonpayable\",\n\t\t\"type\": \"function\"\n\t},\n\t{\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"address\",\n\t\t\t\t\"name\": \"token\",\n\t\t\t\t\"type\": \"address\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\"name\": \"amount\",\n\t\t\t\t\"type\": \"uint256\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"internalType\": \"string\",\n\t\t\t\t\"name\": \"productId\",\n\t\t\t\t\"type\": \"string\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"pay\",\n\t\t\"outputs\": [],\n\t\t\"stateMutability\": \"payable\",\n\t\t\"type\": \"function\"\n\t},\n\t{\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"address\",\n\t\t\t\t\"name\": \"token\",\n\t\t\t\t\"type\": \"address\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"removeAllowedToken\",\n\t\t\"outputs\": [],\n\t\t\"stateMutability\": \"nonpayable\",\n\t\t\"type\": \"function\"\n\t},\n\t{\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"address[]\",\n\t\t\t\t\"name\": \"tokens\",\n\t\t\t\t\"type\": \"address[]\"\n\t\t\t}\n\t\t],\n\t\t\"stateMutability\": \"nonpayable\",\n\t\t\"type\": \"constructor\"\n\t},\n\t{\n\t\t\"anonymous\": false,\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"indexed\": true,\n\t\t\t\t\"internalType\": \"address\",\n\t\t\t\t\"name\": \"user\",\n\t\t\t\t\"type\": \"address\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"indexed\": false,\n\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\"name\": \"amount\",\n\t\t\t\t\"type\": \"uint256\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"indexed\": false,\n\t\t\t\t\"internalType\": \"address\",\n\t\t\t\t\"name\": \"token\",\n\t\t\t\t\"type\": \"address\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"indexed\": false,\n\t\t\t\t\"internalType\": \"string\",\n\t\t\t\t\"name\": \"productId\",\n\t\t\t\t\"type\": \"string\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"PaymentReceived\",\n\t\t\"type\": \"event\"\n\t},\n\t{\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"string\",\n\t\t\t\t\"name\": \"productId\",\n\t\t\t\t\"type\": \"string\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"removeProduct\",\n\t\t\"outputs\": [],\n\t\t\"stateMutability\": \"nonpayable\",\n\t\t\"type\": \"function\"\n\t},\n\t{\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"string\",\n\t\t\t\t\"name\": \"productId\",\n\t\t\t\t\"type\": \"string\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\"name\": \"price\",\n\t\t\t\t\"type\": \"uint256\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"setProductPrice\",\n\t\t\"outputs\": [],\n\t\t\"stateMutability\": \"nonpayable\",\n\t\t\"type\": \"function\"\n\t},\n\t{\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\"name\": \"amount\",\n\t\t\t\t\"type\": \"uint256\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"withdraw\",\n\t\t\"outputs\": [],\n\t\t\"stateMutability\": \"nonpayable\",\n\t\t\"type\": \"function\"\n\t},\n\t{\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"address\",\n\t\t\t\t\"name\": \"token\",\n\t\t\t\t\"type\": \"address\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\"name\": \"amount\",\n\t\t\t\t\"type\": \"uint256\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"withdrawToken\",\n\t\t\"outputs\": [],\n\t\t\"stateMutability\": \"nonpayable\",\n\t\t\"type\": \"function\"\n\t},\n\t{\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"address\",\n\t\t\t\t\"name\": \"\",\n\t\t\t\t\"type\": \"address\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"allowedTokens\",\n\t\t\"outputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"bool\",\n\t\t\t\t\"name\": \"\",\n\t\t\t\t\"type\": \"bool\"\n\t\t\t}\n\t\t],\n\t\t\"stateMutability\": \"view\",\n\t\t\"type\": \"function\"\n\t},\n\t{\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"address\",\n\t\t\t\t\"name\": \"token\",\n\t\t\t\t\"type\": \"address\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"isTokenAllowed\",\n\t\t\"outputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"bool\",\n\t\t\t\t\"name\": \"\",\n\t\t\t\t\"type\": \"bool\"\n\t\t\t}\n\t\t],\n\t\t\"stateMutability\": \"view\",\n\t\t\"type\": \"function\"\n\t},\n\t{\n\t\t\"inputs\": [],\n\t\t\"name\": \"owner\",\n\t\t\"outputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"address\",\n\t\t\t\t\"name\": \"\",\n\t\t\t\t\"type\": \"address\"\n\t\t\t}\n\t\t],\n\t\t\"stateMutability\": \"view\",\n\t\t\"type\": \"function\"\n\t},\n\t{\n\t\t\"inputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"string\",\n\t\t\t\t\"name\": \"\",\n\t\t\t\t\"type\": \"string\"\n\t\t\t}\n\t\t],\n\t\t\"name\": \"products\",\n\t\t\"outputs\": [\n\t\t\t{\n\t\t\t\t\"internalType\": \"uint256\",\n\t\t\t\t\"name\": \"price\",\n\t\t\t\t\"type\": \"uint256\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"internalType\": \"bool\",\n\t\t\t\t\"name\": \"exists\",\n\t\t\t\t\"type\": \"bool\"\n\t\t\t}\n\t\t],\n\t\t\"stateMutability\": \"view\",\n\t\t\"type\": \"function\"\n\n    \n\t}\n];\n\n\n\n\n        // Crée une nouvelle instance du contrat\n        const contract = new ethers.Contract(contractAddress, contractABI, provider.getSigner());\n\n        // Stocke cette instance dans l'état\n        setContractInstance(contract);\n        \n        try {\n          // Vérifie que contractInstance est bien défini avant de l'utiliser\n          if (contract) {\n            const productDetails = await contract.products(\"product1\");\n            setProductInfo(productDetails);\n            setProductPrice(productDetails.price);\n          }\n        } catch (error) {\n          console.error(\"Erreur lors de la récupération des informations du produit:\", error);\n        }\n      }\n    };\n  \n    loadBlockchainData();\n    fetchBnbToUsdRate();\n  }, [provider]);  // Ajoute `provider` comme dépendance, car `contractInstance` est déjà mis à jour à l'intérieur\n  \n\n\n\n  const [loading, setLoading] = useState(false); // Ajout de l'état loading\n  const [transactionInProgress, setTransactionInProgress] = useState(false);\n\n  \n  useEffect(() => {\n    const fetchProductDetails = async () => {\n      if (productId && productInfo) {\n        setLoading(true); // Afficher \"Chargement...\"\n    \n        try {\n          // Récupérer les détails du produit depuis `productInfo`\n          const productDetails = productInfo[productId];\n    \n          if (productDetails && productDetails.price > 0) {\n            setProductPrice(productDetails.price); // Mettre à jour le prix\n            setConvertedPrice(productDetails.price); // Mettre à jour la version convertie du prix (même valeur si en USD)\n          } else {\n            alert(\"Produit invalide ou prix incorrect.\");\n          }\n        } catch (error) {\n          console.error(\"Erreur lors de la récupération des informations produit :\", error);\n          alert(\"Une erreur s'est produite lors de la récupération des informations produit.\");\n        } finally {\n          setLoading(false); // Mettre fin à l'affichage de \"Chargement...\"\n        }\n      }\n    };\n  \n    fetchProductDetails();\n  }, [productId, productInfo]);  // Ajout de `productInfo` comme dépendance\n  \n\n\n\n// Fonction conversion BNB/USDT\n  const getBnbToUsdRate = async () => {\n    try {\n      const response = await axios.get('https://api.coingecko.com/api/v3/simple/price?ids=binancecoin&vs_currencies=usd');\n      const bnbToUsdRate = response.data.binancecoin.usd;\n      return bnbToUsdRate;\n    } catch (error) {\n      console.error(\"Erreur lors de la récupération du taux de conversion BNB/USD :\", error);\n      return 0;\n    }\n  };\n  \n  \n  \n  \n  const sendTransaction = async (amountIn, fetchedPriceInUsd) => {\n    if (!provider) {\n      alert(\"Le provider n'est pas défini, veuillez connecter votre wallet.\");\n      return;\n    }\n  \n    try {\n      // Utilise le provider et signer déjà définis via Web3Modal\n      const signer = provider.getSigner();\n      const amountInEther = ethers.utils.parseUnits(amountIn.toString(), 18);\n  \n      // Obtenez le prix du gaz actuel\n      const gasLimit = 50000;  // Limite de gaz pour la transaction\n      const { BigNumber } = require(\"ethers\");  // Assure-toi que BigNumber est importé correctement si nécessaire\n  \n      const gasPrice = await provider.getGasPrice();  // Utilise le prix actuel du gaz\n      const adjustedGasPrice = gasPrice.mul(BigNumber.from(\"110\")).div(BigNumber.from(\"100\")); // à ajuster si bug\n  \n      console.log(\"GasPrice ajusté : \", adjustedGasPrice.toString());  // Affiche le prix ajusté\n  \n      // Vérifiez que vous avez assez de fonds\n      const walletBalance = await provider.getBalance(signer.getAddress());\n      if (selectedCurrency === 'BNB' && walletBalance.lt(amountInEther.add(adjustedGasPrice))) {\n        alert(\"Solde insuffisant pour couvrir la transaction et les frais de gaz en BNB.\");\n        return;\n      }\n  \n      if (selectedCurrency === 'USDT') {\n        // Vérification du solde en USDT\n        const usdtContract = new ethers.Contract(usdtAddress, usdtABI, signer);\n        const usdtBalance = await usdtContract.balanceOf(signer.getAddress());\n        if (usdtBalance.lt(amountInEther)) {\n          alert(\"Solde insuffisant en USDT pour couvrir la transaction.\");\n          return;\n        }\n  \n        // Vérifier l'allowance avant d'effectuer le transfert\n        const allowance = await usdtContract.allowance(signer.getAddress(), contractAddress);\n        if (allowance.lt(amountInEther)) {\n          alert(\"Veuillez approuver le contrat USDT avant d'envoyer la transaction.\");\n          return;\n        }\n      }\n  \n      // Préparez la transaction\n      const tx = {\n        to: contractAddress,\n        value: selectedCurrency === 'BNB' ? amountInEther : 0,  // Montant en BNB\n        gasLimit: gasLimit,\n        gasPrice: adjustedGasPrice,\n        data: ethers.utils.defaultAbiCoder.encode([\"uint256\"], [fetchedPriceInUsd]),  // Envoie l'USD comme paramètre\n      };\n  \n      // Si la devise est USDT, envoyer les tokens via le contrat\n      let transactionResponse;\n      if (selectedCurrency === 'USDT') {\n        const usdtContract = new ethers.Contract(usdtAddress, usdtABI, signer);\n        const tokenAmount = ethers.utils.parseUnits(amountIn.toString(), 6); // USDT a 6 décimales\n        transactionResponse = await usdtContract.transferFrom(signer.getAddress(), contractAddress, tokenAmount);\n        console.log(\"USDT envoyés au contrat.\");\n      } else {\n        // Si la devise est BNB, envoyer la transaction en BNB\n        transactionResponse = await signer.sendTransaction(tx);\n        console.log(\"Transaction envoyée:\", transactionResponse.hash);\n      }\n  \n      // Attendez la confirmation de la transaction\n      const receipt = await transactionResponse.wait();\n      if (receipt.status === 1) {\n        console.log(\"Transaction réussie !\");\n        alert(\"Paiement effectué avec succès.\");\n        // Rediriger vers une nouvelle page après la transaction réussie\n        window.location.href = '/Delivrance_IndicateurD.html';  // Remplace '/confirmation.html' par le chemin de la page HTML\n  \n      } else {\n        alert(\"Échec de la transaction.\");\n      }\n  \n    } catch (error) {\n      console.error(\"Erreur lors de l'envoi de la transaction:\", error.message);\n      alert(\"Une erreur s'est produite lors de l'envoi de la transaction.\");\n    } finally {\n      // Si tu as des actions à effectuer après la transaction, comme réinitialiser un état ou déverrouiller des boutons, tu peux les ajouter ici\n      console.log(\"Transaction terminée.\");\n    }\n  };\n  \n  \n  \n\n\n  const checkNetwork = async () => {\n    if (typeof window.ethereum !== \"undefined\") {\n      const network = await window.ethereum.request({\n        method: 'eth_chainId'\n      });\n  \n      // Vérifie si l'utilisateur est bien sur BSC Testnet (chainId 97)\n      if (network !== '0x38') { // 0x38 est le chainId pour BSC Mainnet\n        alert(\"Veuillez vous connecter au réseau Binance Smart Chain Mainnet.\");\n        return false;\n      }\n      \n      return true;\n    } else {\n      console.error(\"Ethereum n'est pas disponible.\");\n      alert(\"MetaMask ou un autre portefeuille Ethereum n'est pas installé.\");\n      return false;\n    }\n  };\n\n\n\n\n\n\n  // Fonction pour réinitialiser le provider\n  const resetProvider = async () => {\n    try {\n      if (typeof window.ethereum !== \"undefined\") {\n        const newProvider = new ethers.providers.Web3Provider(window.ethereum);\n        setProvider(newProvider); // Mettre à jour le provider\n\n        // Attendre que React ait bien mis à jour le provider\n        return newProvider.getSigner(); // Retourner le signer après que le provider ait été mis à jour\n      } else {\n        throw new Error(\"Aucun fournisseur Ethereum n'est disponible.\");\n      }\n    } catch (error) {\n      console.error(\"Erreur dans resetProvider:\", error);\n      alert(\"Erreur lors de la réinitialisation du provider.\");\n      return null;\n    }\n  };\n\n  // Vérification du réseau à chaque fois qu'il change\n  useEffect(() => {\n    const changeNetworkHandler = async () => {\n      try {\n        await resetProvider(); // Remet à jour le provider lorsque le réseau change\n        console.log(\"Le provider a été réinitialisé après le changement de réseau.\");\n      } catch (error) {\n        console.error(\"Erreur lors du changement de réseau et réinitialisation du provider:\", error);\n      }\n    };\n\n    if (typeof window.ethereum !== \"undefined\") {\n      window.ethereum.on('chainChanged', changeNetworkHandler);\n    }\n\n    // Nettoyage quand le composant est démonté\n    return () => {\n      if (typeof window.ethereum !== \"undefined\") {\n        window.ethereum.removeListener('chainChanged', changeNetworkHandler);\n      }\n    };\n  }, []);\n  \n\n\n\n  const handlePayment = async () => {\n    if (loading || transactionInProgress) {\n      console.log(\"Transaction déjà en cours, veuillez patienter.\");\n      return; // Empêche l'exécution si une autre transaction est en cours\n    }\n    setLoading(true);  // Empêche d'envoyer une nouvelle transaction si une est déjà en cours\n    \n    if (!walletConnected) {\n      alert(\"Veuillez connecter votre wallet avant de procéder.\");\n      setLoading(false);  // Permet de déverrouiller le bouton si une erreur survient\n      setTransactionInProgress(false);  // Réinitialise l'état de la transaction\n      return;\n    }\n    \n    // Vérifie que le contrat est bien initialisé\n    if (!contractInstance) {\n      console.error(\"Le contrat n'est pas initialisé.\");\n      setLoading(false);\n      setTransactionInProgress(false);\n      return;\n    }\n\n    // Vérifie que le produit est bien sélectionné\n    if (!productId || !productInfo[productId]) {\n      alert(\"Veuillez sélectionner un produit valide et essayer de nouveau.\");\n      setLoading(false);\n      setTransactionInProgress(false);\n      return;\n    }\n\n    // Vérifie que l'utilisateur est sur le bon réseau\n    const isCorrectNetwork = await checkNetwork();\n    if (!isCorrectNetwork) {\n      setLoading(false);\n      setTransactionInProgress(false);\n      return;\n    }\n\n    // Vérifier que le provider est disponible\n    if (!provider) {\n      alert(\"Reconnexion au provider effectuée. Veuillez renouveler l'opération.\");\n      await resetProvider();\n      setLoading(false);\n      setTransactionInProgress(false);\n      return;\n    }\n      \n\n\n\n    // Récupérer les détails du produit\n    const productDetails = productInfo[productId];\n\n    if (!productDetails || !productDetails.exists || productDetails.price <= 0) {\n      alert(\"Produit invalide ou prix incorrect.\");\n      setLoading(false);\n      setTransactionInProgress(false);\n      return;\n    }\n\n   \n\n    // --- Ajout de la fonction pour récupérer le prix du produit ---\n    let amountIn = 0;\n    try {\n      // Utilisation directement de fetchedPriceInUsd\n      amountIn = productDetails.price;\n\n\n      // Vérification de la devise et calcul du montant à envoyer\n      if (selectedCurrency === 'USDT') {\n        amountIn = productDetails.price; // Utilise directement le prix en USD\n      } else if (selectedCurrency === 'BNB') {\n        const bnbToUsdRate = await getBnbToUsdRate();\n        if (bnbToUsdRate <= 0) {\n          alert(\"Erreur de récupération du taux de conversion BNB/USD.\");\n          setLoading(false);\n          setTransactionInProgress(false);\n          return;\n        }\n        amountIn = productDetails.price / bnbToUsdRate; // Conversion de USD en BNB\n      } else {\n        alert(\"Devise non supportée pour ce paiement.\");\n        setLoading(false);\n        setTransactionInProgress(false);\n        return;\n      }\n\n      // Logs de vérification\n      console.log(\"Prix du produit en USDT:\", productDetails.price);\n      console.log(\"Taux de conversion BNB/USD:\", bnbToUsdRate);\n      console.log(\"Montant en BNB à envoyer:\", amountIn);\n\n\n\n      // Vérifier que amountIn est valide et non nul avant d'envoyer la transaction\n      if (parseFloat(amountIn) <= 0) {\n        alert(\"Le montant à payer est invalide (0 ou négatif).\");\n        setLoading(false);\n        setTransactionInProgress(false);\n        return;\n      }\n\n      // Convertir le montant à un format acceptable (fixé à 18 décimales)\n      amountIn = parseFloat(amountIn).toFixed(18);\n      console.log('Montant final pour la transaction:', amountIn);\n\n      // Envoyer la transaction\n      \n      await sendTransaction(amountIn, productDetails.price);\n\n      console.log(\"Transaction envoyée.\");\n\n    } catch (error) {\n      console.error(\"Erreur lors de l'envoi de la transaction:\", error.message);\n      alert(\"Une erreur s'est produite lors de l'envoi de la transaction. Vérifiez votre solde et les paramètres.\");\n    } finally {\n      setLoading(false);  // Permet de déverrouiller le bouton après l'exécution\n      setTransactionInProgress(false);  // Réinitialise l'état de la transaction\n    }\n  };\n  \n\n  \n  \n  // Mise à jour des informations du produit sélectionné\n  const updateProductInfo = (selectedProductId) => {\n    setProductId(selectedProductId);\n    const productDetails = productInfo[selectedProductId];\n  \n    if (productDetails && productDetails.exists && productDetails.price > 0) {\n      setProductPrice(productDetails.price);\n      \n      // Mise à jour du prix converti\n      if (selectedCurrency === 'USDT') {\n        setConvertedPrice(productDetails.price.toString());\n      } else if (selectedCurrency === 'BNB') {\n        getBnbToUsdRate().then(rate => {\n          if (rate > 0) {\n            const convertedAmount = productDetails.price / rate;\n            setConvertedPrice(convertedAmount.toString());\n          }\n        });\n      }\n    } else {\n      alert(\"Produit invalide ou prix incorrect.\");\n    }\n  };\n  \n\n\n\n  // Gestion du changement de devise (USD ou BNB)\n  const handleCurrencyChange = (event) => {\n    const newCurrency = event.target.value;\n    setSelectedCurrency(newCurrency);\n\n    if (newCurrency === 'USDT') {\n      setConvertedPrice(productPrice ? productPrice.toString() : null);\n    } else if (newCurrency === 'BNB') {\n      setConvertedPrice(productPrice ? (productPrice / bnbToUsdRate).toString() : null);\n    }\n  };\n\n  // Liste des produits\n  const products = {\n    product1: { price: 5, exists: true, title: \"Indicateur Daily\" },\n    product2: { price: 295, exists: true, title: \"Indicateur 4h/1h\" },\n    product3: { price: 495, exists: true, title: \"Indicateur 15mn\" }\n  };\n  \n\n  return (\n    <div className=\"App\">\n      {/* Afficher un message de chargement si `loading` est true */}\n      {loading && <div>Chargement des produits...</div>}\n\n      {/* Contenu principal */}\n      <div className=\"parallax-container\">\n        <video id=\"video-background\" autoPlay loop muted>\n          {/* Remplace la source locale par l'URL IPFS */}\n          <source \n            src=\"https://gateway.pinata.cloud/ipfs/QmPZ8v3KzeyH2Dqz29TZFWe4kswkUETJyesZFCFULtagwv\" \n            type=\"video/mp4\" \n          />\n          Votre navigateur ne supporte pas les vidéos HTML5.\n        </video>\n\n        {/* Contenu défilant */}\n        <div className=\"content\">\n          \n\n          {/* Bouton de connexion du wallet en haut à droite */}\n          <div className=\"wallet-connect-button\">\n            <button\n      \n              onClick={connectWallet}\n              disabled={walletConnected} // Désactive le bouton une fois connecté\n            >\n              {walletConnected ? (\n                <>\n                  <span>Wallet connecté : {walletAddress}</span>\n                  <span className=\"arrow-icon\">→</span> {/* Icône flèche */}\n                </>\n              ) : (\n                'Connecter le wallet'\n              )}\n            </button>\n          </div>\n\n          {/* Conteneur du formulaire de paiement */}\n          <div className=\"payment-wrapper\">\n            <h1> Les Indicateurs à Levier </h1>\n\n            {productId && productInfo && (\n              <div>\n                <p>Produit choisi : {productInfo[productId]?.title}</p>\n                <p>Prix du produit : {convertedPrice ? convertedPrice : 'Chargement...'} {selectedCurrency}</p>\n                <p>Le produit est {productInfo.exists ? 'disponible' : 'indisponible'}</p>\n              </div>\n            )}\n\n            <select onChange={(e) => updateProductInfo(e.target.value)} value={productId}>\n              <option value=\"\">Choisi Ton Indicateur</option>\n              <option value=\"product1\">Indicateur Daily</option>\n              <option value=\"product2\">Indicateur 4h/1h</option>\n              <option value=\"product3\">Indicateur 15mn</option>\n            </select>\n\n            <select onChange={handleCurrencyChange} value={selectedCurrency}>\n              <option value=\"USDT\">USD</option>\n              <option value=\"BNB\">BNB</option>\n            </select>\n\n            {/* Bouton de paiement */}\n            <button onClick={handlePayment} disabled={loading || transactionInProgress}>\n              {loading || transactionInProgress ? \"Paiement en cours...\" : \"Acheter\"}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  \n  \n};\n\n\nexport default App;\n\n\n\n\n\n\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';  // Cette ligne doit être valide avec React 18\nimport App from './App';\nimport './index.css'; // Ajoute cette ligne dans ton fichier JavaScript\nimport './App.css'; \n\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n"]}}