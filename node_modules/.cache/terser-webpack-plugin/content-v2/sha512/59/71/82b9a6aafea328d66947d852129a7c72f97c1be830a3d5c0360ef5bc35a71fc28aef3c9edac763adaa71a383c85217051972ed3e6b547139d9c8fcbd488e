{"code":"(this[\"webpackJsonpFront-end-indicateur\"]=this[\"webpackJsonpFront-end-indicateur\"]||[]).push([[0],{186:function(e,t,n){},187:function(e,t,n){},211:function(e,t){},247:function(e,t){},249:function(e,t){},257:function(e,t){},304:function(e,t){},305:function(e,t){},332:function(e,t){},334:function(e,t){},442:function(e,t){},443:function(e,t){},446:function(e,t,n){\"use strict\";n.r(t);var r=n(16),a=n.n(r),i=n(189),o=n.n(i),s=n(190),c=n.n(s),l=n(40),u=n(449),d=n(112),p=n(11),y=n.n(p),m=(n(186),n(187),n(8));new l.a.providers.JsonRpcProvider(\"https://bsc-dataseed.binance.org/\");var b=function(){const[e,t]=Object(r.useState)(null),[n,a]=Object(r.useState)(null),[i,o]=Object(r.useState)(!1),[s,p]=Object(r.useState)(\"\"),[b,h]=Object(r.useState)(null),[f,v]=Object(r.useState)(\"\"),[w,j]=Object(r.useState)(null),[g,x]=Object(r.useState)(null),[O,T]=Object(r.useState)(\"USD\"),[S,M]=Object(r.useState)(null);Object(r.useEffect)((()=>{const e=new c.a({cacheProvider:!0,providerOptions:{walletconnect:{package:d.a,options:{infuraId:\"e759bc5af90042a1b66c5a01aae905af\"}},metamask:{package:null},trustwallet:{package:d.a,options:{infuraId:\"pDtEhrK4AAiPfirK7qsQI25NJlgrtMu1bBcFDqV4J95GTCAR2d/8Lg\"}}}});t(e);const n=setInterval((()=>{const e=document.querySelector(\".web3-modal-container\");e&&(e.style.zIndex=\"999999\",clearInterval(n))}),100);return()=>clearInterval(n)}),[]),(()=>{const e=document.querySelector(\"iframe\");e&&(e.style.display=\"none\")})(),Object(r.useEffect)((()=>{(async()=>{if(n){const t=\"0xD62B5CFdDfd26F6219E4BF366d9DB6B1450D5905\",r=[{inputs:[{internalType:\"address\",name:\"token\",type:\"address\"}],name:\"addAllowedToken\",outputs:[],stateMutability:\"nonpayable\",type:\"function\"},{inputs:[{internalType:\"address\",name:\"token\",type:\"address\"},{internalType:\"uint256\",name:\"amount\",type:\"uint256\"},{internalType:\"string\",name:\"productId\",type:\"string\"}],name:\"pay\",outputs:[],stateMutability:\"payable\",type:\"function\"},{inputs:[{internalType:\"address\",name:\"token\",type:\"address\"}],name:\"removeAllowedToken\",outputs:[],stateMutability:\"nonpayable\",type:\"function\"},{inputs:[{internalType:\"address[]\",name:\"tokens\",type:\"address[]\"}],stateMutability:\"nonpayable\",type:\"constructor\"},{anonymous:!1,inputs:[{indexed:!0,internalType:\"address\",name:\"user\",type:\"address\"},{indexed:!1,internalType:\"uint256\",name:\"amount\",type:\"uint256\"},{indexed:!1,internalType:\"address\",name:\"token\",type:\"address\"},{indexed:!1,internalType:\"string\",name:\"productId\",type:\"string\"}],name:\"PaymentReceived\",type:\"event\"},{inputs:[{internalType:\"string\",name:\"productId\",type:\"string\"}],name:\"removeProduct\",outputs:[],stateMutability:\"nonpayable\",type:\"function\"},{inputs:[{internalType:\"string\",name:\"productId\",type:\"string\"},{internalType:\"uint256\",name:\"price\",type:\"uint256\"}],name:\"setProductPrice\",outputs:[],stateMutability:\"nonpayable\",type:\"function\"},{inputs:[{internalType:\"uint256\",name:\"amount\",type:\"uint256\"}],name:\"withdraw\",outputs:[],stateMutability:\"nonpayable\",type:\"function\"},{inputs:[{internalType:\"address\",name:\"token\",type:\"address\"},{internalType:\"uint256\",name:\"amount\",type:\"uint256\"}],name:\"withdrawToken\",outputs:[],stateMutability:\"nonpayable\",type:\"function\"},{inputs:[{internalType:\"address\",name:\"\",type:\"address\"}],name:\"allowedTokens\",outputs:[{internalType:\"bool\",name:\"\",type:\"bool\"}],stateMutability:\"view\",type:\"function\"},{inputs:[{internalType:\"address\",name:\"token\",type:\"address\"}],name:\"isTokenAllowed\",outputs:[{internalType:\"bool\",name:\"\",type:\"bool\"}],stateMutability:\"view\",type:\"function\"},{inputs:[],name:\"owner\",outputs:[{internalType:\"address\",name:\"\",type:\"address\"}],stateMutability:\"view\",type:\"function\"},{inputs:[{internalType:\"string\",name:\"\",type:\"string\"}],name:\"products\",outputs:[{internalType:\"uint256\",name:\"price\",type:\"uint256\"},{internalType:\"bool\",name:\"exists\",type:\"bool\"}],stateMutability:\"view\",type:\"function\"}],a=new l.a.Contract(t,r,n.getSigner());try{const e=await a.products(\"product1\");h(e),j(e.price)}catch(e){console.error(\"Erreur lors de la r\\xe9cup\\xe9ration des informations du produit:\",e)}}})(),(async()=>{try{const e=await u.a.get(\"https://api.coingecko.com/api/v3/simple/price?ids=binancecoin&vs_currencies=usd\");x(e.data.binancecoin.usd)}catch(e){console.error(\"Erreur lors de la r\\xe9cup\\xe9ration du taux BNB -> USD\",e)}})()}),[n]);const k=async()=>{try{if(\"undefined\"!==typeof window.ethereum){const e=new l.a.providers.Web3Provider(window.ethereum);return a(e),e.getSigner()}throw new Error(\"Aucun fournisseur Ethereum n'est disponible.\")}catch(e){return console.error(\"Erreur dans resetProvider:\",e),alert(\"Erreur lors de la r\\xe9initialisation du provider.\"),null}};Object(r.useEffect)((()=>{const e=async()=>{try{await k(),console.log(\"Le provider a \\xe9t\\xe9 r\\xe9initialis\\xe9 apr\\xe8s le changement de r\\xe9seau.\")}catch(e){console.error(\"Erreur lors du changement de r\\xe9seau et r\\xe9initialisation du provider:\",e)}};return\"undefined\"!==typeof window.ethereum&&window.ethereum.on(\"chainChanged\",e),()=>{\"undefined\"!==typeof window.ethereum&&window.ethereum.removeListener(\"chainChanged\",e)}}),[]);const B={product1:{price:5,exists:!0},product2:{price:299,exists:!0},product3:{price:499,exists:!0}};return Object(m.jsx)(\"div\",{className:\"App\",children:Object(m.jsxs)(\"div\",{className:\"parallax-container\",children:[Object(m.jsxs)(\"video\",{id:\"video-background\",autoPlay:!0,loop:!0,muted:!0,children:[Object(m.jsx)(\"source\",{src:y.a.env.PUBLIC_URL+\"/video/egyptfutur2.mp4\",type:\"video/mp4\"}),\"Votre navigateur ne supporte pas les vid\\xe9os HTML5.\"]}),Object(m.jsxs)(\"div\",{className:\"content\",children:[Object(m.jsx)(\"div\",{className:\"wallet-connect-button\",children:Object(m.jsx)(\"button\",{onClick:async()=>{if(e)try{console.log(\"Tentative de connexion au wallet...\");const t=await e.connect(),n=new l.a.providers.Web3Provider(t);if(!n)return void console.error(\"Le fournisseur Web3 n'a pas \\xe9t\\xe9 correctement cr\\xe9\\xe9\");a(n);const r=n.getSigner(),i=await r.getAddress();p(i),o(!0),console.log(`Wallet connect\\xe9: ${i}`)}catch(t){console.error(\"Erreur lors de la connexion au portefeuille:\",t),alert(\"Erreur de connexion au portefeuille. Veuillez connecter votre wallet.\"),e.clearCachedProvider();try{\"undefined\"!==typeof window.ethereum?await(async()=>{if(\"undefined\"!==typeof window.ethereum)try{await window.ethereum.request({method:\"wallet_requestPermissions\",params:[{eth_accounts:{}}]}),setTimeout((async()=>{await window.ethereum.request({method:\"eth_requestAccounts\"});const e=new l.a.providers.Web3Provider(window.ethereum).getSigner(),t=await e.getAddress();p(t),o(!0),alert(`Compte connect\\xe9 : ${t}`)}),1e3)}catch(t){console.error(\"Erreur de connexion \\xe0 MetaMask :\",t),alert(\"\\xc9chec de la connexion \\xe0 MetaMask.\")}else alert(\"MetaMask n'est pas install\\xe9 !\")})():alert(\"MetaMask n'est pas install\\xe9.\")}catch(n){console.error(\"\\xc9chec de la reconnexion \\xe0 MetaMask\",n),alert(\"La reconnexion \\xe0 MetaMask a \\xe9chou\\xe9.\")}}else console.error(\"Web3Modal non initialis\\xe9\")},disabled:i,children:i?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(\"span\",{children:[\"Wallet connect\\xe9 : \",s]}),Object(m.jsx)(\"span\",{className:\"arrow-icon\",children:\"\\u2192\"}),\" \"]}):\"Connecter le wallet\"})}),Object(m.jsxs)(\"div\",{className:\"payment-wrapper\",children:[Object(m.jsx)(\"h1\",{children:\" Les Indicateurs \\xe0 Levier \"}),f&&b&&Object(m.jsxs)(\"div\",{children:[Object(m.jsxs)(\"p\",{children:[\"Produit choisi : \",f]}),Object(m.jsxs)(\"p\",{children:[\"Prix du produit : \",S||\"Chargement...\",\" \",O]}),Object(m.jsxs)(\"p\",{children:[\"Le produit est \",b.exists?\"disponible\":\"indisponible\"]})]}),Object(m.jsxs)(\"select\",{onChange:e=>(e=>{v(e);const t=B[e];if(t){const{price:e,exists:n}=t;j(e),h({price:e,exists:n}),\"USD\"===O?M(e?e.toString():null):\"BNB\"===O&&M(e?(e/g).toString():null)}else console.error(\"Produit non trouv\\xe9 !\")})(e.target.value),value:f,children:[Object(m.jsx)(\"option\",{value:\"\",children:\"Choisi Ton Indicateur\"}),Object(m.jsx)(\"option\",{value:\"product1\",children:\"Indicateur Daily\"}),Object(m.jsx)(\"option\",{value:\"product2\",children:\"Indicateur 4h/1h\"}),Object(m.jsx)(\"option\",{value:\"product3\",children:\"Indicateur 15mn\"})]}),Object(m.jsxs)(\"select\",{onChange:e=>{const t=e.target.value;T(t),\"USD\"===t?M(w?w.toString():null):\"BNB\"===t&&M(w?(w/g).toString():null)},value:O,children:[Object(m.jsx)(\"option\",{value:\"USD\",children:\"USD\"}),Object(m.jsx)(\"option\",{value:\"BNB\",children:\"BNB\"})]}),Object(m.jsx)(\"button\",{onClick:async()=>{if(!i)return void alert(\"Veuillez connecter votre wallet avant de proc\\xe9der.\");if(await(async()=>{if(\"undefined\"!==typeof window.ethereum)return\"0x38\"===await window.ethereum.request({method:\"eth_chainId\"})||(alert(\"Veuillez vous connecter au r\\xe9seau Binance Smart Chain Mainnet.\"),!1);return console.error(\"Ethereum n'est pas disponible.\"),alert(\"MetaMask ou un autre portefeuille Ethereum n'est pas install\\xe9.\"),!1})())if(n)if(await k(),f&&w){let t=0;try{if(\"USD\"===O)t=w;else if(\"BNB\"===O){if(!g)return void alert(\"Le taux de conversion BNB vers USD est encore en cours de chargement.\");t=w/g}t=parseFloat(t).toFixed(18),console.log(\"Montant final pour la transaction:\",t),await(async e=>{if(n)try{const t=n.getSigner(),r=l.a.utils.parseUnits(e.toString(),18),a=(await n.getGasPrice()).mul(2);if((await n.getBalance(t.getAddress())).lt(r.add(a)))return void alert(\"Solde insuffisant pour couvrir la transaction et les frais de gaz.\");const i={to:\"0xCd25eee89Bb01603f0E0cf8D8C243966a926761d\",value:r,gasLimit:1e5,gasPrice:a},o=await t.sendTransaction(i);console.log(\"Transaction envoy\\xe9e, hash:\",o.hash);const s=await o.wait();console.log(\"Transaction confirm\\xe9e dans le bloc:\",s.blockNumber),window.location.href=\"/Delivrance_IndicateurD.html\"}catch(t){console.error(\"Erreur lors de l'envoi de la transaction:\",t),alert(\"Une erreur s'est produite lors de l'envoi de la transaction.\")}else alert(\"Le provider n'est pas d\\xe9fini, veuillez connecter votre wallet.\")})(t)}catch(e){console.error(\"Erreur lors de l'envoi de la transaction:\",e.message),alert(\"Une erreur s'est produite lors de l'envoi de la transaction. V\\xe9rifiez votre solde et les param\\xe8tres.\")}}else alert(\"Veuillez s\\xe9lectionner un produit valide et essayer de nouveau.\");else alert(\" Reconnection au provider effectu\\xe9. Veuillez renouveler l'op\\xe9ration \")},children:\"Acheter\"})]})]})]})})};o.a.createRoot(document.getElementById(\"root\")).render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(b,{})}))}},[[446,1,2]]]);","name":"static/js/main.b7f74d93.chunk.js","map":{"version":3,"names":["this","push","module","exports","__webpack_require__","__webpack_exports__","r","react","react_default","n","client","client_default","dist","dist_default","lib_esm","axios","esm","browser","browser_default","jsx_runtime","providers","JsonRpcProvider","src_App","web3Modal","setWeb3Modal","Object","provider","setProvider","walletConnected","setWalletConnected","walletAddress","setWalletAddress","productInfo","setProductInfo","productId","setProductId","productPrice","setProductPrice","bnbToUsdRate","setBnbToUsdRate","selectedCurrency","setSelectedCurrency","convertedPrice","setConvertedPrice","modal","a","cacheProvider","providerOptions","walletconnect","package","options","infuraId","metamask","trustwallet","interval","setInterval","web3ModalElement","document","querySelector","style","zIndex","clearInterval","iframe","display","hideIframe","async","contractAddress","contractABI","inputs","internalType","name","type","outputs","stateMutability","anonymous","indexed","contractInstance","Contract","getSigner","productDetails","products","price","error","console","loadBlockchainData","response","get","data","binancecoin","usd","fetchBnbToUsdRate","resetProvider","window","ethereum","newProvider","Web3Provider","Error","alert","changeNetworkHandler","log","on","removeListener","product1","exists","product2","product3","className","children","id","autoPlay","loop","muted","src","env","PUBLIC_URL","onClick","instance","connect","signer","address","getAddress","clearCachedProvider","request","method","params","eth_accounts","setTimeout","reconnectToMetaMask","retryError","disabled","onChange","e","selectedProductId","toString","updateProductInfo","target","value","event","newCurrency","checkNetwork","amountIn","parseFloat","toFixed","amountInEther","utils","parseUnits","adjustedGasPrice","getGasPrice","mul","getBalance","lt","add","tx","to","gasLimit","gasPrice","transactionResponse","sendTransaction","hash","receipt","wait","blockNumber","location","href","message","createRoot","getElementById","render","StrictMode"],"sources":["static/js/main.b7f74d93.chunk.js"],"mappings":"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","ignoreList":[]},"input":"(this[\"webpackJsonpFront-end-indicateur\"] = this[\"webpackJsonpFront-end-indicateur\"] || []).push([[0],{\n\n/***/ 186:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 187:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 211:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 247:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 249:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 257:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 304:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 305:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 332:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 334:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 442:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 443:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 446:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(16);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/client.js\nvar client = __webpack_require__(189);\nvar client_default = /*#__PURE__*/__webpack_require__.n(client);\n\n// EXTERNAL MODULE: ./node_modules/web3modal/dist/index.js\nvar dist = __webpack_require__(190);\nvar dist_default = /*#__PURE__*/__webpack_require__.n(dist);\n\n// EXTERNAL MODULE: ./node_modules/ethers/lib.esm/index.js + 106 modules\nvar lib_esm = __webpack_require__(40);\n\n// EXTERNAL MODULE: ../node_modules/axios/lib/axios.js + 43 modules\nvar axios = __webpack_require__(449);\n\n// EXTERNAL MODULE: ./node_modules/@walletconnect/web3-provider/dist/esm/index.js + 8 modules\nvar esm = __webpack_require__(112);\n\n// EXTERNAL MODULE: ./node_modules/process/browser.js\nvar browser = __webpack_require__(11);\nvar browser_default = /*#__PURE__*/__webpack_require__.n(browser);\n\n// EXTERNAL MODULE: ./src/App.css\nvar App = __webpack_require__(186);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(187);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(8);\n\n// CONCATENATED MODULE: ./src/App.js\n// Importation du fichier CSS\n// Ajoute cette ligne dans ton fichier JavaScript\nconst App_contractAddress='0xCd25eee89Bb01603f0E0cf8D8C243966a926761d';const bscTestnetRpcUrl=\"https://bsc-dataseed.binance.org/\";// BSC Mainnet\nconst bscTestnetProvider=new lib_esm[\"a\" /* ethers */].providers.JsonRpcProvider(bscTestnetRpcUrl);function App_App(){const[web3Modal,setWeb3Modal]=Object(react[\"useState\"])(null);const[provider,setProvider]=Object(react[\"useState\"])(null);const[walletConnected,setWalletConnected]=Object(react[\"useState\"])(false);const[walletAddress,setWalletAddress]=Object(react[\"useState\"])('');const[productInfo,setProductInfo]=Object(react[\"useState\"])(null);const[productId,setProductId]=Object(react[\"useState\"])('');const[productPrice,setProductPrice]=Object(react[\"useState\"])(null);const[bnbToUsdRate,setBnbToUsdRate]=Object(react[\"useState\"])(null);const[selectedCurrency,setSelectedCurrency]=Object(react[\"useState\"])('USD');const[convertedPrice,setConvertedPrice]=Object(react[\"useState\"])(null);// Initialisation de Web3Modal pour la connexion aux portefeuilles\nObject(react[\"useEffect\"])(()=>{const modal=new dist_default.a({cacheProvider:true,// Gardera en cache la dernière connexion\nproviderOptions:{walletconnect:{package:esm[\"a\" /* default */],// Utilisation de WalletConnectProvider\noptions:{infuraId:\"e759bc5af90042a1b66c5a01aae905af\"// Remplace avec ton propre infura ID\n}},metamask:{package:null// MetaMask ne nécessite pas de package\n},trustwallet:{package:esm[\"a\" /* default */],// Utilisation de WalletConnectProvider pour Trust Wallet\noptions:{infuraId:\"pDtEhrK4AAiPfirK7qsQI25NJlgrtMu1bBcFDqV4J95GTCAR2d/8Lg\"// Remplace avec ton propre infura ID\n}}// Ajoute d'autres options de portefeuille ici si nécessaire (par exemple : Fortmatic, etc.)\n}});setWeb3Modal(modal);// Vérifie si la modale est présente dans le DOM\nconst interval=setInterval(()=>{const web3ModalElement=document.querySelector('.web3-modal-container');if(web3ModalElement){web3ModalElement.style.zIndex='999999';// Modale au-dessus de tout\nclearInterval(interval);}},100);return()=>clearInterval(interval);},[]);// Masquer l'iframe si elle est présente\nconst hideIframe=()=>{const iframe=document.querySelector('iframe');if(iframe){iframe.style.display='none';// ou iframe.remove() si tu préfères\n}};// Appel de la fonction pour masquer l'iframe au moment où Web3Modal est chargé\nhideIframe();// Fonction pour reconnecter MetaMask\nconst reconnectToMetaMask=async()=>{if(typeof window.ethereum===\"undefined\"){alert(\"MetaMask n'est pas installé !\");return;}try{await window.ethereum.request({method:'wallet_requestPermissions',params:[{eth_accounts:{}}]});setTimeout(async()=>{const accounts=await window.ethereum.request({method:'eth_requestAccounts'});const provider=new lib_esm[\"a\" /* ethers */].providers.Web3Provider(window.ethereum);const signer=provider.getSigner();const address=await signer.getAddress();setWalletAddress(address);setWalletConnected(true);alert(`Compte connecté : ${address}`);},1000);}catch(error){console.error('Erreur de connexion à MetaMask :',error);alert('Échec de la connexion à MetaMask.');}};// Connexion au wallet via Web3Modal\nconst connectWallet=async()=>{if(!web3Modal){console.error(\"Web3Modal non initialisé\");return;}try{console.log(\"Tentative de connexion au wallet...\");// Connexion via Web3Modal\nconst instance=await web3Modal.connect();const newProvider=new lib_esm[\"a\" /* ethers */].providers.Web3Provider(instance);// S'assurer que le provider est correctement défini\nif(!newProvider){console.error(\"Le fournisseur Web3 n'a pas été correctement créé\");return;}setProvider(newProvider);// Récupérer l'adresse du wallet\nconst signer=newProvider.getSigner();const address=await signer.getAddress();setWalletAddress(address);setWalletConnected(true);console.log(`Wallet connecté: ${address}`);}catch(error){console.error(\"Erreur lors de la connexion au portefeuille:\",error);alert(\"Erreur de connexion au portefeuille. Veuillez connecter votre wallet.\");// Ferme Web3Modal\nweb3Modal.clearCachedProvider();// Relance le processus de reconnexion via MetaMask\ntry{if(typeof window.ethereum!==\"undefined\"){await reconnectToMetaMask();}else{alert(\"MetaMask n'est pas installé.\");}}catch(retryError){console.error(\"Échec de la reconnexion à MetaMask\",retryError);alert(\"La reconnexion à MetaMask a échoué.\");}}};// Récupération du taux de conversion BNB vers USD\nconst fetchBnbToUsdRate=async()=>{try{const response=await axios[\"a\" /* default */].get('https://api.coingecko.com/api/v3/simple/price?ids=binancecoin&vs_currencies=usd');setBnbToUsdRate(response.data.binancecoin.usd);}catch(error){console.error('Erreur lors de la récupération du taux BNB -> USD',error);}};// Charger les données du contrat et les informations du produit\nObject(react[\"useEffect\"])(()=>{const loadBlockchainData=async()=>{if(provider){const contractAddress='0xD62B5CFdDfd26F6219E4BF366d9DB6B1450D5905';const contractABI=[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"}],\"name\":\"addAllowedToken\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"string\",\"name\":\"productId\",\"type\":\"string\"}],\"name\":\"pay\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"}],\"name\":\"removeAllowedToken\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address[]\",\"name\":\"tokens\",\"type\":\"address[]\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"string\",\"name\":\"productId\",\"type\":\"string\"}],\"name\":\"PaymentReceived\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"productId\",\"type\":\"string\"}],\"name\":\"removeProduct\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"productId\",\"type\":\"string\"},{\"internalType\":\"uint256\",\"name\":\"price\",\"type\":\"uint256\"}],\"name\":\"setProductPrice\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"withdraw\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"withdrawToken\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"allowedTokens\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"}],\"name\":\"isTokenAllowed\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"name\":\"products\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"price\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"exists\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"}];const contractInstance=new lib_esm[\"a\" /* ethers */].Contract(contractAddress,contractABI,provider.getSigner());try{const productDetails=await contractInstance.products(\"product1\");setProductInfo(productDetails);setProductPrice(productDetails.price);}catch(error){console.error(\"Erreur lors de la récupération des informations du produit:\",error);}}};loadBlockchainData();fetchBnbToUsdRate();},[provider]);const sendTransaction=async amountIn=>{if(!provider){alert(\"Le provider n'est pas défini, veuillez connecter votre wallet.\");return;}try{// Utilise le provider et signer déjà définis via Web3Modal\nconst signer=provider.getSigner();const amountInEther=lib_esm[\"a\" /* ethers */].utils.parseUnits(amountIn.toString(),18);// Obtenez le prix du gaz actuel\nconst gasPrice=await provider.getGasPrice();const adjustedGasPrice=gasPrice.mul(2);// Augmenter le prix du gaz pour garantir l'exécution\n// Vérifiez que vous avez assez de fonds\nconst walletBalance=await provider.getBalance(signer.getAddress());if(walletBalance.lt(amountInEther.add(adjustedGasPrice))){alert(\"Solde insuffisant pour couvrir la transaction et les frais de gaz.\");return;}// Préparez la transaction\nconst tx={to:App_contractAddress,value:amountInEther,gasLimit:100000,// Limite de gaz pour l'interaction avec un contrat\ngasPrice:adjustedGasPrice// Utilisez le prix ajusté du gaz\n};// Envoyer la transaction\nconst transactionResponse=await signer.sendTransaction(tx);console.log(\"Transaction envoyée, hash:\",transactionResponse.hash);// Attendez la confirmation de la transaction\nconst receipt=await transactionResponse.wait();console.log(\"Transaction confirmée dans le bloc:\",receipt.blockNumber);// Rediriger vers une nouvelle page après la transaction réussie\nwindow.location.href='/Delivrance_IndicateurD.html';// Remplace '/confirmation.html' par le chemin de la page HTML\n}catch(error){console.error(\"Erreur lors de l'envoi de la transaction:\",error);alert(\"Une erreur s'est produite lors de l'envoi de la transaction.\");}};const checkNetwork=async()=>{if(typeof window.ethereum!==\"undefined\"){const network=await window.ethereum.request({method:'eth_chainId'});// Vérifie si l'utilisateur est bien sur BSC Testnet (chainId 97)\nif(network!=='0x38'){// 0x38 est le chainId pour BSC Mainnet\nalert(\"Veuillez vous connecter au réseau Binance Smart Chain Mainnet.\");return false;}return true;}else{console.error(\"Ethereum n'est pas disponible.\");alert(\"MetaMask ou un autre portefeuille Ethereum n'est pas installé.\");return false;}};// Fonction pour réinitialiser le provider\nconst resetProvider=async()=>{try{if(typeof window.ethereum!==\"undefined\"){const newProvider=new lib_esm[\"a\" /* ethers */].providers.Web3Provider(window.ethereum);setProvider(newProvider);// Mettre à jour le provider\n// Attendre que React ait bien mis à jour le provider\nreturn newProvider.getSigner();// Retourner le signer après que le provider ait été mis à jour\n}else{throw new Error(\"Aucun fournisseur Ethereum n'est disponible.\");}}catch(error){console.error(\"Erreur dans resetProvider:\",error);alert(\"Erreur lors de la réinitialisation du provider.\");return null;}};// Vérification du réseau à chaque fois qu'il change\nObject(react[\"useEffect\"])(()=>{const changeNetworkHandler=async()=>{try{await resetProvider();// Remet à jour le provider lorsque le réseau change\nconsole.log(\"Le provider a été réinitialisé après le changement de réseau.\");}catch(error){console.error(\"Erreur lors du changement de réseau et réinitialisation du provider:\",error);}};if(typeof window.ethereum!==\"undefined\"){window.ethereum.on('chainChanged',changeNetworkHandler);}// Nettoyage quand le composant est démonté\nreturn()=>{if(typeof window.ethereum!==\"undefined\"){window.ethereum.removeListener('chainChanged',changeNetworkHandler);}};},[]);// Fonction de gestion du paiement\nconst handlePayment=async()=>{if(!walletConnected){alert(\"Veuillez connecter votre wallet avant de procéder.\");return;}// Vérifie que l'utilisateur est sur le bon réseau\nconst isCorrectNetwork=await checkNetwork();if(!isCorrectNetwork){return;// Ne pas procéder à la transaction si l'utilisateur n'est pas sur le bon réseau\n}// Vérifier que le provider est disponible\nif(!provider){alert(\" Reconnection au provider effectué. Veuillez renouveler l'opération \");return;}// Assurez-vous que le provider est bien à jour avant de procéder à la transaction\nawait resetProvider();// Réinitialise le provider si nécessaire\nif(productId&&productPrice){let amountIn=0;try{// Calculer le montant à envoyer en fonction de la devise sélectionnée\nif(selectedCurrency==='USD'){amountIn=productPrice;// Pas de conversion nécessaire si en USD\n}else if(selectedCurrency==='BNB'){// Si la devise est BNB, on effectue la conversion avec le taux BNB/USD\nif(!bnbToUsdRate){alert(\"Le taux de conversion BNB vers USD est encore en cours de chargement.\");return;}amountIn=productPrice/bnbToUsdRate;}// Convertir le montant à un format acceptable (fixé à 18 décimales)\namountIn=parseFloat(amountIn).toFixed(18);console.log('Montant final pour la transaction:',amountIn);// Envoyer la transaction\nawait sendTransaction(amountIn);// Attendre la réponse de la transaction\n}catch(error){console.error(\"Erreur lors de l'envoi de la transaction:\",error.message);alert(\"Une erreur s'est produite lors de l'envoi de la transaction. Vérifiez votre solde et les paramètres.\");}}else{alert(\"Veuillez sélectionner un produit valide et essayer de nouveau.\");}};// Liste des produits\nconst products={product1:{price:5,exists:true},product2:{price:299,exists:true},product3:{price:499,exists:true}};// Mise à jour des informations du produit sélectionné\nconst updateProductInfo=selectedProductId=>{setProductId(selectedProductId);const productDetails=products[selectedProductId];if(productDetails){const{price,exists}=productDetails;setProductPrice(price);setProductInfo({price,exists});if(selectedCurrency==='USD'){setConvertedPrice(price?price.toString():null);}else if(selectedCurrency==='BNB'){setConvertedPrice(price?(price/bnbToUsdRate).toString():null);}}else{console.error(\"Produit non trouvé !\");}};// Gestion du changement de devise (USD ou BNB)\nconst handleCurrencyChange=event=>{const newCurrency=event.target.value;setSelectedCurrency(newCurrency);if(newCurrency==='USD'){setConvertedPrice(productPrice?productPrice.toString():null);}else if(newCurrency==='BNB'){setConvertedPrice(productPrice?(productPrice/bnbToUsdRate).toString():null);}};return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"App\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"parallax-container\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"video\",{id:\"video-background\",autoPlay:true,loop:true,muted:true,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"source\",{src:browser_default.a.env.PUBLIC_URL+\"/video/egyptfutur2.mp4\",type:\"video/mp4\"}),\"Votre navigateur ne supporte pas les vid\\xE9os HTML5.\"]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"content\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"wallet-connect-button\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{onClick:connectWallet,disabled:walletConnected// Désactive le bouton une fois connecté\n,children:walletConnected?/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"span\",{children:[\"Wallet connect\\xE9 : \",walletAddress]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{className:\"arrow-icon\",children:\"\\u2192\"}),\" \"]}):'Connecter le wallet'})}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"payment-wrapper\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{children:\" Les Indicateurs \\xE0 Levier \"}),productId&&productInfo&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\"Produit choisi : \",productId]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\"Prix du produit : \",convertedPrice?convertedPrice:'Chargement...',\" \",selectedCurrency]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\"Le produit est \",productInfo.exists?'disponible':'indisponible']})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"select\",{onChange:e=>updateProductInfo(e.target.value),value:productId,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"\",children:\"Choisi Ton Indicateur\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"product1\",children:\"Indicateur Daily\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"product2\",children:\"Indicateur 4h/1h\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"product3\",children:\"Indicateur 15mn\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"select\",{onChange:handleCurrencyChange,value:selectedCurrency,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"USD\",children:\"USD\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"BNB\",children:\"BNB\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{onClick:handlePayment,children:\"Acheter\"})]})]})]})});};/* harmony default export */ var src_App = (App_App);\n// CONCATENATED MODULE: ./src/index.js\n// Cette ligne doit être valide avec React 18\n// Importation des fichiers CSS depuis 'src'\nconst root=client_default.a.createRoot(document.getElementById('root'));root.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{})}));\n\n/***/ })\n\n},[[446,1,2]]]);","inputSourceMap":{"version":3,"sources":["/home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/postcss-loader/src/index.js??postcss!/home/nypsus/mon-projet-deploiement/Front-end-indicateur/src/App.css","/home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/postcss-loader/src/index.js??postcss!/home/nypsus/mon-projet-deploiement/Front-end-indicateur/src/index.css","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/bn.js/lib buffer","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/node-libs-browser/node_modules/readable-stream/lib util","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/node-libs-browser/node_modules/readable-stream/lib/internal/streams util","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/object-inspect ./util.inspect","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/elliptic/node_modules/bn.js/lib buffer","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/brorand crypto","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/readable-stream/lib util","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/readable-stream/lib/internal/streams util","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/@ethersproject/signing-key/node_modules/bn.js/lib buffer","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/@ethersproject/bignumber/node_modules/bn.js/lib buffer","/home/nypsus/mon-projet-deploiement/Front-end-indicateur/src/App.js","/home/nypsus/mon-projet-deploiement/Front-end-indicateur/src/index.js"],"names":["contractAddress","bscTestnetRpcUrl","bscTestnetProvider","ethers","providers","JsonRpcProvider","App","web3Modal","setWeb3Modal","useState","provider","setProvider","walletConnected","setWalletConnected","walletAddress","setWalletAddress","productInfo","setProductInfo","productId","setProductId","productPrice","setProductPrice","bnbToUsdRate","setBnbToUsdRate","selectedCurrency","setSelectedCurrency","convertedPrice","setConvertedPrice","useEffect","modal","Web3Modal","cacheProvider","providerOptions","walletconnect","package","WalletConnectProvider","options","infuraId","metamask","trustwallet","interval","setInterval","web3ModalElement","document","querySelector","style","zIndex","clearInterval","hideIframe","iframe","display","reconnectToMetaMask","window","ethereum","alert","request","method","params","eth_accounts","setTimeout","accounts","Web3Provider","signer","getSigner","address","getAddress","error","console","connectWallet","log","instance","connect","newProvider","clearCachedProvider","retryError","fetchBnbToUsdRate","response","axios","get","data","binancecoin","usd","loadBlockchainData","contractABI","contractInstance","Contract","productDetails","products","price","sendTransaction","amountIn","amountInEther","utils","parseUnits","toString","gasPrice","getGasPrice","adjustedGasPrice","mul","walletBalance","getBalance","lt","add","tx","to","value","gasLimit","transactionResponse","hash","receipt","wait","blockNumber","location","href","checkNetwork","network","resetProvider","Error","changeNetworkHandler","on","removeListener","handlePayment","isCorrectNetwork","parseFloat","toFixed","message","product1","exists","product2","product3","updateProductInfo","selectedProductId","handleCurrencyChange","event","newCurrency","target","_jsx","className","children","_jsxs","id","autoPlay","loop","muted","src","process","env","PUBLIC_URL","type","onClick","disabled","_Fragment","onChange","e","root","ReactDOM","createRoot","getElementById","render","React","StrictMode"],"mappings":";;;;;AAAA,uC;;;;;;;ACAA,uC;;;;;;;ACAA,e;;;;;;;ACAA,e;;;;;;;ACAA,e;;;;;;;ACAA,e;;;;;;;ACAA,e;;;;;;;ACAA,e;;;;;;;ACAA,e;;;;;;;ACAA,e;;;;;;;ACAA,e;;;;;;;ACAA,e;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACMoB;AACE;AAQtB,KAAM,CAAAA,mBAAe,CAAG,4CAA4C,CACpE,KAAM,CAAAC,gBAAgB,CAAG,mCAAmC,CAAE;AAC9D,KAAM,CAAAC,kBAAkB,CAAG,GAAI,CAAAC,yBAAM,CAACC,SAAS,CAACC,eAAe,CAACJ,gBAAgB,CAAC,CAKjF,QAAS,CAAAK,OAAGA,CAAA,CAAG,CACb,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGC,yBAAQ,CAAC,IAAI,CAAC,CAChD,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGF,yBAAQ,CAAC,IAAI,CAAC,CAC9C,KAAM,CAACG,eAAe,CAAEC,kBAAkB,CAAC,CAAGJ,yBAAQ,CAAC,KAAK,CAAC,CAC7D,KAAM,CAACK,aAAa,CAAEC,gBAAgB,CAAC,CAAGN,yBAAQ,CAAC,EAAE,CAAC,CAEtD,KAAM,CAACO,WAAW,CAAEC,cAAc,CAAC,CAAGR,yBAAQ,CAAC,IAAI,CAAC,CACpD,KAAM,CAACS,SAAS,CAAEC,YAAY,CAAC,CAAGV,yBAAQ,CAAC,EAAE,CAAC,CAC9C,KAAM,CAACW,YAAY,CAAEC,eAAe,CAAC,CAAGZ,yBAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAACa,YAAY,CAAEC,eAAe,CAAC,CAAGd,yBAAQ,CAAC,IAAI,CAAC,CACtD,KAAM,CAACe,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGhB,yBAAQ,CAAC,KAAK,CAAC,CAC/D,KAAM,CAACiB,cAAc,CAAEC,iBAAiB,CAAC,CAAGlB,yBAAQ,CAAC,IAAI,CAAC,CAQ1D;AACAmB,0BAAS,CAAC,IAAM,CAChB,KAAM,CAAAC,KAAK,CAAG,GAAI,CAAAC,cAAS,CAAC,CAC1BC,aAAa,CAAE,IAAI,CAAE;AACrBC,eAAe,CAAE,CACfC,aAAa,CAAE,CACbC,OAAO,CAAEC,sBAAqB,CAAE;AAChCC,OAAO,CAAE,CACPC,QAAQ,CAAE,kCAAmC;AAC/C,CACF,CAAC,CACDC,QAAQ,CAAE,CACRJ,OAAO,CAAE,IAAM;AAEjB,CAAC,CACDK,WAAW,CAAE,CACXL,OAAO,CAAEC,sBAAqB,CAAE;AAChCC,OAAO,CAAE,CACPC,QAAQ,CAAE,wDAAyD;AACrE,CACF,CAEA;AACF,CACF,CAAC,CAAC,CAEF7B,YAAY,CAACqB,KAAK,CAAC,CAEnB;AACA,KAAM,CAAAW,QAAQ,CAAGC,WAAW,CAAC,IAAM,CACjC,KAAM,CAAAC,gBAAgB,CAAGC,QAAQ,CAACC,aAAa,CAAC,uBAAuB,CAAC,CACxE,GAAIF,gBAAgB,CAAE,CACpBA,gBAAgB,CAACG,KAAK,CAACC,MAAM,CAAG,QAAQ,CAAE;AAC1CC,aAAa,CAACP,QAAQ,CAAC,CACzB,CACF,CAAC,CAAE,GAAG,CAAC,CAEP,MAAO,IAAMO,aAAa,CAACP,QAAQ,CAAC,CAEtC,CAAC,CAAE,EAAE,CAAC,CAKJ;AACA,KAAM,CAAAQ,UAAU,CAAGA,CAAA,GAAM,CACvB,KAAM,CAAAC,MAAM,CAAGN,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC,CAC/C,GAAIK,MAAM,CAAE,CACVA,MAAM,CAACJ,KAAK,CAACK,OAAO,CAAG,MAAM,CAAE;AACjC,CACF,CAAC,CAED;AACAF,UAAU,CAAC,CAAC,CAGZ;AACA,KAAM,CAAAG,mBAAmB,CAAG,KAAAA,CAAA,GAAY,CACtC,GAAI,MAAO,CAAAC,MAAM,CAACC,QAAQ,GAAK,WAAW,CAAE,CAC1CC,KAAK,CAAC,+BAA+B,CAAC,CACtC,OACF,CAEA,GAAI,CAEF,KAAM,CAAAF,MAAM,CAACC,QAAQ,CAACE,OAAO,CAAC,CAC5BC,MAAM,CAAE,2BAA2B,CACnCC,MAAM,CAAE,CAAC,CACPC,YAAY,CAAE,CAAC,CACjB,CAAC,CACH,CAAC,CAAC,CAEFC,UAAU,CAAC,SAAY,CACrB,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAR,MAAM,CAACC,QAAQ,CAACE,OAAO,CAAC,CAC7CC,MAAM,CAAE,qBACV,CAAC,CAAC,CAEF,KAAM,CAAA9C,QAAQ,CAAG,GAAI,CAAAP,yBAAM,CAACC,SAAS,CAACyD,YAAY,CAACT,MAAM,CAACC,QAAQ,CAAC,CACnE,KAAM,CAAAS,MAAM,CAAGpD,QAAQ,CAACqD,SAAS,CAAC,CAAC,CACnC,KAAM,CAAAC,OAAO,CAAG,KAAM,CAAAF,MAAM,CAACG,UAAU,CAAC,CAAC,CAEzClD,gBAAgB,CAACiD,OAAO,CAAC,CACzBnD,kBAAkB,CAAC,IAAI,CAAC,CACxByC,KAAK,CAAC,qBAAqBU,OAAO,EAAE,CAAC,CACvC,CAAC,CAAE,IAAI,CAAC,CACV,CAAE,MAAOE,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,kCAAkC,CAAEA,KAAK,CAAC,CACxDZ,KAAK,CAAC,mCAAmC,CAAC,CAC5C,CACF,CAAC,CAGD;AACA,KAAM,CAAAc,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CAAC7D,SAAS,CAAE,CACd4D,OAAO,CAACD,KAAK,CAAC,0BAA0B,CAAC,CACzC,OACF,CAEA,GAAI,CACFC,OAAO,CAACE,GAAG,CAAC,qCAAqC,CAAC,CAGlD;AACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAA/D,SAAS,CAACgE,OAAO,CAAC,CAAC,CAC1C,KAAM,CAAAC,WAAW,CAAG,GAAI,CAAArE,yBAAM,CAACC,SAAS,CAACyD,YAAY,CAACS,QAAQ,CAAC,CAE/D;AACA,GAAI,CAACE,WAAW,CAAE,CAChBL,OAAO,CAACD,KAAK,CAAC,mDAAmD,CAAC,CAClE,OACF,CAEAvD,WAAW,CAAC6D,WAAW,CAAC,CAExB;AACA,KAAM,CAAAV,MAAM,CAAGU,WAAW,CAACT,SAAS,CAAC,CAAC,CACtC,KAAM,CAAAC,OAAO,CAAG,KAAM,CAAAF,MAAM,CAACG,UAAU,CAAC,CAAC,CAEzClD,gBAAgB,CAACiD,OAAO,CAAC,CACzBnD,kBAAkB,CAAC,IAAI,CAAC,CAExBsD,OAAO,CAACE,GAAG,CAAC,oBAAoBL,OAAO,EAAE,CAAC,CAC5C,CAAE,MAAOE,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,8CAA8C,CAAEA,KAAK,CAAC,CACpEZ,KAAK,CAAC,uEAAuE,CAAC,CAC9E;AACA/C,SAAS,CAACkE,mBAAmB,CAAC,CAAC,CAE/B;AACA,GAAI,CACF,GAAI,MAAO,CAAArB,MAAM,CAACC,QAAQ,GAAK,WAAW,CAAE,CAC1C,KAAM,CAAAF,mBAAmB,CAAC,CAAC,CAC7B,CAAC,IAAM,CACLG,KAAK,CAAC,8BAA8B,CAAC,CACvC,CACF,CAAE,MAAOoB,UAAU,CAAE,CACnBP,OAAO,CAACD,KAAK,CAAC,oCAAoC,CAAEQ,UAAU,CAAC,CAC/DpB,KAAK,CAAC,qCAAqC,CAAC,CAC9C,CACF,CACF,CAAC,CAGD;AACA,KAAM,CAAAqB,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CACpC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,wBAAK,CAACC,GAAG,CAAC,iFAAiF,CAAC,CACnHvD,eAAe,CAACqD,QAAQ,CAACG,IAAI,CAACC,WAAW,CAACC,GAAG,CAAC,CAChD,CAAE,MAAOf,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,mDAAmD,CAAEA,KAAK,CAAC,CAC3E,CACF,CAAC,CAEA;AACAtC,0BAAS,CAAC,IAAM,CACf,KAAM,CAAAsD,kBAAkB,CAAG,KAAAA,CAAA,GAAY,CACrC,GAAIxE,QAAQ,CAAE,CACZ,KAAM,CAAAV,eAAe,CAAG,4CAA4C,CACpE,KAAM,CAAAmF,WAAW,CACzB,CACI,CACI,QAAQ,CAAE,CACN,CACI,cAAc,CAAE,SAAS,CACzB,MAAM,CAAE,OAAO,CACf,MAAM,CAAE,SACZ,CAAC,CACJ,CACD,MAAM,CAAE,iBAAiB,CACzB,SAAS,CAAE,EAAE,CACb,iBAAiB,CAAE,YAAY,CAC/B,MAAM,CAAE,UACZ,CAAC,CACD,CACI,QAAQ,CAAE,CACN,CACI,cAAc,CAAE,SAAS,CACzB,MAAM,CAAE,OAAO,CACf,MAAM,CAAE,SACZ,CAAC,CACD,CACI,cAAc,CAAE,SAAS,CACzB,MAAM,CAAE,QAAQ,CAChB,MAAM,CAAE,SACZ,CAAC,CACD,CACI,cAAc,CAAE,QAAQ,CACxB,MAAM,CAAE,WAAW,CACnB,MAAM,CAAE,QACZ,CAAC,CACJ,CACD,MAAM,CAAE,KAAK,CACb,SAAS,CAAE,EAAE,CACb,iBAAiB,CAAE,SAAS,CAC5B,MAAM,CAAE,UACZ,CAAC,CACD,CACI,QAAQ,CAAE,CACN,CACI,cAAc,CAAE,SAAS,CACzB,MAAM,CAAE,OAAO,CACf,MAAM,CAAE,SACZ,CAAC,CACJ,CACD,MAAM,CAAE,oBAAoB,CAC5B,SAAS,CAAE,EAAE,CACb,iBAAiB,CAAE,YAAY,CAC/B,MAAM,CAAE,UACZ,CAAC,CACD,CACI,QAAQ,CAAE,CACN,CACI,cAAc,CAAE,WAAW,CAC3B,MAAM,CAAE,QAAQ,CAChB,MAAM,CAAE,WACZ,CAAC,CACJ,CACD,iBAAiB,CAAE,YAAY,CAC/B,MAAM,CAAE,aACZ,CAAC,CACD,CACI,WAAW,CAAE,KAAK,CAClB,QAAQ,CAAE,CACN,CACI,SAAS,CAAE,IAAI,CACf,cAAc,CAAE,SAAS,CACzB,MAAM,CAAE,MAAM,CACd,MAAM,CAAE,SACZ,CAAC,CACD,CACI,SAAS,CAAE,KAAK,CAChB,cAAc,CAAE,SAAS,CACzB,MAAM,CAAE,QAAQ,CAChB,MAAM,CAAE,SACZ,CAAC,CACD,CACI,SAAS,CAAE,KAAK,CAChB,cAAc,CAAE,SAAS,CACzB,MAAM,CAAE,OAAO,CACf,MAAM,CAAE,SACZ,CAAC,CACD,CACI,SAAS,CAAE,KAAK,CAChB,cAAc,CAAE,QAAQ,CACxB,MAAM,CAAE,WAAW,CACnB,MAAM,CAAE,QACZ,CAAC,CACJ,CACD,MAAM,CAAE,iBAAiB,CACzB,MAAM,CAAE,OACZ,CAAC,CACD,CACI,QAAQ,CAAE,CACN,CACI,cAAc,CAAE,QAAQ,CACxB,MAAM,CAAE,WAAW,CACnB,MAAM,CAAE,QACZ,CAAC,CACJ,CACD,MAAM,CAAE,eAAe,CACvB,SAAS,CAAE,EAAE,CACb,iBAAiB,CAAE,YAAY,CAC/B,MAAM,CAAE,UACZ,CAAC,CACD,CACI,QAAQ,CAAE,CACN,CACI,cAAc,CAAE,QAAQ,CACxB,MAAM,CAAE,WAAW,CACnB,MAAM,CAAE,QACZ,CAAC,CACD,CACI,cAAc,CAAE,SAAS,CACzB,MAAM,CAAE,OAAO,CACf,MAAM,CAAE,SACZ,CAAC,CACJ,CACD,MAAM,CAAE,iBAAiB,CACzB,SAAS,CAAE,EAAE,CACb,iBAAiB,CAAE,YAAY,CAC/B,MAAM,CAAE,UACZ,CAAC,CACD,CACI,QAAQ,CAAE,CACN,CACI,cAAc,CAAE,SAAS,CACzB,MAAM,CAAE,QAAQ,CAChB,MAAM,CAAE,SACZ,CAAC,CACJ,CACD,MAAM,CAAE,UAAU,CAClB,SAAS,CAAE,EAAE,CACb,iBAAiB,CAAE,YAAY,CAC/B,MAAM,CAAE,UACZ,CAAC,CACD,CACI,QAAQ,CAAE,CACN,CACI,cAAc,CAAE,SAAS,CACzB,MAAM,CAAE,OAAO,CACf,MAAM,CAAE,SACZ,CAAC,CACD,CACI,cAAc,CAAE,SAAS,CACzB,MAAM,CAAE,QAAQ,CAChB,MAAM,CAAE,SACZ,CAAC,CACJ,CACD,MAAM,CAAE,eAAe,CACvB,SAAS,CAAE,EAAE,CACb,iBAAiB,CAAE,YAAY,CAC/B,MAAM,CAAE,UACZ,CAAC,CACD,CACI,QAAQ,CAAE,CACN,CACI,cAAc,CAAE,SAAS,CACzB,MAAM,CAAE,EAAE,CACV,MAAM,CAAE,SACZ,CAAC,CACJ,CACD,MAAM,CAAE,eAAe,CACvB,SAAS,CAAE,CACP,CACI,cAAc,CAAE,MAAM,CACtB,MAAM,CAAE,EAAE,CACV,MAAM,CAAE,MACZ,CAAC,CACJ,CACD,iBAAiB,CAAE,MAAM,CACzB,MAAM,CAAE,UACZ,CAAC,CACD,CACI,QAAQ,CAAE,CACN,CACI,cAAc,CAAE,SAAS,CACzB,MAAM,CAAE,OAAO,CACf,MAAM,CAAE,SACZ,CAAC,CACJ,CACD,MAAM,CAAE,gBAAgB,CACxB,SAAS,CAAE,CACP,CACI,cAAc,CAAE,MAAM,CACtB,MAAM,CAAE,EAAE,CACV,MAAM,CAAE,MACZ,CAAC,CACJ,CACD,iBAAiB,CAAE,MAAM,CACzB,MAAM,CAAE,UACZ,CAAC,CACD,CACI,QAAQ,CAAE,EAAE,CACZ,MAAM,CAAE,OAAO,CACf,SAAS,CAAE,CACP,CACI,cAAc,CAAE,SAAS,CACzB,MAAM,CAAE,EAAE,CACV,MAAM,CAAE,SACZ,CAAC,CACJ,CACD,iBAAiB,CAAE,MAAM,CACzB,MAAM,CAAE,UACZ,CAAC,CACD,CACI,QAAQ,CAAE,CACN,CACI,cAAc,CAAE,QAAQ,CACxB,MAAM,CAAE,EAAE,CACV,MAAM,CAAE,QACZ,CAAC,CACJ,CACD,MAAM,CAAE,UAAU,CAClB,SAAS,CAAE,CACP,CACI,cAAc,CAAE,SAAS,CACzB,MAAM,CAAE,OAAO,CACf,MAAM,CAAE,SACZ,CAAC,CACD,CACI,cAAc,CAAE,MAAM,CACtB,MAAM,CAAE,QAAQ,CAChB,MAAM,CAAE,MACZ,CAAC,CACJ,CACD,iBAAiB,CAAE,MAAM,CACzB,MAAM,CAAE,UACZ,CAAC,CACJ,CAKO,KAAM,CAAAC,gBAAgB,CAAG,GAAI,CAAAjF,yBAAM,CAACkF,QAAQ,CAACrF,eAAe,CAAEmF,WAAW,CAAEzE,QAAQ,CAACqD,SAAS,CAAC,CAAC,CAAC,CAEhG,GAAI,CACF,KAAM,CAAAuB,cAAc,CAAG,KAAM,CAAAF,gBAAgB,CAACG,QAAQ,CAAC,UAAU,CAAC,CAClEtE,cAAc,CAACqE,cAAc,CAAC,CAC9BjE,eAAe,CAACiE,cAAc,CAACE,KAAK,CAAC,CACvC,CAAE,MAAOtB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,6DAA6D,CAAEA,KAAK,CAAC,CACrF,CACF,CACF,CAAC,CAEDgB,kBAAkB,CAAC,CAAC,CACpBP,iBAAiB,CAAC,CAAC,CACrB,CAAC,CAAE,CAACjE,QAAQ,CAAC,CAAC,CAMd,KAAM,CAAA+E,eAAe,CAAG,KAAO,CAAAC,QAAQ,EAAK,CAC1C,GAAI,CAAChF,QAAQ,CAAE,CACb4C,KAAK,CAAC,gEAAgE,CAAC,CACvE,OACF,CAEA,GAAI,CACF;AACA,KAAM,CAAAQ,MAAM,CAAGpD,QAAQ,CAACqD,SAAS,CAAC,CAAC,CACnC,KAAM,CAAA4B,aAAa,CAAGxF,yBAAM,CAACyF,KAAK,CAACC,UAAU,CAACH,QAAQ,CAACI,QAAQ,CAAC,CAAC,CAAE,EAAE,CAAC,CAEtE;AACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAArF,QAAQ,CAACsF,WAAW,CAAC,CAAC,CAC7C,KAAM,CAAAC,gBAAgB,CAAGF,QAAQ,CAACG,GAAG,CAAC,CAAC,CAAC,CAAE;AAE1C;AACA,KAAM,CAAAC,aAAa,CAAG,KAAM,CAAAzF,QAAQ,CAAC0F,UAAU,CAACtC,MAAM,CAACG,UAAU,CAAC,CAAC,CAAC,CACpE,GAAIkC,aAAa,CAACE,EAAE,CAACV,aAAa,CAACW,GAAG,CAACL,gBAAgB,CAAC,CAAC,CAAE,CACzD3C,KAAK,CAAC,oEAAoE,CAAC,CAC3E,OACF,CAEA;AACA,KAAM,CAAAiD,EAAE,CAAG,CACTC,EAAE,CAAExG,mBAAe,CACnByG,KAAK,CAAEd,aAAa,CACpBe,QAAQ,CAAE,MAAM,CAAE;AAClBX,QAAQ,CAAEE,gBAAiB;AAC7B,CAAC,CAED;AACA,KAAM,CAAAU,mBAAmB,CAAG,KAAM,CAAA7C,MAAM,CAAC2B,eAAe,CAACc,EAAE,CAAC,CAC5DpC,OAAO,CAACE,GAAG,CAAC,4BAA4B,CAAEsC,mBAAmB,CAACC,IAAI,CAAC,CAEnE;AACA,KAAM,CAAAC,OAAO,CAAG,KAAM,CAAAF,mBAAmB,CAACG,IAAI,CAAC,CAAC,CAChD3C,OAAO,CAACE,GAAG,CAAC,qCAAqC,CAAEwC,OAAO,CAACE,WAAW,CAAC,CAEvE;AACA3D,MAAM,CAAC4D,QAAQ,CAACC,IAAI,CAAG,8BAA8B,CAAG;AAG1D,CAAE,MAAO/C,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,2CAA2C,CAAEA,KAAK,CAAC,CACjEZ,KAAK,CAAC,8DAA8D,CAAC,CACvE,CACF,CAAC,CAGD,KAAM,CAAA4D,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,MAAO,CAAA9D,MAAM,CAACC,QAAQ,GAAK,WAAW,CAAE,CAC1C,KAAM,CAAA8D,OAAO,CAAG,KAAM,CAAA/D,MAAM,CAACC,QAAQ,CAACE,OAAO,CAAC,CAC5CC,MAAM,CAAE,aACV,CAAC,CAAC,CAEF;AACA,GAAI2D,OAAO,GAAK,MAAM,CAAE,CAAE;AACxB7D,KAAK,CAAC,gEAAgE,CAAC,CACvE,MAAO,MAAK,CACd,CAEA,MAAO,KAAI,CACb,CAAC,IAAM,CACLa,OAAO,CAACD,KAAK,CAAC,gCAAgC,CAAC,CAC/CZ,KAAK,CAAC,gEAAgE,CAAC,CACvE,MAAO,MAAK,CACd,CACF,CAAC,CAOD;AACA,KAAM,CAAA8D,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CACF,GAAI,MAAO,CAAAhE,MAAM,CAACC,QAAQ,GAAK,WAAW,CAAE,CAC1C,KAAM,CAAAmB,WAAW,CAAG,GAAI,CAAArE,yBAAM,CAACC,SAAS,CAACyD,YAAY,CAACT,MAAM,CAACC,QAAQ,CAAC,CACtE1C,WAAW,CAAC6D,WAAW,CAAC,CAAE;AAE1B;AACA,MAAO,CAAAA,WAAW,CAACT,SAAS,CAAC,CAAC,CAAE;AAClC,CAAC,IAAM,CACL,KAAM,IAAI,CAAAsD,KAAK,CAAC,8CAA8C,CAAC,CACjE,CACF,CAAE,MAAOnD,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAAC,CAClDZ,KAAK,CAAC,iDAAiD,CAAC,CACxD,MAAO,KAAI,CACb,CACF,CAAC,CAED;AACA1B,0BAAS,CAAC,IAAM,CACd,KAAM,CAAA0F,oBAAoB,CAAG,KAAAA,CAAA,GAAY,CACvC,GAAI,CACF,KAAM,CAAAF,aAAa,CAAC,CAAC,CAAE;AACvBjD,OAAO,CAACE,GAAG,CAAC,+DAA+D,CAAC,CAC9E,CAAE,MAAOH,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,sEAAsE,CAAEA,KAAK,CAAC,CAC9F,CACF,CAAC,CAED,GAAI,MAAO,CAAAd,MAAM,CAACC,QAAQ,GAAK,WAAW,CAAE,CAC1CD,MAAM,CAACC,QAAQ,CAACkE,EAAE,CAAC,cAAc,CAAED,oBAAoB,CAAC,CAC1D,CAEA;AACA,MAAO,IAAM,CACX,GAAI,MAAO,CAAAlE,MAAM,CAACC,QAAQ,GAAK,WAAW,CAAE,CAC1CD,MAAM,CAACC,QAAQ,CAACmE,cAAc,CAAC,cAAc,CAAEF,oBAAoB,CAAC,CACtE,CACF,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAKN;AACA,KAAM,CAAAG,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,GAAI,CAAC7G,eAAe,CAAE,CACpB0C,KAAK,CAAC,oDAAoD,CAAC,CAC3D,OACF,CAEA;AACF,KAAM,CAAAoE,gBAAgB,CAAG,KAAM,CAAAR,YAAY,CAAC,CAAC,CAC7C,GAAI,CAACQ,gBAAgB,CAAE,CACrB,OAAQ;AACV,CACA;AACA,GAAI,CAAChH,QAAQ,CAAE,CACb4C,KAAK,CAAC,sEAAsE,CAAC,CAC7E,OACF,CAEA;AACA,KAAM,CAAA8D,aAAa,CAAC,CAAC,CAAE;AAErB,GAAIlG,SAAS,EAAIE,YAAY,CAAE,CAC7B,GAAI,CAAAsE,QAAQ,CAAG,CAAC,CAChB,GAAI,CACF;AACA,GAAIlE,gBAAgB,GAAK,KAAK,CAAE,CAC9BkE,QAAQ,CAAGtE,YAAY,CAAE;AAC3B,CAAC,IAAM,IAAII,gBAAgB,GAAK,KAAK,CAAE,CACrC;AACA,GAAI,CAACF,YAAY,CAAE,CACjBgC,KAAK,CAAC,uEAAuE,CAAC,CAC9E,OACF,CACAoC,QAAQ,CAAGtE,YAAY,CAAGE,YAAY,CACxC,CAEA;AACAoE,QAAQ,CAAGiC,UAAU,CAACjC,QAAQ,CAAC,CAACkC,OAAO,CAAC,EAAE,CAAC,CAC3CzD,OAAO,CAACE,GAAG,CAAC,oCAAoC,CAAEqB,QAAQ,CAAC,CAE3D;AACA,KAAM,CAAAD,eAAe,CAACC,QAAQ,CAAC,CAAE;AACnC,CAAE,MAAOxB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,2CAA2C,CAAEA,KAAK,CAAC2D,OAAO,CAAC,CACzEvE,KAAK,CAAC,sGAAsG,CAAC,CAC/G,CACF,CAAC,IAAM,CACLA,KAAK,CAAC,gEAAgE,CAAC,CACzE,CACF,CAAC,CAED;AACA,KAAM,CAAAiC,QAAQ,CAAG,CACfuC,QAAQ,CAAE,CAAEtC,KAAK,CAAE,CAAC,CAAEuC,MAAM,CAAE,IAAK,CAAC,CACpCC,QAAQ,CAAE,CAAExC,KAAK,CAAE,GAAG,CAAEuC,MAAM,CAAE,IAAK,CAAC,CACtCE,QAAQ,CAAE,CAAEzC,KAAK,CAAE,GAAG,CAAEuC,MAAM,CAAE,IAAK,CACvC,CAAC,CAED;AACA,KAAM,CAAAG,iBAAiB,CAAIC,iBAAiB,EAAK,CAC/ChH,YAAY,CAACgH,iBAAiB,CAAC,CAC/B,KAAM,CAAA7C,cAAc,CAAGC,QAAQ,CAAC4C,iBAAiB,CAAC,CAElD,GAAI7C,cAAc,CAAE,CAClB,KAAM,CAAEE,KAAK,CAAEuC,MAAO,CAAC,CAAGzC,cAAc,CACxCjE,eAAe,CAACmE,KAAK,CAAC,CACtBvE,cAAc,CAAC,CAAEuE,KAAK,CAAEuC,MAAO,CAAC,CAAC,CAEjC,GAAIvG,gBAAgB,GAAK,KAAK,CAAE,CAC9BG,iBAAiB,CAAC6D,KAAK,CAAGA,KAAK,CAACM,QAAQ,CAAC,CAAC,CAAG,IAAI,CAAC,CACpD,CAAC,IAAM,IAAItE,gBAAgB,GAAK,KAAK,CAAE,CACrCG,iBAAiB,CAAC6D,KAAK,CAAG,CAACA,KAAK,CAAGlE,YAAY,EAAEwE,QAAQ,CAAC,CAAC,CAAG,IAAI,CAAC,CACrE,CACF,CAAC,IAAM,CACL3B,OAAO,CAACD,KAAK,CAAC,sBAAsB,CAAC,CACvC,CACF,CAAC,CAED;AACA,KAAM,CAAAkE,oBAAoB,CAAIC,KAAK,EAAK,CACtC,KAAM,CAAAC,WAAW,CAAGD,KAAK,CAACE,MAAM,CAAC9B,KAAK,CACtChF,mBAAmB,CAAC6G,WAAW,CAAC,CAEhC,GAAIA,WAAW,GAAK,KAAK,CAAE,CACzB3G,iBAAiB,CAACP,YAAY,CAAGA,YAAY,CAAC0E,QAAQ,CAAC,CAAC,CAAG,IAAI,CAAC,CAClE,CAAC,IAAM,IAAIwC,WAAW,GAAK,KAAK,CAAE,CAChC3G,iBAAiB,CAACP,YAAY,CAAG,CAACA,YAAY,CAAGE,YAAY,EAAEwE,QAAQ,CAAC,CAAC,CAAG,IAAI,CAAC,CACnF,CACF,CAAC,CAED,mBACE0C,0BAAA,QAAKC,SAAS,CAAC,KAAK,CAAAC,QAAA,cAElBC,2BAAA,QAAKF,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eACjCC,2BAAA,UAAOC,EAAE,CAAC,kBAAkB,CAACC,QAAQ,MAACC,IAAI,MAACC,KAAK,MAAAL,QAAA,eAChDF,0BAAA,WAAQQ,GAAG,CAAEC,iBAAO,CAACC,GAAG,CAACC,UAAU,CAAG,wBAAyB,CAACC,IAAI,CAAC,WAAW,CAAE,CAAC,wDAInF,EAAO,CAAC,cAGRT,2BAAA,QAAKF,SAAS,CAAC,SAAS,CAAAC,QAAA,eAItBF,0BAAA,QAAKC,SAAS,CAAC,uBAAuB,CAAAC,QAAA,cACpCF,0BAAA,WAEEa,OAAO,CAAEjF,aAAc,CACvBkF,QAAQ,CAAE1I,eAAiB;AAAA,CAAA8H,QAAA,CAE1B9H,eAAe,cACd+H,2BAAA,CAAAY,uBAAA,EAAAb,QAAA,eACEC,2BAAA,SAAAD,QAAA,EAAM,uBAAkB,CAAC5H,aAAa,EAAO,CAAC,cAC9C0H,0BAAA,SAAMC,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,QAAC,CAAM,CAAC,IAAC,EACtC,CAAC,CAEH,qBACD,CACK,CAAC,CACN,CAAC,cAGNC,2BAAA,QAAKF,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BF,0BAAA,OAAAE,QAAA,CAAI,+BAA0B,CAAI,CAAC,CAElCxH,SAAS,EAAIF,WAAW,eACvB2H,2BAAA,QAAAD,QAAA,eACEC,2BAAA,MAAAD,QAAA,EAAG,mBAAiB,CAACxH,SAAS,EAAI,CAAC,cACnCyH,2BAAA,MAAAD,QAAA,EAAG,oBAAkB,CAAChH,cAAc,CAAGA,cAAc,CAAG,eAAe,CAAC,GAAC,CAACF,gBAAgB,EAAI,CAAC,cAC/FmH,2BAAA,MAAAD,QAAA,EAAG,iBAAe,CAAC1H,WAAW,CAAC+G,MAAM,CAAG,YAAY,CAAG,cAAc,EAAI,CAAC,EACvE,CACN,cAEDY,2BAAA,WAAQa,QAAQ,CAAGC,CAAC,EAAKvB,iBAAiB,CAACuB,CAAC,CAAClB,MAAM,CAAC9B,KAAK,CAAE,CAACA,KAAK,CAAEvF,SAAU,CAAAwH,QAAA,eAC3EF,0BAAA,WAAQ/B,KAAK,CAAC,EAAE,CAAAiC,QAAA,CAAC,uBAAqB,CAAQ,CAAC,cAC/CF,0BAAA,WAAQ/B,KAAK,CAAC,UAAU,CAAAiC,QAAA,CAAC,kBAAgB,CAAQ,CAAC,cAClDF,0BAAA,WAAQ/B,KAAK,CAAC,UAAU,CAAAiC,QAAA,CAAC,kBAAgB,CAAQ,CAAC,cAClDF,0BAAA,WAAQ/B,KAAK,CAAC,UAAU,CAAAiC,QAAA,CAAC,iBAAe,CAAQ,CAAC,EAC3C,CAAC,cAETC,2BAAA,WAAQa,QAAQ,CAAEpB,oBAAqB,CAAC3B,KAAK,CAAEjF,gBAAiB,CAAAkH,QAAA,eAC9DF,0BAAA,WAAQ/B,KAAK,CAAC,KAAK,CAAAiC,QAAA,CAAC,KAAG,CAAQ,CAAC,cAChCF,0BAAA,WAAQ/B,KAAK,CAAC,KAAK,CAAAiC,QAAA,CAAC,KAAG,CAAQ,CAAC,EAC1B,CAAC,cAETF,0BAAA,WAAQa,OAAO,CAAE5B,aAAc,CAAAiB,QAAA,CAAC,SAAO,CAAQ,CAAC,EAC7C,CAAC,EACH,CAAC,EACH,CAAC,CACH,CAAC,CAKV,CAAC,CAGcpI,mDAAG,E;;AC5tBwB;AAEnB;AAKvB,KAAM,CAAAoJ,IAAI,CAAGC,gBAAQ,CAACC,UAAU,CAACjH,QAAQ,CAACkH,cAAc,CAAC,MAAM,CAAC,CAAC,CACjEH,IAAI,CAACI,MAAM,cACTtB,0BAAA,CAACuB,eAAK,CAACC,UAAU,EAAAtB,QAAA,cACfF,0BAAA,CAAClI,OAAG,GAAE,CAAC,CACS,CACpB,CAAC,C","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","import React, { useEffect, useState, useRef } from 'react';\r\nimport Web3Modal from 'web3modal';\r\nimport { ethers } from 'ethers';\r\nimport axios from 'axios';\r\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\r\nimport process from 'process';\r\nimport './App.css'; // Importation du fichier CSS\r\nimport './index.css'; // Ajoute cette ligne dans ton fichier JavaScript\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst contractAddress = '0xCd25eee89Bb01603f0E0cf8D8C243966a926761d';\r\nconst bscTestnetRpcUrl = \"https://bsc-dataseed.binance.org/\"; // BSC Mainnet\r\nconst bscTestnetProvider = new ethers.providers.JsonRpcProvider(bscTestnetRpcUrl);\r\n\r\n\r\n\r\n\r\nfunction App() {\r\n  const [web3Modal, setWeb3Modal] = useState(null);\r\n  const [provider, setProvider] = useState(null);\r\n  const [walletConnected, setWalletConnected] = useState(false);\r\n  const [walletAddress, setWalletAddress] = useState('');\r\n\r\n  const [productInfo, setProductInfo] = useState(null);\r\n  const [productId, setProductId] = useState('');\r\n  const [productPrice, setProductPrice] = useState(null);\r\n  const [bnbToUsdRate, setBnbToUsdRate] = useState(null);\r\n  const [selectedCurrency, setSelectedCurrency] = useState('USD');\r\n  const [convertedPrice, setConvertedPrice] = useState(null);\r\n\r\n\r\n\r\n\r\n\r\n\r\n  \r\n  // Initialisation de Web3Modal pour la connexion aux portefeuilles\r\n  useEffect(() => {\r\n  const modal = new Web3Modal({\r\n    cacheProvider: true, // Gardera en cache la dernière connexion\r\n    providerOptions: {\r\n      walletconnect: {\r\n        package: WalletConnectProvider, // Utilisation de WalletConnectProvider\r\n        options: {\r\n          infuraId: \"e759bc5af90042a1b66c5a01aae905af\" // Remplace avec ton propre infura ID\r\n        }\r\n      },\r\n      metamask: {\r\n        package: null, // MetaMask ne nécessite pas de package\r\n        \r\n      },\r\n      trustwallet: {\r\n        package: WalletConnectProvider, // Utilisation de WalletConnectProvider pour Trust Wallet\r\n        options: {\r\n          infuraId: \"pDtEhrK4AAiPfirK7qsQI25NJlgrtMu1bBcFDqV4J95GTCAR2d/8Lg\" // Remplace avec ton propre infura ID\r\n        }\r\n      },\r\n      \r\n      // Ajoute d'autres options de portefeuille ici si nécessaire (par exemple : Fortmatic, etc.)\r\n    }\r\n  });\r\n\r\n  setWeb3Modal(modal);\r\n\r\n  // Vérifie si la modale est présente dans le DOM\r\n  const interval = setInterval(() => {\r\n    const web3ModalElement = document.querySelector('.web3-modal-container');\r\n    if (web3ModalElement) {\r\n      web3ModalElement.style.zIndex = '999999'; // Modale au-dessus de tout\r\n      clearInterval(interval);\r\n    }\r\n  }, 100);\r\n\r\n  return () => clearInterval(interval);\r\n\r\n}, []);\r\n\r\n  \r\n\r\n\r\n  // Masquer l'iframe si elle est présente\r\n  const hideIframe = () => {\r\n    const iframe = document.querySelector('iframe');\r\n    if (iframe) {\r\n      iframe.style.display = 'none'; // ou iframe.remove() si tu préfères\r\n    }\r\n  };\r\n\r\n  // Appel de la fonction pour masquer l'iframe au moment où Web3Modal est chargé\r\n  hideIframe();\r\n  \r\n\r\n  // Fonction pour reconnecter MetaMask\r\n  const reconnectToMetaMask = async () => {\r\n    if (typeof window.ethereum === \"undefined\") {\r\n      alert(\"MetaMask n'est pas installé !\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      \r\n      await window.ethereum.request({\r\n        method: 'wallet_requestPermissions',\r\n        params: [{\r\n          eth_accounts: {}\r\n        }]\r\n      });\r\n\r\n      setTimeout(async () => {\r\n        const accounts = await window.ethereum.request({\r\n          method: 'eth_requestAccounts',\r\n        });\r\n\r\n        const provider = new ethers.providers.Web3Provider(window.ethereum);\r\n        const signer = provider.getSigner();\r\n        const address = await signer.getAddress();\r\n\r\n        setWalletAddress(address);\r\n        setWalletConnected(true);\r\n        alert(`Compte connecté : ${address}`);\r\n      }, 1000);\r\n    } catch (error) {\r\n      console.error('Erreur de connexion à MetaMask :', error);\r\n      alert('Échec de la connexion à MetaMask.');\r\n    }\r\n  };\r\n\r\n\r\n  // Connexion au wallet via Web3Modal\r\n  const connectWallet = async () => {\r\n    if (!web3Modal) {\r\n      console.error(\"Web3Modal non initialisé\");\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      console.log(\"Tentative de connexion au wallet...\");\r\n      \r\n      \r\n      // Connexion via Web3Modal\r\n      const instance = await web3Modal.connect();\r\n      const newProvider = new ethers.providers.Web3Provider(instance);\r\n      \r\n      // S'assurer que le provider est correctement défini\r\n      if (!newProvider) {\r\n        console.error(\"Le fournisseur Web3 n'a pas été correctement créé\");\r\n        return;\r\n      }\r\n      \r\n      setProvider(newProvider);\r\n  \r\n      // Récupérer l'adresse du wallet\r\n      const signer = newProvider.getSigner();\r\n      const address = await signer.getAddress();\r\n      \r\n      setWalletAddress(address);\r\n      setWalletConnected(true);\r\n      \r\n      console.log(`Wallet connecté: ${address}`);\r\n    } catch (error) {\r\n      console.error(\"Erreur lors de la connexion au portefeuille:\", error);\r\n      alert(\"Erreur de connexion au portefeuille. Veuillez connecter votre wallet.\");\r\n      // Ferme Web3Modal\r\n      web3Modal.clearCachedProvider();\r\n\r\n      // Relance le processus de reconnexion via MetaMask\r\n      try {\r\n        if (typeof window.ethereum !== \"undefined\") {\r\n          await reconnectToMetaMask();\r\n        } else {\r\n          alert(\"MetaMask n'est pas installé.\");\r\n        }\r\n      } catch (retryError) {\r\n        console.error(\"Échec de la reconnexion à MetaMask\", retryError);\r\n        alert(\"La reconnexion à MetaMask a échoué.\");\r\n      }\r\n    }\r\n  };\r\n  \r\n\r\n  // Récupération du taux de conversion BNB vers USD\r\n  const fetchBnbToUsdRate = async () => {\r\n    try {\r\n      const response = await axios.get('https://api.coingecko.com/api/v3/simple/price?ids=binancecoin&vs_currencies=usd');\r\n      setBnbToUsdRate(response.data.binancecoin.usd);\r\n    } catch (error) {\r\n      console.error('Erreur lors de la récupération du taux BNB -> USD', error);\r\n    }\r\n  };\r\n\r\n   // Charger les données du contrat et les informations du produit\r\n   useEffect(() => {\r\n    const loadBlockchainData = async () => {\r\n      if (provider) {\r\n        const contractAddress = '0xD62B5CFdDfd26F6219E4BF366d9DB6B1450D5905';\r\n        const contractABI = \r\n[\r\n    {\r\n        \"inputs\": [\r\n            {\r\n                \"internalType\": \"address\",\r\n                \"name\": \"token\",\r\n                \"type\": \"address\"\r\n            }\r\n        ],\r\n        \"name\": \"addAllowedToken\",\r\n        \"outputs\": [],\r\n        \"stateMutability\": \"nonpayable\",\r\n        \"type\": \"function\"\r\n    },\r\n    {\r\n        \"inputs\": [\r\n            {\r\n                \"internalType\": \"address\",\r\n                \"name\": \"token\",\r\n                \"type\": \"address\"\r\n            },\r\n            {\r\n                \"internalType\": \"uint256\",\r\n                \"name\": \"amount\",\r\n                \"type\": \"uint256\"\r\n            },\r\n            {\r\n                \"internalType\": \"string\",\r\n                \"name\": \"productId\",\r\n                \"type\": \"string\"\r\n            }\r\n        ],\r\n        \"name\": \"pay\",\r\n        \"outputs\": [],\r\n        \"stateMutability\": \"payable\",\r\n        \"type\": \"function\"\r\n    },\r\n    {\r\n        \"inputs\": [\r\n            {\r\n                \"internalType\": \"address\",\r\n                \"name\": \"token\",\r\n                \"type\": \"address\"\r\n            }\r\n        ],\r\n        \"name\": \"removeAllowedToken\",\r\n        \"outputs\": [],\r\n        \"stateMutability\": \"nonpayable\",\r\n        \"type\": \"function\"\r\n    },\r\n    {\r\n        \"inputs\": [\r\n            {\r\n                \"internalType\": \"address[]\",\r\n                \"name\": \"tokens\",\r\n                \"type\": \"address[]\"\r\n            }\r\n        ],\r\n        \"stateMutability\": \"nonpayable\",\r\n        \"type\": \"constructor\"\r\n    },\r\n    {\r\n        \"anonymous\": false,\r\n        \"inputs\": [\r\n            {\r\n                \"indexed\": true,\r\n                \"internalType\": \"address\",\r\n                \"name\": \"user\",\r\n                \"type\": \"address\"\r\n            },\r\n            {\r\n                \"indexed\": false,\r\n                \"internalType\": \"uint256\",\r\n                \"name\": \"amount\",\r\n                \"type\": \"uint256\"\r\n            },\r\n            {\r\n                \"indexed\": false,\r\n                \"internalType\": \"address\",\r\n                \"name\": \"token\",\r\n                \"type\": \"address\"\r\n            },\r\n            {\r\n                \"indexed\": false,\r\n                \"internalType\": \"string\",\r\n                \"name\": \"productId\",\r\n                \"type\": \"string\"\r\n            }\r\n        ],\r\n        \"name\": \"PaymentReceived\",\r\n        \"type\": \"event\"\r\n    },\r\n    {\r\n        \"inputs\": [\r\n            {\r\n                \"internalType\": \"string\",\r\n                \"name\": \"productId\",\r\n                \"type\": \"string\"\r\n            }\r\n        ],\r\n        \"name\": \"removeProduct\",\r\n        \"outputs\": [],\r\n        \"stateMutability\": \"nonpayable\",\r\n        \"type\": \"function\"\r\n    },\r\n    {\r\n        \"inputs\": [\r\n            {\r\n                \"internalType\": \"string\",\r\n                \"name\": \"productId\",\r\n                \"type\": \"string\"\r\n            },\r\n            {\r\n                \"internalType\": \"uint256\",\r\n                \"name\": \"price\",\r\n                \"type\": \"uint256\"\r\n            }\r\n        ],\r\n        \"name\": \"setProductPrice\",\r\n        \"outputs\": [],\r\n        \"stateMutability\": \"nonpayable\",\r\n        \"type\": \"function\"\r\n    },\r\n    {\r\n        \"inputs\": [\r\n            {\r\n                \"internalType\": \"uint256\",\r\n                \"name\": \"amount\",\r\n                \"type\": \"uint256\"\r\n            }\r\n        ],\r\n        \"name\": \"withdraw\",\r\n        \"outputs\": [],\r\n        \"stateMutability\": \"nonpayable\",\r\n        \"type\": \"function\"\r\n    },\r\n    {\r\n        \"inputs\": [\r\n            {\r\n                \"internalType\": \"address\",\r\n                \"name\": \"token\",\r\n                \"type\": \"address\"\r\n            },\r\n            {\r\n                \"internalType\": \"uint256\",\r\n                \"name\": \"amount\",\r\n                \"type\": \"uint256\"\r\n            }\r\n        ],\r\n        \"name\": \"withdrawToken\",\r\n        \"outputs\": [],\r\n        \"stateMutability\": \"nonpayable\",\r\n        \"type\": \"function\"\r\n    },\r\n    {\r\n        \"inputs\": [\r\n            {\r\n                \"internalType\": \"address\",\r\n                \"name\": \"\",\r\n                \"type\": \"address\"\r\n            }\r\n        ],\r\n        \"name\": \"allowedTokens\",\r\n        \"outputs\": [\r\n            {\r\n                \"internalType\": \"bool\",\r\n                \"name\": \"\",\r\n                \"type\": \"bool\"\r\n            }\r\n        ],\r\n        \"stateMutability\": \"view\",\r\n        \"type\": \"function\"\r\n    },\r\n    {\r\n        \"inputs\": [\r\n            {\r\n                \"internalType\": \"address\",\r\n                \"name\": \"token\",\r\n                \"type\": \"address\"\r\n            }\r\n        ],\r\n        \"name\": \"isTokenAllowed\",\r\n        \"outputs\": [\r\n            {\r\n                \"internalType\": \"bool\",\r\n                \"name\": \"\",\r\n                \"type\": \"bool\"\r\n            }\r\n        ],\r\n        \"stateMutability\": \"view\",\r\n        \"type\": \"function\"\r\n    },\r\n    {\r\n        \"inputs\": [],\r\n        \"name\": \"owner\",\r\n        \"outputs\": [\r\n            {\r\n                \"internalType\": \"address\",\r\n                \"name\": \"\",\r\n                \"type\": \"address\"\r\n            }\r\n        ],\r\n        \"stateMutability\": \"view\",\r\n        \"type\": \"function\"\r\n    },\r\n    {\r\n        \"inputs\": [\r\n            {\r\n                \"internalType\": \"string\",\r\n                \"name\": \"\",\r\n                \"type\": \"string\"\r\n            }\r\n        ],\r\n        \"name\": \"products\",\r\n        \"outputs\": [\r\n            {\r\n                \"internalType\": \"uint256\",\r\n                \"name\": \"price\",\r\n                \"type\": \"uint256\"\r\n            },\r\n            {\r\n                \"internalType\": \"bool\",\r\n                \"name\": \"exists\",\r\n                \"type\": \"bool\"\r\n            }\r\n        ],\r\n        \"stateMutability\": \"view\",\r\n        \"type\": \"function\"\r\n    }\r\n];\r\n\r\n\r\n\r\n\r\n        const contractInstance = new ethers.Contract(contractAddress, contractABI, provider.getSigner());\r\n        \r\n        try {\r\n          const productDetails = await contractInstance.products(\"product1\");\r\n          setProductInfo(productDetails);\r\n          setProductPrice(productDetails.price);\r\n        } catch (error) {\r\n          console.error(\"Erreur lors de la récupération des informations du produit:\", error);\r\n        }\r\n      }\r\n    };\r\n\r\n    loadBlockchainData();\r\n    fetchBnbToUsdRate();\r\n  }, [provider]);\r\n\r\n\r\n\r\n  \r\n\r\n  const sendTransaction = async (amountIn) => {\r\n    if (!provider) {\r\n      alert(\"Le provider n'est pas défini, veuillez connecter votre wallet.\");\r\n      return;\r\n    }\r\n  \r\n    try {\r\n      // Utilise le provider et signer déjà définis via Web3Modal\r\n      const signer = provider.getSigner();\r\n      const amountInEther = ethers.utils.parseUnits(amountIn.toString(), 18);\r\n  \r\n      // Obtenez le prix du gaz actuel\r\n      const gasPrice = await provider.getGasPrice();\r\n      const adjustedGasPrice = gasPrice.mul(2); // Augmenter le prix du gaz pour garantir l'exécution\r\n  \r\n      // Vérifiez que vous avez assez de fonds\r\n      const walletBalance = await provider.getBalance(signer.getAddress());\r\n      if (walletBalance.lt(amountInEther.add(adjustedGasPrice))) {\r\n        alert(\"Solde insuffisant pour couvrir la transaction et les frais de gaz.\");\r\n        return;\r\n      }\r\n  \r\n      // Préparez la transaction\r\n      const tx = {\r\n        to: contractAddress,\r\n        value: amountInEther,\r\n        gasLimit: 100000, // Limite de gaz pour l'interaction avec un contrat\r\n        gasPrice: adjustedGasPrice // Utilisez le prix ajusté du gaz\r\n      };\r\n  \r\n      // Envoyer la transaction\r\n      const transactionResponse = await signer.sendTransaction(tx);\r\n      console.log(\"Transaction envoyée, hash:\", transactionResponse.hash);\r\n  \r\n      // Attendez la confirmation de la transaction\r\n      const receipt = await transactionResponse.wait();\r\n      console.log(\"Transaction confirmée dans le bloc:\", receipt.blockNumber);\r\n\r\n      // Rediriger vers une nouvelle page après la transaction réussie\r\n      window.location.href = '/Delivrance_IndicateurD.html';  // Remplace '/confirmation.html' par le chemin de la page HTML\r\n\r\n  \r\n    } catch (error) {\r\n      console.error(\"Erreur lors de l'envoi de la transaction:\", error);\r\n      alert(\"Une erreur s'est produite lors de l'envoi de la transaction.\");\r\n    }\r\n  };\r\n\r\n\r\n  const checkNetwork = async () => {\r\n    if (typeof window.ethereum !== \"undefined\") {\r\n      const network = await window.ethereum.request({\r\n        method: 'eth_chainId'\r\n      });\r\n  \r\n      // Vérifie si l'utilisateur est bien sur BSC Testnet (chainId 97)\r\n      if (network !== '0x38') { // 0x38 est le chainId pour BSC Mainnet\r\n        alert(\"Veuillez vous connecter au réseau Binance Smart Chain Mainnet.\");\r\n        return false;\r\n      }\r\n      \r\n      return true;\r\n    } else {\r\n      console.error(\"Ethereum n'est pas disponible.\");\r\n      alert(\"MetaMask ou un autre portefeuille Ethereum n'est pas installé.\");\r\n      return false;\r\n    }\r\n  };\r\n\r\n\r\n\r\n\r\n\r\n\r\n  // Fonction pour réinitialiser le provider\r\n  const resetProvider = async () => {\r\n    try {\r\n      if (typeof window.ethereum !== \"undefined\") {\r\n        const newProvider = new ethers.providers.Web3Provider(window.ethereum);\r\n        setProvider(newProvider); // Mettre à jour le provider\r\n\r\n        // Attendre que React ait bien mis à jour le provider\r\n        return newProvider.getSigner(); // Retourner le signer après que le provider ait été mis à jour\r\n      } else {\r\n        throw new Error(\"Aucun fournisseur Ethereum n'est disponible.\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Erreur dans resetProvider:\", error);\r\n      alert(\"Erreur lors de la réinitialisation du provider.\");\r\n      return null;\r\n    }\r\n  };\r\n\r\n  // Vérification du réseau à chaque fois qu'il change\r\n  useEffect(() => {\r\n    const changeNetworkHandler = async () => {\r\n      try {\r\n        await resetProvider(); // Remet à jour le provider lorsque le réseau change\r\n        console.log(\"Le provider a été réinitialisé après le changement de réseau.\");\r\n      } catch (error) {\r\n        console.error(\"Erreur lors du changement de réseau et réinitialisation du provider:\", error);\r\n      }\r\n    };\r\n\r\n    if (typeof window.ethereum !== \"undefined\") {\r\n      window.ethereum.on('chainChanged', changeNetworkHandler);\r\n    }\r\n\r\n    // Nettoyage quand le composant est démonté\r\n    return () => {\r\n      if (typeof window.ethereum !== \"undefined\") {\r\n        window.ethereum.removeListener('chainChanged', changeNetworkHandler);\r\n      }\r\n    };\r\n  }, []);\r\n  \r\n  \r\n\r\n\r\n  // Fonction de gestion du paiement\r\n  const handlePayment = async () => {\r\n    if (!walletConnected) {\r\n      alert(\"Veuillez connecter votre wallet avant de procéder.\");\r\n      return;\r\n    }\r\n\r\n    // Vérifie que l'utilisateur est sur le bon réseau\r\n  const isCorrectNetwork = await checkNetwork();\r\n  if (!isCorrectNetwork) {\r\n    return; // Ne pas procéder à la transaction si l'utilisateur n'est pas sur le bon réseau\r\n  }\r\n  // Vérifier que le provider est disponible\r\n  if (!provider) {\r\n    alert(\" Reconnection au provider effectué. Veuillez renouveler l'opération \");\r\n    return;\r\n  }\r\n\r\n  // Assurez-vous que le provider est bien à jour avant de procéder à la transaction\r\n  await resetProvider(); // Réinitialise le provider si nécessaire\r\n\r\n    if (productId && productPrice) {\r\n      let amountIn = 0;\r\n      try {\r\n        // Calculer le montant à envoyer en fonction de la devise sélectionnée\r\n        if (selectedCurrency === 'USD') {\r\n          amountIn = productPrice; // Pas de conversion nécessaire si en USD\r\n        } else if (selectedCurrency === 'BNB') {\r\n          // Si la devise est BNB, on effectue la conversion avec le taux BNB/USD\r\n          if (!bnbToUsdRate) {\r\n            alert(\"Le taux de conversion BNB vers USD est encore en cours de chargement.\");\r\n            return;\r\n          }\r\n          amountIn = productPrice / bnbToUsdRate;\r\n        }\r\n  \r\n        // Convertir le montant à un format acceptable (fixé à 18 décimales)\r\n        amountIn = parseFloat(amountIn).toFixed(18);\r\n        console.log('Montant final pour la transaction:', amountIn);\r\n  \r\n        // Envoyer la transaction\r\n        await sendTransaction(amountIn); // Attendre la réponse de la transaction\r\n      } catch (error) {\r\n        console.error(\"Erreur lors de l'envoi de la transaction:\", error.message);\r\n        alert(\"Une erreur s'est produite lors de l'envoi de la transaction. Vérifiez votre solde et les paramètres.\");\r\n      }\r\n    } else {\r\n      alert(\"Veuillez sélectionner un produit valide et essayer de nouveau.\");\r\n    }\r\n  };\r\n\r\n  // Liste des produits\r\n  const products = {\r\n    product1: { price: 5, exists: true },\r\n    product2: { price: 299, exists: true },\r\n    product3: { price: 499, exists: true }\r\n  };\r\n  \r\n  // Mise à jour des informations du produit sélectionné\r\n  const updateProductInfo = (selectedProductId) => {\r\n    setProductId(selectedProductId);\r\n    const productDetails = products[selectedProductId];\r\n  \r\n    if (productDetails) {\r\n      const { price, exists } = productDetails;\r\n      setProductPrice(price);\r\n      setProductInfo({ price, exists });\r\n  \r\n      if (selectedCurrency === 'USD') {\r\n        setConvertedPrice(price ? price.toString() : null);\r\n      } else if (selectedCurrency === 'BNB') {\r\n        setConvertedPrice(price ? (price / bnbToUsdRate).toString() : null);\r\n      }\r\n    } else {\r\n      console.error(\"Produit non trouvé !\");\r\n    }\r\n  };\r\n\r\n  // Gestion du changement de devise (USD ou BNB)\r\n  const handleCurrencyChange = (event) => {\r\n    const newCurrency = event.target.value;\r\n    setSelectedCurrency(newCurrency);\r\n\r\n    if (newCurrency === 'USD') {\r\n      setConvertedPrice(productPrice ? productPrice.toString() : null);\r\n    } else if (newCurrency === 'BNB') {\r\n      setConvertedPrice(productPrice ? (productPrice / bnbToUsdRate).toString() : null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      {/* Conteneur de parallax */}\r\n      <div className=\"parallax-container\">\r\n        <video id=\"video-background\" autoPlay loop muted>\r\n        <source src={process.env.PUBLIC_URL + \"/video/egyptfutur2.mp4\"} type=\"video/mp4\" />\r\n\r\n\r\n          Votre navigateur ne supporte pas les vidéos HTML5.\r\n        </video>\r\n\r\n        {/* Contenu défilant */}\r\n        <div className=\"content\">\r\n          \r\n\r\n          {/* Bouton de connexion du wallet en haut à droite */}\r\n          <div className=\"wallet-connect-button\">\r\n            <button\r\n      \r\n              onClick={connectWallet}\r\n              disabled={walletConnected} // Désactive le bouton une fois connecté\r\n            >\r\n              {walletConnected ? (\r\n                <>\r\n                  <span>Wallet connecté : {walletAddress}</span>\r\n                  <span className=\"arrow-icon\">→</span> {/* Icône flèche */}\r\n                </>\r\n              ) : (\r\n                'Connecter le wallet'\r\n              )}\r\n            </button>\r\n          </div>\r\n\r\n          {/* Conteneur du formulaire de paiement */}\r\n          <div className=\"payment-wrapper\">\r\n            <h1> Les Indicateurs à Levier </h1>\r\n\r\n            {productId && productInfo && (\r\n              <div>\r\n                <p>Produit choisi : {productId}</p>\r\n                <p>Prix du produit : {convertedPrice ? convertedPrice : 'Chargement...'} {selectedCurrency}</p>\r\n                <p>Le produit est {productInfo.exists ? 'disponible' : 'indisponible'}</p>\r\n              </div>\r\n            )}\r\n\r\n            <select onChange={(e) => updateProductInfo(e.target.value)} value={productId}>\r\n              <option value=\"\">Choisi Ton Indicateur</option>\r\n              <option value=\"product1\">Indicateur Daily</option>\r\n              <option value=\"product2\">Indicateur 4h/1h</option>\r\n              <option value=\"product3\">Indicateur 15mn</option>\r\n            </select>\r\n\r\n            <select onChange={handleCurrencyChange} value={selectedCurrency}>\r\n              <option value=\"USD\">USD</option>\r\n              <option value=\"BNB\">BNB</option>\r\n            </select>\r\n\r\n            <button onClick={handlePayment}>Acheter</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  \r\n  \r\n};\r\n\r\n\r\nexport default App;\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';  // Cette ligne doit être valide avec React 18\nimport App from './App';\nimport './index.css';  // Importation des fichiers CSS depuis 'src'\nimport './App.css';\n\n\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n"]}}