{"code":"(this[\"webpackJsonpFront-end-indicateur\"]=this[\"webpackJsonpFront-end-indicateur\"]||[]).push([[0],{186:function(e,t,n){},187:function(e,t,n){},211:function(e,t){},247:function(e,t){},249:function(e,t){},257:function(e,t){},304:function(e,t){},305:function(e,t){},332:function(e,t){},334:function(e,t){},442:function(e,t){},443:function(e,t){},446:function(e,t,n){\"use strict\";n.r(t);var a=n(11),o=n.n(a),r=n(189),i=n.n(r),s=n(190),c=n.n(s),l=n(25),u=n(449),d=n(112),p=(n(10),n(186),n(187),n(13));const y=\"0x55d398326f99059fF775485246999027B3197955\",b=[\"function balanceOf(address) view returns (uint256)\",\"function allowance(address, address) view returns (uint256)\",\"function approve(address spender, uint256 amount) public returns (bool)\",\"function transferFrom(address sender, address recipient, uint256 amount) public returns (bool)\"];new l.a.providers.JsonRpcProvider(\"https://bsc-dataseed.binance.org/\");var m=function(){const[e,t]=Object(a.useState)(null),[n,o]=Object(a.useState)(null),[r,i]=Object(a.useState)(!1),[s,m]=Object(a.useState)(\"\"),[f,w]=Object(a.useState)(null),[h,v]=Object(a.useState)(null),[g,j]=Object(a.useState)(\"\"),[x,S]=Object(a.useState)(null),[T,O]=Object(a.useState)(null),[k,M]=Object(a.useState)(\"USD\"),[P,B]=Object(a.useState)(null),[D,E]=Object(a.useState)(null),I={product1:{price:5,exists:!0,title:\"Indicateur Daily\"},product2:{price:295,exists:!0,title:\"Indicateur 4h/1h\"},product3:{price:495,exists:!0,title:\"Indicateur 15mn\"}};Object(a.useEffect)((()=>{const e=new c.a({cacheProvider:!0,providerOptions:{walletconnect:{package:d.a,options:{infuraId:\"e759bc5af90042a1b66c5a01aae905af\"}},metamask:{package:null},trustwallet:{package:d.a,options:{infuraId:\"pDtEhrK4AAiPfirK7qsQI25NJlgrtMu1bBcFDqV4J95GTCAR2d/8Lg\"}}}});t(e);const n=setInterval((()=>{const e=document.querySelector(\".web3-modal-container\");e&&(e.style.zIndex=\"999999\",clearInterval(n))}),100);return()=>clearInterval(n)}),[]),(()=>{const e=document.querySelector(\"iframe\");e&&(e.style.display=\"none\")})(),Object(a.useEffect)((()=>{(async()=>{if(n){const t=\"0xCd25eee89Bb01603f0E0cf8D8C243966a926761d\",a=[{inputs:[{internalType:\"address\",name:\"token\",type:\"address\"}],name:\"addAllowedToken\",outputs:[],stateMutability:\"nonpayable\",type:\"function\"},{inputs:[{internalType:\"address\",name:\"token\",type:\"address\"},{internalType:\"uint256\",name:\"amount\",type:\"uint256\"},{internalType:\"string\",name:\"productId\",type:\"string\"}],name:\"pay\",outputs:[],stateMutability:\"payable\",type:\"function\"},{inputs:[{internalType:\"address\",name:\"token\",type:\"address\"}],name:\"removeAllowedToken\",outputs:[],stateMutability:\"nonpayable\",type:\"function\"},{inputs:[{internalType:\"address[]\",name:\"tokens\",type:\"address[]\"}],stateMutability:\"nonpayable\",type:\"constructor\"},{anonymous:!1,inputs:[{indexed:!0,internalType:\"address\",name:\"user\",type:\"address\"},{indexed:!1,internalType:\"uint256\",name:\"amount\",type:\"uint256\"},{indexed:!1,internalType:\"address\",name:\"token\",type:\"address\"},{indexed:!1,internalType:\"string\",name:\"productId\",type:\"string\"}],name:\"PaymentReceived\",type:\"event\"},{inputs:[{internalType:\"string\",name:\"productId\",type:\"string\"}],name:\"removeProduct\",outputs:[],stateMutability:\"nonpayable\",type:\"function\"},{inputs:[{internalType:\"string\",name:\"productId\",type:\"string\"},{internalType:\"uint256\",name:\"price\",type:\"uint256\"}],name:\"setProductPrice\",outputs:[],stateMutability:\"nonpayable\",type:\"function\"},{inputs:[{internalType:\"uint256\",name:\"amount\",type:\"uint256\"}],name:\"withdraw\",outputs:[],stateMutability:\"nonpayable\",type:\"function\"},{inputs:[{internalType:\"address\",name:\"token\",type:\"address\"},{internalType:\"uint256\",name:\"amount\",type:\"uint256\"}],name:\"withdrawToken\",outputs:[],stateMutability:\"nonpayable\",type:\"function\"},{inputs:[{internalType:\"address\",name:\"\",type:\"address\"}],name:\"allowedTokens\",outputs:[{internalType:\"bool\",name:\"\",type:\"bool\"}],stateMutability:\"view\",type:\"function\"},{inputs:[{internalType:\"address\",name:\"token\",type:\"address\"}],name:\"isTokenAllowed\",outputs:[{internalType:\"bool\",name:\"\",type:\"bool\"}],stateMutability:\"view\",type:\"function\"},{inputs:[],name:\"owner\",outputs:[{internalType:\"address\",name:\"\",type:\"address\"}],stateMutability:\"view\",type:\"function\"},{inputs:[{internalType:\"string\",name:\"\",type:\"string\"}],name:\"products\",outputs:[{internalType:\"uint256\",name:\"price\",type:\"uint256\"},{internalType:\"bool\",name:\"exists\",type:\"bool\"}],stateMutability:\"view\",type:\"function\"}],o=new l.a.Contract(t,a,n.getSigner());try{const e=await o.products(\"product1\");w(e),S(e.price)}catch(e){console.error(\"Erreur lors de la r\\xe9cup\\xe9ration des informations du produit:\",e)}E(o)}})(),(async()=>{try{const e=await u.a.get(\"https://api.coingecko.com/api/v3/simple/price?ids=binancecoin&vs_currencies=usd\");O(e.data.binancecoin.usd)}catch(e){console.error(\"Erreur lors de la r\\xe9cup\\xe9ration du taux BNB -> USD\",e)}})()}),[n]);const C=async e=>{try{if(!D)throw new Error(\"Le contrat n'est pas initialis\\xe9.\");const t=I[h];if(console.log(\"D\\xe9tails du produit s\\xe9lectionn\\xe9:\",t),!t||!t.exists||t.price<=0)throw new Error(\"Produit invalide ou prix incorrect.\");const n=l.a.utils.parseUnits(e.toString(),\"USDT\"===k?6:18);console.log(\"Montant en Wei pour la transaction:\",n.toString());const a=await D.buyProduct(h,n,{value:\"BNB\"===k?n:0}),o=await a.wait();console.log(\"Transaction r\\xe9ussie:\",o),alert(\"Paiement effectu\\xe9 avec succ\\xe8s !\")}catch(t){console.error(\"Erreur lors du paiement:\",t),alert(\"Une erreur s'est produite lors du paiement. Veuillez r\\xe9essayer.\")}},[U,A]=Object(a.useState)(!1),[N,q]=Object(a.useState)(!1),z=async e=>{try{const t=new l.a.Contract(y,b,n.getSigner());console.log(\"Demande d'approbation pour un montant de:\",e.toString());const a=await t.approve(D.address,e);console.log(\"Transaction d'approbation envoy\\xe9e:\",a.hash);1===(await a.wait()).status?console.log(\"Approvisionnement effectu\\xe9 avec succ\\xe8s !\"):console.error(\"La transaction d'approbation a \\xe9chou\\xe9.\"),await C(e)}catch(t){console.error(\"Erreur lors de l'approbation du token\",t),alert(\"\\xc9chec de l'approbation du token.\")}};return Object(p.jsxs)(\"div\",{className:\"App\",children:[Object(p.jsx)(\"h1\",{children:\"Test de Paiement Multi-Produits avec Blockchain\"}),Object(p.jsx)(\"button\",{onClick:async()=>{if(e)try{console.log(\"Tentative de connexion au wallet...\");const t=await e.connect(),n=new l.a.providers.Web3Provider(t);if(!n)return void console.error(\"Le fournisseur Web3 n'a pas \\xe9t\\xe9 correctement cr\\xe9\\xe9\");o(n);const a=n.getSigner(),r=await a.getAddress();m(r),i(!0),console.log(`Wallet connect\\xe9: ${r}`)}catch(t){console.error(\"Erreur lors de la connexion au portefeuille:\",t),alert(\"Erreur de connexion au portefeuille. Veuillez connecter votre wallet.\"),e.clearCachedProvider();try{\"undefined\"!==typeof window.ethereum?await(async()=>{if(\"undefined\"!==typeof window.ethereum)try{await window.ethereum.request({method:\"wallet_requestPermissions\",params:[{eth_accounts:{}}]}),setTimeout((async()=>{await window.ethereum.request({method:\"eth_requestAccounts\"});const e=new l.a.providers.Web3Provider(window.ethereum).getSigner(),t=await e.getAddress();m(t),i(!0),alert(`Compte connect\\xe9 : ${t}`)}),1e3)}catch(t){console.error(\"Erreur de connexion \\xe0 MetaMask :\",t),alert(\"\\xc9chec de la connexion \\xe0 MetaMask.\")}else alert(\"MetaMask n'est pas install\\xe9 !\")})():alert(\"MetaMask n'est pas install\\xe9.\")}catch(n){console.error(\"\\xc9chec de la reconnexion \\xe0 MetaMask\",n),alert(\"La reconnexion \\xe0 MetaMask a \\xe9chou\\xe9.\")}}else console.error(\"Web3Modal non initialis\\xe9\")},children:r?`Wallet connect\\xe9 : ${s}`:\"Connecter le wallet\"}),g&&f&&Object(p.jsxs)(\"div\",{children:[Object(p.jsxs)(\"p\",{children:[\"Produit choisi : \",g]}),Object(p.jsxs)(\"p\",{children:[\"Prix du produit : \",P||\"Chargement...\",\" \",k]}),Object(p.jsxs)(\"p\",{children:[\"Le produit est \",f.exists?\"disponible\":\"indisponible\"]})]}),Object(p.jsxs)(\"select\",{onChange:e=>(e=>{j(e);const t=I[e];if(t){const{price:e,exists:n}=t;S(e),w({price:e,exists:n}),\"USD\"===k?B(e?e.toString():null):\"BNB\"===k&&B(e?(e/T).toString():null)}else console.error(\"Produit non trouv\\xe9 !\")})(e.target.value),value:g,children:[Object(p.jsx)(\"option\",{value:\"\",children:\"S\\xe9lectionnez un produit\"}),Object(p.jsx)(\"option\",{value:\"product1\",children:\"Produit 1\"}),Object(p.jsx)(\"option\",{value:\"product2\",children:\"Produit 2\"}),Object(p.jsx)(\"option\",{value:\"product3\",children:\"Produit 3\"})]}),Object(p.jsxs)(\"select\",{onChange:e=>{const t=e.target.value;M(t),\"USD\"===t?B(x?x.toString():null):\"BNB\"===t&&B(x?(x/T).toString():null)},value:k,children:[Object(p.jsx)(\"option\",{value:\"USD\",children:\"USD\"}),Object(p.jsx)(\"option\",{value:\"BNB\",children:\"BNB\"})]}),Object(p.jsx)(\"button\",{onClick:async()=>{if(r)if(g&&x){let t=0;try{if(\"USD\"===k)t=x;else{if(\"BNB\"!==k)return void alert(\"Devise non support\\xe9e pour ce paiement.\");if(!T)return void alert(\"Le taux de conversion BNB vers USD est en cours de chargement.\");t=x/T}t=parseFloat(t).toFixed(18),console.log(\"Montant pour la transaction:\",t),await(async e=>{try{const t=new l.a.Contract(y,b,n.getSigner());(await t.allowance(s,D.address)).lt(e)?(console.log(\"Allowance insuffisante, demande d'approbation...\"),await z(e)):console.log(\"Allowance suffisante\")}catch(t){console.error(\"Erreur lors de la v\\xe9rification de l'allowance\",t)}})(l.a.utils.parseUnits(t.toString(),\"USDT\"===k?6:18)),console.log(\"Paiement pr\\xeat \\xe0 \\xeatre effectu\\xe9.\"),await C(t),console.log(\"Transaction envoy\\xe9e.\")}catch(e){console.error(\"Erreur lors du calcul du montant:\",e.message),alert(\"Une erreur s'est produite. Veuillez v\\xe9rifier vos param\\xe8tres.\")}}else alert(\"Veuillez s\\xe9lectionner un produit valide.\");else alert(\"Veuillez connecter votre wallet avant de proc\\xe9der.\")},children:\"Payer pour le produit\"})]})};i.a.createRoot(document.getElementById(\"root\")).render(Object(p.jsx)(o.a.StrictMode,{children:Object(p.jsx)(m,{})}))}},[[446,1,2]]]);","name":"static/js/main.e77f7950.chunk.js","map":{"version":3,"names":["this","push","module","exports","__webpack_require__","__webpack_exports__","r","react","react_default","n","client","client_default","dist","dist_default","lib_esm","axios","esm","jsx_runtime","usdtAddress","usdtABI","providers","JsonRpcProvider","src_App","web3Modal","setWeb3Modal","Object","provider","setProvider","walletConnected","setWalletConnected","walletAddress","setWalletAddress","productInfo","setProductInfo","selectedProductId","setSelectedProductId","productId","setProductId","productPrice","setProductPrice","bnbToUsdRate","setBnbToUsdRate","selectedCurrency","setSelectedCurrency","convertedPrice","setConvertedPrice","contractInstance","setContractInstance","products","product1","price","exists","title","product2","product3","modal","a","cacheProvider","providerOptions","walletconnect","package","options","infuraId","metamask","trustwallet","interval","setInterval","web3ModalElement","document","querySelector","style","zIndex","clearInterval","iframe","display","hideIframe","async","contractAddress","contractABI","inputs","internalType","name","type","outputs","stateMutability","anonymous","indexed","contract","Contract","getSigner","productDetails","error","console","loadBlockchainData","response","get","data","binancecoin","usd","fetchBnbToUsdRate","payForProduct","Error","log","priceInWei","utils","parseUnits","amountIn","toString","tx","buyProduct","value","receipt","wait","alert","loading","setLoading","transactionInProgress","setTransactionInProgress","approveToken","tokenContract","amount","approve","address","hash","status","className","children","onClick","instance","connect","newProvider","Web3Provider","signer","getAddress","clearCachedProvider","window","ethereum","request","method","params","eth_accounts","setTimeout","reconnectToMetaMask","retryError","onChange","e","updateProductInfo","target","event","newCurrency","parseFloat","toFixed","allowance","lt","checkAllowance","message","createRoot","getElementById","render","StrictMode"],"sources":["static/js/main.e77f7950.chunk.js"],"mappings":"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","ignoreList":[]},"input":"(this[\"webpackJsonpFront-end-indicateur\"] = this[\"webpackJsonpFront-end-indicateur\"] || []).push([[0],{\n\n/***/ 186:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 187:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 211:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 247:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 249:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 257:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 304:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 305:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 332:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 334:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 442:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 443:\n/***/ (function(module, exports) {\n\n/* (ignored) */\n\n/***/ }),\n\n/***/ 446:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(11);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/client.js\nvar client = __webpack_require__(189);\nvar client_default = /*#__PURE__*/__webpack_require__.n(client);\n\n// EXTERNAL MODULE: ./node_modules/web3modal/dist/index.js\nvar dist = __webpack_require__(190);\nvar dist_default = /*#__PURE__*/__webpack_require__.n(dist);\n\n// EXTERNAL MODULE: ./node_modules/ethers/lib.esm/index.js + 106 modules\nvar lib_esm = __webpack_require__(25);\n\n// EXTERNAL MODULE: ../node_modules/axios/lib/axios.js + 43 modules\nvar axios = __webpack_require__(449);\n\n// EXTERNAL MODULE: ./node_modules/@walletconnect/web3-provider/dist/esm/index.js + 8 modules\nvar esm = __webpack_require__(112);\n\n// EXTERNAL MODULE: ./node_modules/process/browser.js\nvar browser = __webpack_require__(10);\n\n// EXTERNAL MODULE: ./src/App.css\nvar App = __webpack_require__(186);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(187);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(13);\n\n// CONCATENATED MODULE: ./src/App.js\n// Importation du fichier CSS\n// Ajoute cette ligne dans ton fichier JavaScript\n// Adresse du contrat USDT sur BSC (assure-toi que c'est l'adresse correcte pour le réseau que tu utilises)\nconst usdtAddress='0x55d398326f99059fF775485246999027B3197955';// Adresse du contrat USDT sur Binance Smart Chain\n// ABI pour le contrat USDT\nconst usdtABI=[\"function balanceOf(address) view returns (uint256)\",\"function allowance(address, address) view returns (uint256)\",\"function approve(address spender, uint256 amount) public returns (bool)\",\"function transferFrom(address sender, address recipient, uint256 amount) public returns (bool)\"];const App_contractAddress='0xCd25eee89Bb01603f0E0cf8D8C243966a926761d';const bscTestnetRpcUrl=\"https://bsc-dataseed.binance.org/\";// BSC Mainnet\nconst bscTestnetProvider=new lib_esm[\"a\" /* ethers */].providers.JsonRpcProvider(bscTestnetRpcUrl);function App_App(){const[web3Modal,setWeb3Modal]=Object(react[\"useState\"])(null);const[provider,setProvider]=Object(react[\"useState\"])(null);const[walletConnected,setWalletConnected]=Object(react[\"useState\"])(false);const[walletAddress,setWalletAddress]=Object(react[\"useState\"])('');const[productInfo,setProductInfo]=Object(react[\"useState\"])(null);const[selectedProductId,setSelectedProductId]=Object(react[\"useState\"])(null);// ou un ID de produit par défaut\nconst[productId,setProductId]=Object(react[\"useState\"])('');const[productPrice,setProductPrice]=Object(react[\"useState\"])(null);const[bnbToUsdRate,setBnbToUsdRate]=Object(react[\"useState\"])(null);const[selectedCurrency,setSelectedCurrency]=Object(react[\"useState\"])('USD');const[convertedPrice,setConvertedPrice]=Object(react[\"useState\"])(null);const[contractInstance,setContractInstance]=Object(react[\"useState\"])(null);// Déclarez `contractInstance` ici\nconst products={product1:{price:5,exists:true,title:\"Indicateur Daily\"},product2:{price:295,exists:true,title:\"Indicateur 4h/1h\"},product3:{price:495,exists:true,title:\"Indicateur 15mn\"}};// Initialisation de Web3Modal pour la connexion aux portefeuilles\nObject(react[\"useEffect\"])(()=>{const modal=new dist_default.a({cacheProvider:true,// Gardera en cache la dernière connexion\nproviderOptions:{walletconnect:{package:esm[\"a\" /* default */],// Utilisation de WalletConnectProvider\noptions:{infuraId:\"e759bc5af90042a1b66c5a01aae905af\"// Remplace avec ton propre infura ID\n}},metamask:{package:null// MetaMask ne nécessite pas de package\n},trustwallet:{package:esm[\"a\" /* default */],// Utilisation de WalletConnectProvider pour Trust Wallet\noptions:{infuraId:\"pDtEhrK4AAiPfirK7qsQI25NJlgrtMu1bBcFDqV4J95GTCAR2d/8Lg\"// Remplace avec ton propre infura ID\n}}// Ajoute d'autres options de portefeuille ici si nécessaire (par exemple : Fortmatic, etc.)\n}});setWeb3Modal(modal);// Vérifie si la modale est présente dans le DOM\nconst interval=setInterval(()=>{const web3ModalElement=document.querySelector('.web3-modal-container');if(web3ModalElement){web3ModalElement.style.zIndex='999999';// Modale au-dessus de tout\nclearInterval(interval);}},100);return()=>clearInterval(interval);},[]);// Masquer l'iframe si elle est présente\nconst hideIframe=()=>{const iframe=document.querySelector('iframe');if(iframe){iframe.style.display='none';// ou iframe.remove() si tu préfères\n}};// Appel de la fonction pour masquer l'iframe au moment où Web3Modal est chargé\nhideIframe();// Fonction pour reconnecter MetaMask\nconst reconnectToMetaMask=async()=>{if(typeof window.ethereum===\"undefined\"){alert(\"MetaMask n'est pas installé !\");return;}try{await window.ethereum.request({method:'wallet_requestPermissions',params:[{eth_accounts:{}}]});setTimeout(async()=>{const accounts=await window.ethereum.request({method:'eth_requestAccounts'});const provider=new lib_esm[\"a\" /* ethers */].providers.Web3Provider(window.ethereum);const signer=provider.getSigner();const address=await signer.getAddress();setWalletAddress(address);setWalletConnected(true);alert(`Compte connecté : ${address}`);},1000);}catch(error){console.error('Erreur de connexion à MetaMask :',error);alert('Échec de la connexion à MetaMask.');}};// Connexion au wallet via Web3Modal\nconst connectWallet=async()=>{if(!web3Modal){console.error(\"Web3Modal non initialisé\");return;}try{console.log(\"Tentative de connexion au wallet...\");// Connexion via Web3Modal\nconst instance=await web3Modal.connect();const newProvider=new lib_esm[\"a\" /* ethers */].providers.Web3Provider(instance);// S'assurer que le provider est correctement défini\nif(!newProvider){console.error(\"Le fournisseur Web3 n'a pas été correctement créé\");return;}setProvider(newProvider);// Récupérer l'adresse du wallet\nconst signer=newProvider.getSigner();const address=await signer.getAddress();setWalletAddress(address);setWalletConnected(true);console.log(`Wallet connecté: ${address}`);}catch(error){console.error(\"Erreur lors de la connexion au portefeuille:\",error);alert(\"Erreur de connexion au portefeuille. Veuillez connecter votre wallet.\");// Ferme Web3Modal\nweb3Modal.clearCachedProvider();// Relance le processus de reconnexion via MetaMask\ntry{if(typeof window.ethereum!==\"undefined\"){await reconnectToMetaMask();}else{alert(\"MetaMask n'est pas installé.\");}}catch(retryError){console.error(\"Échec de la reconnexion à MetaMask\",retryError);alert(\"La reconnexion à MetaMask a échoué.\");}}};// Récupération du taux de conversion BNB vers USD\nconst fetchBnbToUsdRate=async()=>{try{const response=await axios[\"a\" /* default */].get('https://api.coingecko.com/api/v3/simple/price?ids=binancecoin&vs_currencies=usd');setBnbToUsdRate(response.data.binancecoin.usd);}catch(error){console.error('Erreur lors de la récupération du taux BNB -> USD',error);}};// Charger les données du contrat et les informations du produit\nObject(react[\"useEffect\"])(()=>{const loadBlockchainData=async()=>{if(provider){// Adresse du contrat et ABI\nconst contractAddress='0xCd25eee89Bb01603f0E0cf8D8C243966a926761d';const contractABI=[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"}],\"name\":\"addAllowedToken\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"string\",\"name\":\"productId\",\"type\":\"string\"}],\"name\":\"pay\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"}],\"name\":\"removeAllowedToken\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address[]\",\"name\":\"tokens\",\"type\":\"address[]\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"string\",\"name\":\"productId\",\"type\":\"string\"}],\"name\":\"PaymentReceived\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"productId\",\"type\":\"string\"}],\"name\":\"removeProduct\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"productId\",\"type\":\"string\"},{\"internalType\":\"uint256\",\"name\":\"price\",\"type\":\"uint256\"}],\"name\":\"setProductPrice\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"withdraw\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"withdrawToken\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"allowedTokens\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"}],\"name\":\"isTokenAllowed\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"name\":\"products\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"price\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"exists\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"}];// Crée une nouvelle instance du contrat avec le provider\nconst contract=new lib_esm[\"a\" /* ethers */].Contract(contractAddress,contractABI,provider.getSigner());// Appel direct à la méthode du contrat, sans attendre que contractInstance soit mis à jour\ntry{const productDetails=await contract.products(\"product1\");setProductInfo(productDetails);setProductPrice(productDetails.price);}catch(error){console.error(\"Erreur lors de la récupération des informations du produit:\",error);}// Stocke cette instance dans l'état\nsetContractInstance(contract);}};loadBlockchainData();fetchBnbToUsdRate();},[provider]);// Dépendance sur 'provider' uniquement, pas besoin de contractInstance ici\nconst payForProduct=async amountIn=>{try{// Vérifie que le contrat est bien initialisé\nif(!contractInstance){throw new Error(\"Le contrat n'est pas initialisé.\");}// Récupérer les détails du produit sélectionné\nconst productDetails=products[selectedProductId];// Utilise selectedProductId pour récupérer les détails du produit\nconsole.log(\"Détails du produit sélectionné:\",productDetails);if(!productDetails||!productDetails.exists||productDetails.price<=0){throw new Error(\"Produit invalide ou prix incorrect.\");}// Convertir le prix du produit en unités appropriées (wei pour Ethereum)\nconst priceInWei=lib_esm[\"a\" /* ethers */].utils.parseUnits(amountIn.toString(),selectedCurrency==='USDT'?6:18);// Conversion du montant en fonction de la devise\nconsole.log(\"Montant en Wei pour la transaction:\",priceInWei.toString());// Appel au contrat pour effectuer l'achat\nconst tx=await contractInstance.buyProduct(selectedProductId,// Identifiant du produit\npriceInWei,// Montant à envoyer (en fonction de la devise)\n{value:selectedCurrency==='BNB'?priceInWei:0}// Si c'est BNB, l'envoyer dans le champ 'value'\n);// Attendre que la transaction soit minée (confirmée)\nconst receipt=await tx.wait();console.log(\"Transaction réussie:\",receipt);// Effectuer des actions post-paiement, comme rediriger l'utilisateur, afficher un message de confirmation, etc.\nalert(\"Paiement effectué avec succès !\");}catch(error){console.error(\"Erreur lors du paiement:\",error);alert(\"Une erreur s'est produite lors du paiement. Veuillez réessayer.\");}};const[loading,setLoading]=Object(react[\"useState\"])(false);// Ajout de l'état loading\nconst[transactionInProgress,setTransactionInProgress]=Object(react[\"useState\"])(false);// Fonction pour approuver USDT\nconst approveUSDT=async amountToSend=>{const signer=new lib_esm[\"a\" /* ethers */].providers.Web3Provider(window.ethereum).getSigner();const usdtContract=new lib_esm[\"a\" /* ethers */].Contract(usdtAddress,usdtABI,signer);try{const allowance=await usdtContract.allowance(await signer.getAddress(),App_contractAddress);console.log(\"Allowance actuelle:\",allowance.toString());if(allowance.lt(amountToSend)){console.log(\"Allowance insuffisante, approbation en cours...\");const tx=await usdtContract.approve(App_contractAddress,amountToSend);const receipt=await tx.wait();if(receipt.status===1){console.log(\"Allowance mise à jour !\");}else{console.error(\"L'approbation de l'allowance a échoué.\");throw new Error(\"Échec de l'approbation de l'allowance.\");}}else{console.log(\"Allowance suffisante.\");}}catch(error){console.error(\"Erreur lors de l'approbation de l'allowance USDT :\",error);}};// Vérification de l'allowance\nconst checkAllowance=async amount=>{try{// Assure-toi de récupérer l'instance du token, par exemple USDT\nconst tokenContract=new lib_esm[\"a\" /* ethers */].Contract(usdtAddress,usdtABI,provider.getSigner());const allowance=await tokenContract.allowance(walletAddress,contractInstance.address);if(allowance.lt(amount)){// Si l'allowance est insuffisante, demander une approbation\nconsole.log(\"Allowance insuffisante, demande d'approbation...\");await approveToken(amount);}else{console.log(\"Allowance suffisante\");// Proceed with the payment if allowance is sufficient\n}}catch(error){console.error(\"Erreur lors de la vérification de l'allowance\",error);}};const approveToken=async amount=>{try{const tokenContract=new lib_esm[\"a\" /* ethers */].Contract(usdtAddress,usdtABI,provider.getSigner());console.log(\"Demande d'approbation pour un montant de:\",amount.toString());const tx=await tokenContract.approve(contractInstance.address,amount);console.log(\"Transaction d'approbation envoyée:\",tx.hash);// Attendre que la transaction soit confirmée\nconst receipt=await tx.wait();if(receipt.status===1){console.log(\"Approvisionnement effectué avec succès !\");}else{console.error(\"La transaction d'approbation a échoué.\");}// Une fois l'approbation effectuée, appeler la fonction de paiement\nawait payForProduct(amount);// Effectue le paiement après approbation\n}catch(error){console.error(\"Erreur lors de l'approbation du token\",error);alert(\"Échec de l'approbation du token.\");}};// Fonction pour le paiement\nconst handlePayment=async()=>{if(!walletConnected){alert(\"Veuillez connecter votre wallet avant de procéder.\");return;}if(productId&&productPrice){let amountIn=0;try{if(selectedCurrency==='USD'){amountIn=productPrice;}else if(selectedCurrency==='BNB'){if(!bnbToUsdRate){alert(\"Le taux de conversion BNB vers USD est en cours de chargement.\");return;}amountIn=productPrice/bnbToUsdRate;}else{alert(\"Devise non supportée pour ce paiement.\");return;}amountIn=parseFloat(amountIn).toFixed(18);// Conversion en format compatible Ethereum\nconsole.log('Montant pour la transaction:',amountIn);// Vérification de l'allowance et approbation si nécessaire\nawait checkAllowance(lib_esm[\"a\" /* ethers */].utils.parseUnits(amountIn.toString(),selectedCurrency==='USDT'?6:18));// Effectue le paiement une fois l'allowance confirmée\nconsole.log(\"Paiement prêt à être effectué.\");await payForProduct(amountIn);console.log(\"Transaction envoyée.\");}catch(error){console.error(\"Erreur lors du calcul du montant:\",error.message);alert(\"Une erreur s'est produite. Veuillez vérifier vos paramètres.\");}}else{alert(\"Veuillez sélectionner un produit valide.\");}};// Mise à jour des informations du produit\nconst updateProductInfo=selectedProductId=>{setProductId(selectedProductId);const productDetails=products[selectedProductId];if(productDetails){const{price,exists}=productDetails;setProductPrice(price);setProductInfo({price,exists});if(selectedCurrency==='USD'){setConvertedPrice(price?price.toString():null);}else if(selectedCurrency==='BNB'){setConvertedPrice(price?(price/bnbToUsdRate).toString():null);}}else{console.error(\"Produit non trouvé !\");}};// Gestion du changement de devise\nconst handleCurrencyChange=event=>{const newCurrency=event.target.value;setSelectedCurrency(newCurrency);if(newCurrency==='USD'){setConvertedPrice(productPrice?productPrice.toString():null);}else if(newCurrency==='BNB'){setConvertedPrice(productPrice?(productPrice/bnbToUsdRate).toString():null);}};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"App\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{children:\"Test de Paiement Multi-Produits avec Blockchain\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{onClick:connectWallet,children:walletConnected?`Wallet connecté : ${walletAddress}`:'Connecter le wallet'}),productId&&productInfo&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\"Produit choisi : \",productId]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\"Prix du produit : \",convertedPrice?convertedPrice:'Chargement...',\" \",selectedCurrency]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{children:[\"Le produit est \",productInfo.exists?'disponible':'indisponible']})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"select\",{onChange:e=>updateProductInfo(e.target.value),value:productId,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"\",children:\"S\\xE9lectionnez un produit\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"product1\",children:\"Produit 1\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"product2\",children:\"Produit 2\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"product3\",children:\"Produit 3\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"select\",{onChange:handleCurrencyChange,value:selectedCurrency,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"USD\",children:\"USD\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"BNB\",children:\"BNB\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{onClick:handlePayment,children:\"Payer pour le produit\"})]});};/* harmony default export */ var src_App = (App_App);\n// CONCATENATED MODULE: ./src/index.js\n// Cette ligne doit être valide avec React 18\n// Ajoute cette ligne dans ton fichier JavaScript\nconst root=client_default.a.createRoot(document.getElementById('root'));root.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{})}));\n\n/***/ })\n\n},[[446,1,2]]]);","inputSourceMap":{"version":3,"sources":["/home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/postcss-loader/src/index.js??postcss!/home/nypsus/mon-projet-deploiement/Front-end-indicateur/src/App.css","/home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/postcss-loader/src/index.js??postcss!/home/nypsus/mon-projet-deploiement/Front-end-indicateur/src/index.css","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/bn.js/lib buffer","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/node-libs-browser/node_modules/readable-stream/lib util","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/node-libs-browser/node_modules/readable-stream/lib/internal/streams util","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/object-inspect ./util.inspect","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/elliptic/node_modules/bn.js/lib buffer","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/brorand crypto","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/readable-stream/lib util","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/readable-stream/lib/internal/streams util","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/@ethersproject/signing-key/node_modules/bn.js/lib buffer","ignored /home/nypsus/mon-projet-deploiement/Front-end-indicateur/node_modules/@ethersproject/bignumber/node_modules/bn.js/lib buffer","/home/nypsus/mon-projet-deploiement/Front-end-indicateur/src/App.js","/home/nypsus/mon-projet-deploiement/Front-end-indicateur/src/index.js"],"names":["usdtAddress","usdtABI","contractAddress","bscTestnetRpcUrl","bscTestnetProvider","ethers","providers","JsonRpcProvider","App","web3Modal","setWeb3Modal","useState","provider","setProvider","walletConnected","setWalletConnected","walletAddress","setWalletAddress","productInfo","setProductInfo","selectedProductId","setSelectedProductId","productId","setProductId","productPrice","setProductPrice","bnbToUsdRate","setBnbToUsdRate","selectedCurrency","setSelectedCurrency","convertedPrice","setConvertedPrice","contractInstance","setContractInstance","products","product1","price","exists","title","product2","product3","useEffect","modal","Web3Modal","cacheProvider","providerOptions","walletconnect","package","WalletConnectProvider","options","infuraId","metamask","trustwallet","interval","setInterval","web3ModalElement","document","querySelector","style","zIndex","clearInterval","hideIframe","iframe","display","reconnectToMetaMask","window","ethereum","alert","request","method","params","eth_accounts","setTimeout","accounts","Web3Provider","signer","getSigner","address","getAddress","error","console","connectWallet","log","instance","connect","newProvider","clearCachedProvider","retryError","fetchBnbToUsdRate","response","axios","get","data","binancecoin","usd","loadBlockchainData","contractABI","contract","Contract","productDetails","payForProduct","amountIn","Error","priceInWei","utils","parseUnits","toString","tx","buyProduct","value","receipt","wait","loading","setLoading","transactionInProgress","setTransactionInProgress","approveUSDT","amountToSend","usdtContract","allowance","lt","approve","status","checkAllowance","amount","tokenContract","approveToken","hash","handlePayment","parseFloat","toFixed","message","updateProductInfo","handleCurrencyChange","event","newCurrency","target","_jsxs","className","children","_jsx","onClick","onChange","e","root","ReactDOM","createRoot","getElementById","render","React","StrictMode"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","import React, { useEffect, useState, useRef } from 'react';\nimport Web3Modal from 'web3modal';\nimport { ethers } from 'ethers';\nimport axios from 'axios';\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\nimport process from 'process';\nimport './App.css'; // Importation du fichier CSS\nimport './index.css'; // Ajoute cette ligne dans ton fichier JavaScript\n\n\n// Adresse du contrat USDT sur BSC (assure-toi que c'est l'adresse correcte pour le réseau que tu utilises)\nconst usdtAddress = '0x55d398326f99059fF775485246999027B3197955'; // Adresse du contrat USDT sur Binance Smart Chain\n\n// ABI pour le contrat USDT\nconst usdtABI = [\n  \"function balanceOf(address) view returns (uint256)\",\n  \"function allowance(address, address) view returns (uint256)\",\n  \"function approve(address spender, uint256 amount) public returns (bool)\",\n  \"function transferFrom(address sender, address recipient, uint256 amount) public returns (bool)\"\n];\n\n\n\n\nconst contractAddress = '0xCd25eee89Bb01603f0E0cf8D8C243966a926761d';\nconst bscTestnetRpcUrl = \"https://bsc-dataseed.binance.org/\"; // BSC Mainnet\nconst bscTestnetProvider = new ethers.providers.JsonRpcProvider(bscTestnetRpcUrl);\n\n\n\n\nfunction App() {\n  const [web3Modal, setWeb3Modal] = useState(null);\n  const [provider, setProvider] = useState(null);\n  const [walletConnected, setWalletConnected] = useState(false);\n  const [walletAddress, setWalletAddress] = useState('');\n\n  const [productInfo, setProductInfo] = useState(null);\n  const [selectedProductId, setSelectedProductId] = useState(null); // ou un ID de produit par défaut\n\n  const [productId, setProductId] = useState('');\n  const [productPrice, setProductPrice] = useState(null);\n  const [bnbToUsdRate, setBnbToUsdRate] = useState(null);\n  const [selectedCurrency, setSelectedCurrency] = useState('USD');\n  const [convertedPrice, setConvertedPrice] = useState(null);\n  const [contractInstance, setContractInstance] = useState(null); // Déclarez `contractInstance` ici\n  const products = {\n    product1: { price: 5, exists: true, title: \"Indicateur Daily\" },\n    product2: { price: 295, exists: true, title: \"Indicateur 4h/1h\" },\n    product3: { price: 495, exists: true, title: \"Indicateur 15mn\" }\n  };\n  \n\n\n\n\n\n\n  \n  // Initialisation de Web3Modal pour la connexion aux portefeuilles\n  useEffect(() => {\n  const modal = new Web3Modal({\n    cacheProvider: true, // Gardera en cache la dernière connexion\n    providerOptions: {\n      walletconnect: {\n        package: WalletConnectProvider, // Utilisation de WalletConnectProvider\n        options: {\n          infuraId: \"e759bc5af90042a1b66c5a01aae905af\" // Remplace avec ton propre infura ID\n        }\n      },\n      metamask: {\n        package: null, // MetaMask ne nécessite pas de package\n        \n      },\n      trustwallet: {\n        package: WalletConnectProvider, // Utilisation de WalletConnectProvider pour Trust Wallet\n        options: {\n          infuraId: \"pDtEhrK4AAiPfirK7qsQI25NJlgrtMu1bBcFDqV4J95GTCAR2d/8Lg\" // Remplace avec ton propre infura ID\n        }\n      },\n      \n      // Ajoute d'autres options de portefeuille ici si nécessaire (par exemple : Fortmatic, etc.)\n    }\n  });\n\n  setWeb3Modal(modal);\n\n  // Vérifie si la modale est présente dans le DOM\n  const interval = setInterval(() => {\n    const web3ModalElement = document.querySelector('.web3-modal-container');\n    if (web3ModalElement) {\n      web3ModalElement.style.zIndex = '999999'; // Modale au-dessus de tout\n      clearInterval(interval);\n    }\n  }, 100);\n\n  return () => clearInterval(interval);\n\n}, []);\n\n  \n\n\n  // Masquer l'iframe si elle est présente\n  const hideIframe = () => {\n    const iframe = document.querySelector('iframe');\n    if (iframe) {\n      iframe.style.display = 'none'; // ou iframe.remove() si tu préfères\n    }\n  };\n\n  // Appel de la fonction pour masquer l'iframe au moment où Web3Modal est chargé\n  hideIframe();\n  \n\n  // Fonction pour reconnecter MetaMask\n  const reconnectToMetaMask = async () => {\n    if (typeof window.ethereum === \"undefined\") {\n      alert(\"MetaMask n'est pas installé !\");\n      return;\n    }\n\n    try {\n      \n      await window.ethereum.request({\n        method: 'wallet_requestPermissions',\n        params: [{\n          eth_accounts: {}\n        }]\n      });\n\n      setTimeout(async () => {\n        const accounts = await window.ethereum.request({\n          method: 'eth_requestAccounts',\n        });\n\n        const provider = new ethers.providers.Web3Provider(window.ethereum);\n        const signer = provider.getSigner();\n        const address = await signer.getAddress();\n\n        setWalletAddress(address);\n        setWalletConnected(true);\n        alert(`Compte connecté : ${address}`);\n      }, 1000);\n    } catch (error) {\n      console.error('Erreur de connexion à MetaMask :', error);\n      alert('Échec de la connexion à MetaMask.');\n    }\n  };\n\n\n  // Connexion au wallet via Web3Modal\n  const connectWallet = async () => {\n    if (!web3Modal) {\n      console.error(\"Web3Modal non initialisé\");\n      return;\n    }\n    \n    try {\n      console.log(\"Tentative de connexion au wallet...\");\n      \n      \n      // Connexion via Web3Modal\n      const instance = await web3Modal.connect();\n      const newProvider = new ethers.providers.Web3Provider(instance);\n      \n      // S'assurer que le provider est correctement défini\n      if (!newProvider) {\n        console.error(\"Le fournisseur Web3 n'a pas été correctement créé\");\n        return;\n      }\n      \n      setProvider(newProvider);\n  \n      // Récupérer l'adresse du wallet\n      const signer = newProvider.getSigner();\n      const address = await signer.getAddress();\n      \n      setWalletAddress(address);\n      setWalletConnected(true);\n      \n      console.log(`Wallet connecté: ${address}`);\n    } catch (error) {\n      console.error(\"Erreur lors de la connexion au portefeuille:\", error);\n      alert(\"Erreur de connexion au portefeuille. Veuillez connecter votre wallet.\");\n      // Ferme Web3Modal\n      web3Modal.clearCachedProvider();\n\n      // Relance le processus de reconnexion via MetaMask\n      try {\n        if (typeof window.ethereum !== \"undefined\") {\n          await reconnectToMetaMask();\n        } else {\n          alert(\"MetaMask n'est pas installé.\");\n        }\n      } catch (retryError) {\n        console.error(\"Échec de la reconnexion à MetaMask\", retryError);\n        alert(\"La reconnexion à MetaMask a échoué.\");\n      }\n    }\n  };\n  \n\n  // Récupération du taux de conversion BNB vers USD\n  const fetchBnbToUsdRate = async () => {\n    try {\n      const response = await axios.get('https://api.coingecko.com/api/v3/simple/price?ids=binancecoin&vs_currencies=usd');\n      setBnbToUsdRate(response.data.binancecoin.usd);\n    } catch (error) {\n      console.error('Erreur lors de la récupération du taux BNB -> USD', error);\n    }\n  };\n\n   // Charger les données du contrat et les informations du produit\nuseEffect(() => {\n  const loadBlockchainData = async () => {\n    if (provider) {\n      // Adresse du contrat et ABI\n      const contractAddress = '0xCd25eee89Bb01603f0E0cf8D8C243966a926761d';\n      const contractABI = [\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"token\",\n        \"type\": \"address\"\n      }\n    ],\n    \"name\": \"addAllowedToken\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"token\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"amount\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"internalType\": \"string\",\n        \"name\": \"productId\",\n        \"type\": \"string\"\n      }\n    ],\n    \"name\": \"pay\",\n    \"outputs\": [],\n    \"stateMutability\": \"payable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"token\",\n        \"type\": \"address\"\n      }\n    ],\n    \"name\": \"removeAllowedToken\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address[]\",\n        \"name\": \"tokens\",\n        \"type\": \"address[]\"\n      }\n    ],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"constructor\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"user\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"uint256\",\n        \"name\": \"amount\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"address\",\n        \"name\": \"token\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"string\",\n        \"name\": \"productId\",\n        \"type\": \"string\"\n      }\n    ],\n    \"name\": \"PaymentReceived\",\n    \"type\": \"event\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"string\",\n        \"name\": \"productId\",\n        \"type\": \"string\"\n      }\n    ],\n    \"name\": \"removeProduct\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"string\",\n        \"name\": \"productId\",\n        \"type\": \"string\"\n      },\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"price\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"setProductPrice\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"amount\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"withdraw\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"token\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"amount\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"withdrawToken\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"\",\n        \"type\": \"address\"\n      }\n    ],\n    \"name\": \"allowedTokens\",\n    \"outputs\": [\n      {\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"token\",\n        \"type\": \"address\"\n      }\n    ],\n    \"name\": \"isTokenAllowed\",\n    \"outputs\": [\n      {\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [],\n    \"name\": \"owner\",\n    \"outputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"\",\n        \"type\": \"address\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"string\",\n        \"name\": \"\",\n        \"type\": \"string\"\n      }\n    ],\n    \"name\": \"products\",\n    \"outputs\": [\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"price\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"internalType\": \"bool\",\n        \"name\": \"exists\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n\n    \n  }\n];\n\n\n\n\n        // Crée une nouvelle instance du contrat avec le provider\n      const contract = new ethers.Contract(contractAddress, contractABI, provider.getSigner());\n\n      // Appel direct à la méthode du contrat, sans attendre que contractInstance soit mis à jour\n      try {\n        const productDetails = await contract.products(\"product1\");\n        setProductInfo(productDetails);\n        setProductPrice(productDetails.price);\n      } catch (error) {\n        console.error(\"Erreur lors de la récupération des informations du produit:\", error);\n      }\n      \n      // Stocke cette instance dans l'état\n      setContractInstance(contract);\n    }\n  };\n\n  loadBlockchainData();\n  fetchBnbToUsdRate();\n}, [provider]);  // Dépendance sur 'provider' uniquement, pas besoin de contractInstance ici\n\n\n\n\n\n\n\nconst payForProduct = async (amountIn) => {\n    try {\n      // Vérifie que le contrat est bien initialisé\n      if (!contractInstance) {\n        throw new Error(\"Le contrat n'est pas initialisé.\");\n      }\n  \n      // Récupérer les détails du produit sélectionné\n      const productDetails = products[selectedProductId]; // Utilise selectedProductId pour récupérer les détails du produit\n      console.log(\"Détails du produit sélectionné:\", productDetails);\n  \n      if (!productDetails || !productDetails.exists || productDetails.price <= 0) {\n        throw new Error(\"Produit invalide ou prix incorrect.\");\n      }\n  \n      // Convertir le prix du produit en unités appropriées (wei pour Ethereum)\n      const priceInWei = ethers.utils.parseUnits(amountIn.toString(), selectedCurrency === 'USDT' ? 6 : 18); // Conversion du montant en fonction de la devise\n      console.log(\"Montant en Wei pour la transaction:\", priceInWei.toString());\n  \n      // Appel au contrat pour effectuer l'achat\n      const tx = await contractInstance.buyProduct(\n        selectedProductId,   // Identifiant du produit\n        priceInWei,          // Montant à envoyer (en fonction de la devise)\n        { value: selectedCurrency === 'BNB' ? priceInWei : 0 } // Si c'est BNB, l'envoyer dans le champ 'value'\n      );\n  \n      // Attendre que la transaction soit minée (confirmée)\n      const receipt = await tx.wait();\n      console.log(\"Transaction réussie:\", receipt);\n  \n      // Effectuer des actions post-paiement, comme rediriger l'utilisateur, afficher un message de confirmation, etc.\n      alert(\"Paiement effectué avec succès !\");\n    } catch (error) {\n      console.error(\"Erreur lors du paiement:\", error);\n      alert(\"Une erreur s'est produite lors du paiement. Veuillez réessayer.\");\n    }\n  };\n  \n  \n  \n\n\n\n\n  const [loading, setLoading] = useState(false); // Ajout de l'état loading\n  const [transactionInProgress, setTransactionInProgress] = useState(false);\n\n  \n  \n  // Fonction pour approuver USDT\n  const approveUSDT = async (amountToSend) => {\n    const signer = new ethers.providers.Web3Provider(window.ethereum).getSigner();\n    const usdtContract = new ethers.Contract(usdtAddress, usdtABI, signer);\n  \n    try {\n      const allowance = await usdtContract.allowance(await signer.getAddress(), contractAddress);\n      console.log(\"Allowance actuelle:\", allowance.toString());\n  \n      if (allowance.lt(amountToSend)) {\n        console.log(\"Allowance insuffisante, approbation en cours...\");\n        const tx = await usdtContract.approve(contractAddress, amountToSend);\n        const receipt = await tx.wait();\n  \n        if (receipt.status === 1) {\n          console.log(\"Allowance mise à jour !\");\n        } else {\n          console.error(\"L'approbation de l'allowance a échoué.\");\n          throw new Error(\"Échec de l'approbation de l'allowance.\");\n        }\n      } else {\n        console.log(\"Allowance suffisante.\");\n      }\n    } catch (error) {\n      console.error(\"Erreur lors de l'approbation de l'allowance USDT :\", error);\n    }\n  };\n  \n  // Vérification de l'allowance\n  const checkAllowance = async (amount) => {\n    try {\n      // Assure-toi de récupérer l'instance du token, par exemple USDT\n      const tokenContract = new ethers.Contract(usdtAddress, usdtABI, provider.getSigner());\n      const allowance = await tokenContract.allowance(walletAddress, contractInstance.address);\n  \n      if (allowance.lt(amount)) {\n        // Si l'allowance est insuffisante, demander une approbation\n        console.log(\"Allowance insuffisante, demande d'approbation...\");\n        await approveToken(amount);\n      } else {\n        console.log(\"Allowance suffisante\");\n        // Proceed with the payment if allowance is sufficient\n      }\n    } catch (error) {\n      console.error(\"Erreur lors de la vérification de l'allowance\", error);\n    }\n  };\n  \n\n  const approveToken = async (amount) => {\n    try {\n      const tokenContract = new ethers.Contract(usdtAddress, usdtABI, provider.getSigner());\n      console.log(\"Demande d'approbation pour un montant de:\", amount.toString());\n  \n      const tx = await tokenContract.approve(contractInstance.address, amount);\n      console.log(\"Transaction d'approbation envoyée:\", tx.hash);\n  \n      // Attendre que la transaction soit confirmée\n      const receipt = await tx.wait();\n      if (receipt.status === 1) {\n        console.log(\"Approvisionnement effectué avec succès !\");\n      } else {\n        console.error(\"La transaction d'approbation a échoué.\");\n      }\n  \n      // Une fois l'approbation effectuée, appeler la fonction de paiement\n      await payForProduct(amount);  // Effectue le paiement après approbation\n    } catch (error) {\n      console.error(\"Erreur lors de l'approbation du token\", error);\n      alert(\"Échec de l'approbation du token.\");\n    }\n  };\n  \n  \n  \n  // Fonction pour le paiement\n  const handlePayment = async () => {\n    if (!walletConnected) {\n      alert(\"Veuillez connecter votre wallet avant de procéder.\");\n      return;\n    }\n  \n    if (productId && productPrice) {\n      let amountIn = 0;\n      try {\n        if (selectedCurrency === 'USD') {\n          amountIn = productPrice;\n        } else if (selectedCurrency === 'BNB') {\n          if (!bnbToUsdRate) {\n            alert(\"Le taux de conversion BNB vers USD est en cours de chargement.\");\n            return;\n          }\n          amountIn = productPrice / bnbToUsdRate;\n        } else {\n          alert(\"Devise non supportée pour ce paiement.\");\n          return;\n        }\n  \n        amountIn = parseFloat(amountIn).toFixed(18); // Conversion en format compatible Ethereum\n        console.log('Montant pour la transaction:', amountIn);\n  \n        // Vérification de l'allowance et approbation si nécessaire\n        await checkAllowance(ethers.utils.parseUnits(amountIn.toString(), selectedCurrency === 'USDT' ? 6 : 18));\n  \n        // Effectue le paiement une fois l'allowance confirmée\n        console.log(\"Paiement prêt à être effectué.\");\n        await payForProduct(amountIn);\n  \n        console.log(\"Transaction envoyée.\");\n      } catch (error) {\n        console.error(\"Erreur lors du calcul du montant:\", error.message);\n        alert(\"Une erreur s'est produite. Veuillez vérifier vos paramètres.\");\n      }\n    } else {\n      alert(\"Veuillez sélectionner un produit valide.\");\n    }\n  };\n  \n  \n  // Mise à jour des informations du produit\n  const updateProductInfo = (selectedProductId) => {\n    setProductId(selectedProductId);\n    const productDetails = products[selectedProductId];\n  \n    if (productDetails) {\n      const { price, exists } = productDetails;\n      setProductPrice(price);\n      setProductInfo({ price, exists });\n  \n      if (selectedCurrency === 'USD') {\n        setConvertedPrice(price ? price.toString() : null);\n      } else if (selectedCurrency === 'BNB') {\n        setConvertedPrice(price ? (price / bnbToUsdRate).toString() : null);\n      }\n    } else {\n      console.error(\"Produit non trouvé !\");\n    }\n  };\n  \n  // Gestion du changement de devise\n  const handleCurrencyChange = (event) => {\n    const newCurrency = event.target.value;\n    setSelectedCurrency(newCurrency);\n  \n    if (newCurrency === 'USD') {\n      setConvertedPrice(productPrice ? productPrice.toString() : null);\n    } else if (newCurrency === 'BNB') {\n      setConvertedPrice(productPrice ? (productPrice / bnbToUsdRate).toString() : null);\n    }\n  };\n  \n  return (\n    <div className=\"App\">\n      <h1>Test de Paiement Multi-Produits avec Blockchain</h1>\n      <button onClick={connectWallet}>\n        {walletConnected ? `Wallet connecté : ${walletAddress}` : 'Connecter le wallet'}\n      </button>\n  \n      {productId && productInfo && (\n        <div>\n          <p>Produit choisi : {productId}</p>\n          <p>Prix du produit : {convertedPrice ? convertedPrice : 'Chargement...'} {selectedCurrency}</p>\n          <p>Le produit est {productInfo.exists ? 'disponible' : 'indisponible'}</p>\n        </div>\n      )}\n  \n      <select onChange={(e) => updateProductInfo(e.target.value)} value={productId}>\n        <option value=\"\">Sélectionnez un produit</option>\n        <option value=\"product1\">Produit 1</option>\n        <option value=\"product2\">Produit 2</option>\n        <option value=\"product3\">Produit 3</option>\n      </select>\n  \n      <select onChange={handleCurrencyChange} value={selectedCurrency}>\n        <option value=\"USD\">USD</option>\n        <option value=\"BNB\">BNB</option>\n      </select>\n  \n      <button onClick={handlePayment}>Payer pour le produit</button>\n    </div>\n  );\n  };\n  \n  export default App;\n  ","import React from 'react';\nimport ReactDOM from 'react-dom/client';  // Cette ligne doit être valide avec React 18\nimport App from './App';\nimport './index.css'; // Ajoute cette ligne dans ton fichier JavaScript\nimport './App.css'; \n\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n"]}}